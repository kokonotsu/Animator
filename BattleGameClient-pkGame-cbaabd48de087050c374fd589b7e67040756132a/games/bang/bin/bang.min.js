var __reflect=this&&this.__reflect||function(e,a,t){e.__class__=a,t?t.push(a):t=[a],e.__types__=e.__types__?t.concat(e.__types__):t},__extends=this&&this.__extends||function(e,a){function t(){this.constructor=e}for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s]);t.prototype=a.prototype,e.prototype=new t},GameBangEventClass=function(){function e(){}return e.EVENT_READY="ready",e.EVENT_SENDSETTINGS="sendSettings",e.EVENT_SHOOT="shoot",e.EVENT_ISHOOT="ishoot",e.EVENT_RESULT="result",e.messageCenter=function(a){if(1!=GameBangItemClass.isOffline)switch(a){case e.EVENT_READY:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_READY+"|"+(new Date).getTime(),1);break;case e.EVENT_SENDSETTINGS:1==GameBangItemClass.isHost?App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_SENDSETTINGS+"|"+GameBangLogic.makeSettings()+"|"+(new Date).getTime(),1):console.log("you are not the host,do not send settings.");break;case e.EVENT_SHOOT:var t=GameBangItemClass.restSec;GameBangItemClass.youShootSec=t,App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_SHOOT+"|"+t.toString());break;case e.EVENT_ISHOOT:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_ISHOOT,1);break;case e.EVENT_RESULT:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_RESULT+"|"+GameBangItemClass.youHealth.toString()+"|"+GameBangItemClass.otherHealth.toString());break;default:console.log("illegal message!")}},e}();__reflect(GameBangEventClass.prototype,"GameBangEventClass");var GameBangItemClass=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return __extends(a,e),a.isOffline=!1,a.turnNum=1,a.readyState=[0,0],a.youHealth=5,a.otherHealth=5,a.multiple=1,a.tipsState=[0,0,0,0],a.isHost=!1,a.restSec=300,a.gameSettings=[],a.reference=!1,a.turnState=[0,0],a.fruitItem=["apricot","blueberry","cherry","granada","grape","mulberry"],a.AICanShoot=!0,a.youShootSec=-1,a.otherShootSec=-1,a.endArray=[],a.tipsPosArray=[[[-210,274],[10,274]],[[-210,618],[10,618]],[[686,274],[466,274]],[[686,618],[466,618]]],a.tipsRolePosArray=[[[-220,333],[0,333]],[[-220,671],[0,671]],[[640,333],[418,333]],[[640,671],[418,671]]],a.dispose=function(){a.backGround=void 0,a.youRole=void 0,a.otherRole=void 0,a.btnBang=void 0,a.isOffline=!1,a.turnNum=1,a.readyState=[0,0],a.youHealth=5,a.youHealthBoard=void 0,a.otherHealth=5,a.otherHealthBoard=void 0,a.multiple=1,a.pkBorder=void 0,a.headIcoLeft=void 0,a.headIcoRight=void 0,a.btnBackGround=void 0,a.bangTip=void 0,a.tipsRole_ul=void 0,a.tipsRole_bl=void 0,a.tipsRole_ur=void 0,a.tipsRole_br=void 0,a.tipsText_ul=void 0,a.tipsText_bl=void 0,a.tipsText_ur=void 0,a.tipsText_br=void 0,a.isHost=!1,a.restSec=300,a.youSmoke=void 0,a.otherSmoke=void 0,a.otherSoundEffect=void 0,a.youSoundEffect=void 0,a.backGroundSoundEffect=void 0,a.gameSettings=[],a.tipsState=[0,0,0,0],a.reference=!1,a.turnState=[0,0],a.AITimer=void 0,a.thirdSoundEffect=void 0,a.AICanShoot=!0,a.img5s=void 0,a.fireLightL=void 0,a.fireLightR=void 0,a.youShootSec=-1,a.otherShootSec=-1,a.endArray=[]},a}(State);__reflect(GameBangItemClass.prototype,"GameBangItemClass");var GameBangLogic=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return __extends(a,e),a.gameOver=function(e){App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,e)},a.resetRole=function(){GameBangItemClass.otherRole.texture=AssetManager.getBitmap("BA_otherRole_png").texture,GameBangItemClass.youRole.texture=AssetManager.getBitmap("BA_youRole_png").texture},a.btnBangManager=function(e){switch(e){case!0:GameBangItemClass.btnBang.touchEnabled=!0;break;case!1:GameBangItemClass.btnBang.touchEnabled=!1;break;default:console.log("illegal canUse!")}},a.turnDispose=function(){a.resetRole(),GameBangItemClass.restSec=300,GameBangItemClass.gameSettings=[],GameBangItemClass.tipsState=[0,0,0,0],GameBangItemClass.reference=!1,GameBangItemClass.turnState=[0,0],GameBangItemClass.readyState=[0,0],GameBangItemClass.btnBang.texture=AssetManager.getBitmap("BA_btnBang_png").texture},a.resetTips=function(){var e=[GameBangItemClass.tipsRole_ul,GameBangItemClass.tipsRole_bl,GameBangItemClass.tipsRole_ur,GameBangItemClass.tipsRole_br,GameBangItemClass.tipsText_ul,GameBangItemClass.tipsText_bl,GameBangItemClass.tipsText_ur,GameBangItemClass.tipsText_br];try{e.forEach(function(e){egret.Tween.removeTweens(e),e.alpha=0})}catch(a){console.log(a)}},a.showShootingTips=function(e,a){0==a&&(GameBangItemClass.reference=!0);var t,s,n,m=[],o=[],r=!1,l="";switch(GameBangItemClass.tipsState[e]=1,e){case 0:m=GameBangItemClass.tipsPosArray[0],o=GameBangItemClass.tipsRolePosArray[0],t=GameBangItemClass.tipsText_ul,s=GameBangItemClass.tipsRole_ul,r=!0;break;case 1:m=GameBangItemClass.tipsPosArray[1],o=GameBangItemClass.tipsRolePosArray[1],t=GameBangItemClass.tipsText_bl,s=GameBangItemClass.tipsRole_bl,r=!0;break;case 2:m=GameBangItemClass.tipsPosArray[2],o=GameBangItemClass.tipsRolePosArray[2],t=GameBangItemClass.tipsText_ur,s=GameBangItemClass.tipsRole_ur,r=!1;break;case 3:m=GameBangItemClass.tipsPosArray[3],o=GameBangItemClass.tipsRolePosArray[3],t=GameBangItemClass.tipsText_br,s=GameBangItemClass.tipsRole_br,r=!1;break;default:console.log("illegal pos! num: "+e)}try{t.alpha=1,s.alpha=1,egret.Tween.removeTweens(t),egret.Tween.removeTweens(s),t.x=m[0][0],t.y=m[0][1],s.x=o[0][0],s.y=o[0][1]}catch(g){console.log(g)}switch(r){case!1:l="R";break;case!0:l="L";break;default:console.log("illegal aspect!")}switch(a){case 0:GameBangItemClass.reference=!0,t.texture=AssetManager.getBitmap("BA_"+l+"_BANG_png",!1,!1).texture,n="BA_bang_mp3";break;case 1:t.texture=AssetManager.getBitmap("BA_"+l+"_DENG_png",!1,!1).texture,n="BA_deng_mp3";break;case 2:t.texture=AssetManager.getBitmap("BA_"+l+"_BOOM_png",!1,!1).texture,n="BA_boom_mp3";break;case 3:t.texture=AssetManager.getBitmap("BA_"+l+"_DANG_png",!1,!1).texture,n="BA_dang_mp3";break;default:console.log("illegal item!")}var i=egret.Tween.get(t);i.to({x:m[1][0],y:m[1][1]},250),i.to({x:m[1][0],y:m[1][1]},800),i.to({x:m[0][0],y:m[0][1]},250),i.call(function(){i=null});var B=egret.Tween.get(s);GameBangItemClass.youSoundEffect.play(n,!0),B.to({x:o[1][0],y:o[1][1]},250),B.to({x:o[1][0],y:o[1][1]},800),B.to({x:o[0][0],y:o[0][1]},250),B.call(function(){GameBangItemClass.tipsState[e]=0,0==a&&(GameBangItemClass.reference=!1),B=null})},a.isHost=function(){if(1==GameBangItemClass.isOffline)GameBangItemClass.isHost=!0;else{var e=App.CurrChatId.split("_");DataCenter.instance.user.id.toString()==e[0]?GameBangItemClass.isHost=!0:GameBangItemClass.isHost=!1}},a.tipPosManager=function(){for(var e=GameBangItemClass.tipsState,a=[],t=0;t<e.length;t++){var s=e[t];0==s&&a.push(t)}var n=App.RandomUtils.limitInteger(0,a.length-1);return a[n]},a.makeSettings=function(){var e=[[0,1],[0,1],[0,1],[0,1]],a=Math.random();a>0&&.25>=a?e[0][1]=0:a>.2&&.5>=a?e[1][1]=0:a>.4&&.75>=a?e[2][1]=0:a>.6&&1>=a&&(e[3][1]=0);for(var t=0;4>t;t++)e[t][0]=60*(t+1)+App.RandomUtils.limitInteger(1,59),0!=e[t][1]&&(e[t][1]=App.RandomUtils.limitInteger(1,3));for(var s="",t=0;4>t;t++)for(var n=0;2>n;n++)s+=e[t][n]+"#";return s=s.slice(0,s.length-1)},a.decodeSettings=function(e){for(var a=[[0,0],[0,0],[0,0],[0,0]],t=e.split("#"),s=0;s<t.length;s++){var n=t[s];s%2==0?a[s/2][0]=parseInt(n):a[(s-1)/2][1]=parseInt(n)}console.log("has get settings..."),GameBangItemClass.gameSettings=a,console.log(a)},a.randomFruit=function(){var e=App.RandomUtils.randomArray(GameBangItemClass.fruitItem),a=App.RandomUtils.randomArray(GameBangItemClass.fruitItem);GameBangItemClass.youFruit.texture=AssetManager.getBitmap("BA_fruit_"+a+"_png").texture,GameBangItemClass.otherFruit.texture=AssetManager.getBitmap("BA_fruit_"+e+"_png").texture,GameBangItemClass.youFruitBoom.texture=AssetManager.getBitmap("BA_boom_"+a+"_png").texture,GameBangItemClass.otherFruitBoom.texture=AssetManager.getBitmap("BA_boom_"+e+"_png").texture},a.fruitEffectManager=function(e){switch(e){case 0:GameBangItemClass.youFruit.alpha=0,GameBangItemClass.youFruitBoom.scaleX=.01,GameBangItemClass.youFruitBoom.scaleY=.01,GameBangItemClass.youFruitBoom.alpha=1;var t=egret.Tween.get(GameBangItemClass.youFruitBoom);t.to({scaleX:1,scaleY:1},300,egret.Ease.quadOut),App.TimerManager.doTimer(2500,1,function(){GameBangItemClass.youFruitBoom.alpha=0,GameBangItemClass.youFruitBoom.scaleX=1,GameBangItemClass.youFruitBoom.scaleY=1},a);break;case 1:GameBangItemClass.otherFruit.alpha=0,GameBangItemClass.otherFruitBoom.scaleX=.01,GameBangItemClass.otherFruitBoom.scaleY=.01,GameBangItemClass.otherFruitBoom.alpha=1;var s=egret.Tween.get(GameBangItemClass.otherFruitBoom);s.to({scaleX:.5,scaleY:.5},300,egret.Ease.quadOut),App.TimerManager.doTimer(2500,1,function(){GameBangItemClass.otherFruitBoom.alpha=0,GameBangItemClass.otherFruitBoom.scaleX=.5,GameBangItemClass.otherFruitBoom.scaleY=.5},a);break;default:console.log("illegal fruit effect num!")}},a.randomBulletHole=function(){var e,a,t=App.RandomUtils.limitInteger(0,2);switch(t){case 0:e=App.RandomUtils.limitInteger(0,150),a=App.RandomUtils.limitInteger(455,845);break;case 1:e=App.RandomUtils.limitInteger(490,640),a=App.RandomUtils.limitInteger(455,845);break;case 2:e=App.RandomUtils.limitInteger(215,425),a=App.RandomUtils.limitInteger(470,535);break;default:console.log("illegal randomArea!")}var s=AssetManager.getBitmap("BA_groundHole_png",!0,!0);s.x=e,s.y=a,GameBangMainScene.instance.addChildAt(s,2)},a}(State);__reflect(GameBangLogic.prototype,"GameBangLogic");var GameBangMainScene=function(e){function a(){var t=e.call(this)||this;return t._announcement=new egret.DisplayObjectContainer,t.hasRun=!1,t.shockEffect=function(e,a,s,n,m,o,r,l,g){void 0===o&&(o=!0),void 0===r&&(r=!0),void 0===l&&(l=!1),void 0===g&&(g=!0);var i,B,h=e.x,u=e.y,p=[-1,1],d=App.RandomUtils.randomArray(p),c=App.RandomUtils.randomArray(p),C=App.RandomUtils.limitInteger(0,n),I=App.RandomUtils.limitInteger(0,n),G=egret.Tween.get(e,{loop:!0});App.TimerManager.doTimer(s,1,function(){egret.Tween.removeTweens(e),e.x=h,e.y=u},t);var _=function(){switch(l){case!0:d=1==d?-1:1,c=1==c?-1:1;break;case!1:d=App.RandomUtils.randomArray(p),c=App.RandomUtils.randomArray(p)}i=1==o?h+d*m+d*C:h,B=1==r?u+d*m+c*I:u};_(),G.to({x:i,y:B},a),G.call(function(){1==g&&(e.x=h,e.y=u),C=App.RandomUtils.limitInteger(0,n),I=App.RandomUtils.limitInteger(0,n),_()})},t.turnManager=function(){App.TimerManager.remove(t.otherShootJudge,t),t.screen&&(t.screen.alpha=0),GameBangItemClass.fireLightL.alpha=0,GameBangItemClass.fireLightR.alpha=0,GameBangItemClass.youFruit.alpha=0,GameBangItemClass.otherFruit.alpha=0,GameBangItemClass.youFruitBoom.alpha=0,GameBangItemClass.otherFruitBoom.alpha=0,t.screen&&(t.screen.alpha=0),App.SoundManager.stopBg(),App.SoundManager.playBg("BA_bgm_w8ToShoot_mp3"),1==GameBangItemClass.turnNum?t.firstStartEffectManager(function(){t.betweenFieldEffectManager(function(){GameBangLogic.randomFruit(),GameBangItemClass.youFruit.alpha=1,GameBangItemClass.otherFruit.alpha=1,egret.startTick(t.mainTick,t),1==GameBangItemClass.isOffline&&(GameBangItemClass.AICanShoot=!0,App.CurrGameAiLevel<4&&App.TimerManager.doTimer(500+3500*Math.random(),1,t.otherShootJudge,t)),GameBangItemClass.btnBang.touchEnabled=!0})}):t.betweenFieldEffectManager(function(){GameBangLogic.randomFruit(),GameBangItemClass.youFruit.alpha=1,GameBangItemClass.otherFruit.alpha=1,egret.startTick(t.mainTick,t),1==GameBangItemClass.isOffline&&(GameBangItemClass.AICanShoot=!0,App.CurrGameAiLevel<4&&App.TimerManager.doTimer(500+3500*Math.random(),1,t.otherShootJudge,t)),GameBangItemClass.btnBang.touchEnabled=!0}),GameBangItemClass.readyState=[0,0],console.log("第"+GameBangItemClass.turnNum.toString()+"回合开始！");var e=["youHealth_1","youHealth_2","youHealth_3","youHealth_4","youHealth_5","otherHealth_1","otherHealth_2","otherHealth_3","otherHealth_4","otherHealth_5","btnBang"];e.forEach(function(e){t.getChildByName(e).alpha=1})},t.shootResultDeal=function(){App.TimerManager.remove(t.shootResultDeal,t);var e;GameBangItemClass.gameSettings.forEach(function(a){0==a[1]&&(e=a[0])});var a=GameBangItemClass.youShootSec-e,s=GameBangItemClass.otherShootSec-e;-1==GameBangItemClass.youShootSec?t.otherShootJudge(!1,!0):-1==GameBangItemClass.otherShootSec?t.shoot(!0):(console.log("rightTime :"+e.toString()+", youDvalue :"+a.toString()+", otherDvalue :"+s.toString()),a>s?t.otherShootJudge(!1,!0):s>a?t.shoot(!0):parseInt(DataCenter.instance.user.id.toString())>parseInt(DataCenter.instance.room.player.id.toString())?t.shoot(!0):t.otherShootJudge(!1,!0)),t.hasRun=!1},t.remoteShoot=function(){0==GameBangItemClass.isOffline?GameBangEventClass.messageCenter(GameBangEventClass.EVENT_ISHOOT):t.preShoot()},t.preShoot=function(){switch(GameBangItemClass.btnBang.touchEnabled=!1,console.log("you shoot in :"+GameBangItemClass.restSec.toString()),GameBangEventClass.messageCenter(GameBangEventClass.EVENT_SHOOT),GameBangItemClass.reference){case!0:0==t.hasRun&&(t.hasRun=!0,App.TimerManager.doTimer(200,1,function(){t.shootResultDeal()},t));break;case!1:t.shoot()}},t.shoot=function(e){void 0===e&&(e=!1),GameBangItemClass.btnBang.texture=AssetManager.getBitmap("BA_btnBangPressed_png").texture,GameBangItemClass.btnBang.touchEnabled=!1,console.log(GameBangItemClass.reference),App.SoundManager.playEffect("BA_gunEffect_mp3",!0),GameBangItemClass.youRole.texture=AssetManager.getBitmap("BA_youRoleS_png").texture,1==GameBangItemClass.reference||1==e?(1==GameBangItemClass.isOffline&&App.TimerManager.remove(t.otherShootJudge,t),GameBangItemClass.AICanShoot=!1,App.SoundManager.stopBg(),GameBangItemClass.youSoundEffect.play("BA_bgm_hitedOther_mp3",!0),GameBangItemClass.thirdSoundEffect.play("BA_happyAndHitOther_mp3",!0),GameBangItemClass.otherSoundEffect.play("BA_beHit_mp3",!0),GameBangLogic.fruitEffectManager(1),t.fireSmokeEffectManager(0),t.shootEffectManager(0),GameBangItemClass.otherHealth>=1&&(GameBangItemClass.otherHealth-=1,t.healthEffectManager(1,GameBangItemClass.otherHealth,1)),GameBangItemClass.turnState[0]=1,t.shockEffect(GameBangItemClass.otherRole,10,1e3,10,5),egret.stopTick(t.mainTick,t),App.TimerManager.doTimer(3e3,1,function(){t.turnEnd()},t)):(GameBangItemClass.thirdSoundEffect.play("BA_happyAndHitOther_mp3",!0),t.fireSmokeEffectManager(0),t.shootEffectManager(1,0),GameBangItemClass.turnState[0]=2,GameBangLogic.randomBulletHole())},t.preOtherShootJudge=function(e){console.log("other shoot in :"+e.toString()),GameBangItemClass.otherShootSec=e,GameBangItemClass.btnBang.touchEnabled=!1,0==t.hasRun&&(t.hasRun=!0,App.TimerManager.doTimer(200,1,function(){t.shootResultDeal()},t))},t.otherShootJudge=function(e,a){if(void 0===e&&(e=!1),void 0===a&&(a=!1),1!=GameBangItemClass.isOffline||0!=GameBangItemClass.AICanShoot){GameBangItemClass.fireLightL.alpha=1,GameBangItemClass.fireLightR.alpha=1,App.TimerManager.doTimer(300,1,function(){GameBangItemClass.fireLightL.alpha=0,GameBangItemClass.fireLightR.alpha=0},t),GameBangItemClass.AICanShoot=!1;var s=function(){GameBangItemClass.thirdSoundEffect.play("BA_happyNoHit_mp3",!0),t.shootScreen(),t.fireSmokeEffectManager(1),t.shootEffectManager(0,1),GameBangItemClass.turnState[1]=2,GameBangLogic.randomBulletHole()};App.SoundManager.playEffect("BA_gunEffect_mp3",!0),GameBangItemClass.otherRole.texture=AssetManager.getBitmap("BA_otherRoleS_png").texture,1==GameBangItemClass.reference||1==a?(GameBangItemClass.btnBang.touchEnabled=!1,App.SoundManager.stopBg(),App.SoundManager.playBg("BA_bgm_hited_mp3"),GameBangItemClass.youSoundEffect.play("BA_beHit_mp3"),t.fireSmokeEffectManager(1),t.shootEffectManager(1),GameBangLogic.fruitEffectManager(0),GameBangItemClass.youHealth>=1&&(GameBangItemClass.youHealth-=1,t.healthEffectManager(0,GameBangItemClass.youHealth,1)),GameBangItemClass.turnState[1]=1,t.shockEffect(GameBangItemClass.youRole,10,1e3,10,5),egret.stopTick(t.mainTick,t),App.TimerManager.doTimer(3e3,1,function(){t.turnEnd()},t)):s()}},t.readyTick=function(){switch(GameBangItemClass.isOffline){case!1:if(1==GameBangItemClass.readyState[0]&&1==GameBangItemClass.readyState[1])return GameBangItemClass.readyState=[0,0],console.log("send settings!"),GameBangEventClass.messageCenter(GameBangEventClass.EVENT_SENDSETTINGS),!1;GameBangItemClass.gameSettings.length>0&&(egret.stopTick(t.readyTick,t),App.TimerManager.doTimer(1500,1,t.turnManager,t));break;case!0:return GameBangItemClass.gameSettings.length>0?(egret.stopTick(t.readyTick,t),App.TimerManager.doTimer(1e3+2e3*Math.random(),1,t.turnManager,t)):GameBangLogic.decodeSettings(GameBangLogic.makeSettings()),!1}return!1},t.isOfflineCallback=function(e,a){switch(GameBangItemClass.isOffline){case!1:a&&a();break;case!0:e&&e()}},t.AI=function(){var e=Math.random(),a=function(){App.TimerManager.remove(t.otherShootJudge,t),App.TimerManager.doTimer(550+Math.round(500*Math.random()),1,t.otherShootJudge,t),console.log("shooooooot!")};switch(App.CurrGameAiLevel){case 1:.2>=e&&a();break;case 2:.4>=e&&a();break;case 3:.6>=e&&a();break;case 4:.85>=e&&(App.TimerManager.remove(t.otherShootJudge,t),App.TimerManager.doTimer(350+Math.round(450*Math.random()),1,t.otherShootJudge,t));break;case 5:1>=e&&(App.TimerManager.remove(t.otherShootJudge,t),App.TimerManager.doTimer(200+Math.round(100*Math.random()),1,t.otherShootJudge,t))}},t.mainTick=function(){return GameBangItemClass.restSec>0&&(GameBangItemClass.gameSettings.forEach(function(e){e[0]==GameBangItemClass.restSec&&(GameBangLogic.showShootingTips(GameBangLogic.tipPosManager(),e[1]),0==e[1]&&(GameBangItemClass.reference=!0,1==GameBangItemClass.isOffline&&t.AI()))}),GameBangItemClass.restSec-=1),0==GameBangItemClass.restSec&&(egret.stopTick(t.mainTick,t),GameBangItemClass.btnBang.touchEnabled=!1,0==GameBangItemClass.turnState[0]&&0==GameBangItemClass.turnState[1]&&(GameBangItemClass.img5s.alpha=1,App.TimerManager.doTimer(1600,1,function(){GameBangItemClass.img5s.alpha=0},t)),console.log("turn end!"),t.turnEnd()),!0},t.shootScreen=function(){if(GameBangItemClass.youSoundEffect.play("BA_noHit_mp3",!0),t.screen=new egret.DisplayObjectContainer,t.screen&&0==t.screen.alpha)t.screen.getChildByName("screenBreaker").x=App.RandomUtils.limitInteger(200,490),t.screen.getChildByName("screenBreaker").y=App.RandomUtils.limitInteger(200,900),t.screen.alpha=1;else{var e=AssetManager.getBitmap("BA_whiteMask_png",!1,!1);e.x=0,e.y=0,e.alpha=.2,t.screen.addChild(e);var a=AssetManager.getBitmap("BA_notBeHit_png",!0,!0);a.name="screenBreaker",a.x=App.RandomUtils.limitInteger(200,490),a.y=App.RandomUtils.limitInteger(200,900),t.screen.addChild(a),t.addChild(t.screen)}var s=egret.Tween.get(screen);s.to({alpha:1},800),s.to({alpha:0},800),s.call(function(){t.screen.alpha=0,s=null})},t.messageManager=function(e){var a;switch(a=e.event.split("|"),a[0]){case GameBangEventClass.EVENT_READY:switch(e.userId.toString()){case DataCenter.instance.user.id.toString():GameBangItemClass.readyState[0]=1;break;case DataCenter.instance.room.player.id.toString():GameBangItemClass.readyState[1]=1}break;case GameBangEventClass.EVENT_SENDSETTINGS:GameBangLogic.decodeSettings(a[1]);break;case GameBangEventClass.EVENT_SHOOT:0==GameBangItemClass.reference?t.otherShootJudge():t.preOtherShootJudge(parseInt(a[1]));break;case GameBangEventClass.EVENT_ISHOOT:e.userId==DataCenter.instance.user.id&&t.preShoot();break;case GameBangEventClass.EVENT_RESULT:GameBangItemClass.endArray[1]=[parseInt(a[2]),parseInt(a[1])]}},t.endTick=function(){if(void 0==GameBangItemClass.endArray[0]||void 0==GameBangItemClass.endArray[1])return!1;if(void 0!=GameBangItemClass.endArray[0][1]&&void 0!=GameBangItemClass.endArray[0][0]&&void 0!=GameBangItemClass.endArray[1][1]&&void 0!=GameBangItemClass.endArray[1][0]){egret.stopTick(t.endTick,t);var e=void 0,a=void 0;if(GameBangItemClass.endArray[0][0]>GameBangItemClass.endArray[1][0]?e=GameBangItemClass.endArray[1][0]:GameBangItemClass.endArray[0][0]<GameBangItemClass.endArray[1][0]&&(e=GameBangItemClass.endArray[0][0]),GameBangItemClass.endArray[0][1]>GameBangItemClass.endArray[1][1]?a=GameBangItemClass.endArray[1][1]:GameBangItemClass.endArray[0][1]<GameBangItemClass.endArray[1][1]&&(a=GameBangItemClass.endArray[0][1]),GameBangItemClass.youHealth!=e&&void 0!=e){GameBangItemClass.youHealth=e;for(var s=0;s<GameBangItemClass.youHealth;s++){var n=void 0;n=s+1,t.getChildByName("youHealth_"+n).texture=AssetManager.getBitmap("BA_health_png",!0,!0).texture}for(var m=5-GameBangItemClass.youHealth,s=0;m>s;s++){var o=6-m;t.getChildByName("youHealth_"+o).texture=AssetManager.getBitmap("BA_healthGray_png",!0,!0).texture}}if(GameBangItemClass.otherHealth!=a&&void 0!=a){GameBangItemClass.otherHealth=a;for(var r=0;r<GameBangItemClass.otherHealth;r++){var n=void 0;n=r+1,t.getChildByName("otherHealth_"+n).texture=AssetManager.getBitmap("BA_health_png",!0,!0).texture}for(var m=5-GameBangItemClass.otherHealth,s=0;m>s;s++){var o=6-m;t.getChildByName("otherHealth_"+o).texture=AssetManager.getBitmap("BA_healthGray_png",!0,!0).texture}}t.localResultManager(),GameBangItemClass.endArray=[]}return!1},t.localResultManager=function(){if(0==GameBangItemClass.youHealth||0==GameBangItemClass.otherHealth){t.expressionTimer&&egret.clearTimeout(t.expressionTimer),App.TimerManager.remove(t.otherShootJudge,t),egret.stopTick(t.mainTick,t),egret.stopTick(t.readyTick,t);var e=function(){egret.stopTick(t.mainTick,t);var e=AssetManager.getBitmap("BA_winLight_png");e.x=320,e.y=420,t.addChild(e);var a=AssetManager.getBitmap("BA_win_png",!1,!1);a.x=0,a.y=0,t.addChild(a);var s=egret.Tween.get(e,{loop:!0});s.to({rotation:180},2e3),s.to({rotation:360},2e3),App.SoundManager.playEffect("BA_win_mp3"),App.TimerManager.doTimer(3e3,1,function(){egret.Tween.removeAllTweens()},t),App.TimerManager.doTimer(4e3,1,function(){GameBangLogic.gameOver(3)},t)},a=function(){egret.stopTick(t.mainTick,t);var e=AssetManager.getBitmap("BA_lose_png",!1,!1);e.x=0,e.y=0,t.addChild(e),App.SoundManager.playEffect("BA_lose_mp3"),App.TimerManager.doTimer(3e3,1,function(){egret.Tween.removeAllTweens()},t),App.TimerManager.doTimer(4e3,1,function(){GameBangLogic.gameOver(1)},t)};0==GameBangItemClass.youHealth?a():0==GameBangItemClass.youHealth&&0==GameBangItemClass.otherHealth?1==GameBangItemClass.isHost?e():a():0==GameBangItemClass.otherHealth&&e()}else App.TimerManager.doTimer(1e3,1,function(){egret.startTick(t.readyTick,t),GameBangEventClass.messageCenter(GameBangEventClass.EVENT_READY)},t)},t.turnEnd=function(){GameBangItemClass.AICanShoot=!0,egret.stopTick(t.mainTick,t),GameBangLogic.turnDispose(),GameBangLogic.resetTips(),GameBangItemClass.youShootSec=-1,GameBangItemClass.otherShootSec=-1,GameBangItemClass.turnNum+=1,0==GameBangItemClass.isOffline?(egret.startTick(t.endTick,t),GameBangEventClass.messageCenter(GameBangEventClass.EVENT_RESULT),GameBangItemClass.endArray[0]=[GameBangItemClass.youHealth,GameBangItemClass.otherHealth]):t.localResultManager()},t.fireSmokeEffectManager=function(e,a){switch(void 0===a&&(a=2),e){case 0:var s=egret.Tween.get(GameBangItemClass.youSmoke);s.to({alpha:1,scaleX:.6,scaleY:.6},300),s.to({alpha:1,scaleX:1.2,scaleY:1.2},300),s.to({alpha:0,scaleX:1.8,scaleY:1.8},300),s.call(function(){GameBangItemClass.youSmoke.alpha=0,GameBangItemClass.youSmoke.scaleY=.01,GameBangItemClass.youSmoke.scaleX=.01,s=null});break;case 1:var n=egret.Tween.get(GameBangItemClass.otherSmoke);n.to({alpha:1,scaleX:.6,scaleY:.6},300),n.to({alpha:1,scaleX:1.2,scaleY:1.2},300),n.to({alpha:0,scaleX:1.8,scaleY:1.8},300),n.call(function(){GameBangItemClass.otherSmoke.alpha=0,GameBangItemClass.otherSmoke.scaleY=.01,GameBangItemClass.otherSmoke.scaleX=.01,n=null})}switch(a){case 0:GameBangItemClass.youFruitBoom.alpha=1,App.TimerManager.doTimer(2500,1,function(){GameBangItemClass.youFruitBoom.alpha=0},t);break;case 1:GameBangItemClass.otherFruitBoom.alpha=1,App.TimerManager.doTimer(2500,1,function(){GameBangItemClass.otherFruitBoom.alpha=0,t.expression.alpha=0},t);break;case 2:break;default:console.log("illegal fire num!")}},t.shootEffectManager=function(e,a){void 0===a&&(a=2);var s=function(){t.expressionTimer&&egret.clearTimeout(t.expressionTimer),t.expression&&(t.expression.alpha=0)};switch(e){case 0:s(),t.expression=AssetManager.getBitmap("BA_otherBeHit_png",!1,!1),t.expression.x=290,t.expression.y=338;break;case 1:s(),t.expression=AssetManager.getBitmap("BA_otherHappy_png",!1,!1),t.expression.x=287,t.expression.y=338}t.expression&&0==t.expression.alpha?t.expression.alpha=1:t.addChild(t.expression),1==e&&t.shockEffect(t.expression,150,1e3,0,4,!1,!0,!0,!1),t.expressionTimer=egret.setTimeout(function(){t.expression.alpha=0,0==e&&(GameBangItemClass.otherFruitBoom.alpha=0)},t,2500);var n=function(e){if(t.getChildByName(e)){var a=t.getChildByName(e);egret.Tween.removeTweens(a),a.alpha=0}};switch(a){case 1:n("otherSweat"),t.otherSweat=AssetManager.getBitmap("BA_otherSweat_png",!1,!1),t.otherSweat.x=350,t.otherSweat.y=312,t.otherSweat.alpha=.8,t.otherSweat.name="otherSweat",t.otherSweat&&0==t.otherSweat.alpha?t.otherSweat.alpha=1:t.addChild(t.otherSweat);var m=egret.Tween.get(t.otherSweat);m.to({y:332},500),m.to({y:332},1200),m.call(function(){t.otherSweat.alpha=0,m=null});break;case 0:n("youSweat"),t.youSweat=AssetManager.getBitmap("BA_youSweat_png",!1,!1),t.youSweat.x=384,t.youSweat.y=690,t.youSweat.alpha=.8,t.youSweat.name="youSweat",t.youSweat&&0==t.youSweat.alpha?t.youSweat.alpha=1:t.addChild(t.youSweat);var o=egret.Tween.get(t.youSweat);o.to({y:720},500),o.to({y:720},1200),o.call(function(){t.youSweat.alpha=0,o=null});break;case 2:}},t.healthEffectManager=function(e,a,s){var n="";switch(e){case 0:n+="you";break;case 1:n+="other"}n+="Health_",n+=(a+1).toString();var m=t.getChildByName(n),o=egret.Tween.get(m);switch(s){case 1:o.to({alpha:0,scaleX:2,scaleY:2},500),o.call(function(){m.texture=AssetManager.getBitmap("BA_healthGray_png",!0,!0).texture}),o.to({alpha:1,scaleX:1,scaleY:1},500),o.call(function(){o=null});break;case 2:m.texture=AssetManager.getBitmap("BA_health_png",!0,!0).texture}},t.firstStartEffectManager=function(e){var a=egret.Tween.get(t.blackMask),s=egret.Tween.get(t.gameTips),n=egret.Tween.get(GameBangItemClass.bangTip);a.to({alpha:0},1e3),s.to({alpha:0},1e3),n.to({y:1097},1e3),n.call(function(){e&&e()})},t.betweenFieldEffectManager=function(e){t.readyImg&&0==t.readyImg.alpha?(t.readyImg.alpha=1,t.readyImg.y=530,t.readyImg.x=-87):(t.readyImg=AssetManager.getBitmap("BA_ready_png",!0,!0),t.readyImg.y=530,t.readyImg.x=-87,t.addChild(t.readyImg)),t.reloadingImg&&0==t.reloadingImg.alpha?(t.reloadingImg.alpha=1,t.reloadingImg.y=530,t.reloadingImg.x=-87):(t.reloadingImg=AssetManager.getBitmap("BA_reloading_png",!0,!0),t.reloadingImg.y=530,t.reloadingImg.x=-87,t.addChild(t.reloadingImg)),t._announcement&&0==t._announcement.alpha?(t._announcement.x=-640,t._announcement.y=0,t._announcement.alpha=1):(t._announcement.width=640,t._announcement.height=1136,t._announcement.x=-640,t._announcement.y=0,t.addChild(t._announcement)),t.announcement&&0==t.announcement.alpha?(t.announcement.x=0,t.announcement.y=0,t.announcement.alpha=1):(t.announcement=AssetManager.getBitmap("BA_announcement_png",!1,!1),t.announcement.x=0,t.announcement.y=0,t._announcement.addChild(t.announcement)),t.N&&0==t.N.alpha?(t.N.alpha=1,t.N.x=320,t.N.y=568):(t.N=AssetManager.getBitmap("BA_N_png",!0,!0),t.N.x=320,t.N.y=568,t._announcement.addChild(t.N)),t.turnText&&0==t.turnText.alpha?(t.turnText.x=282,t.turnText.y=575,t.turnText.alpha=1,t.turnText.text=GameBangItemClass.turnNum.toString()):(t.turnText=new egret.BitmapText,t.turnText.font=RES.getRes("BA_font_fnt"),t.turnText.x=282,t.turnText.y=575,t.turnText.width=102,t.turnText.height=82,t.turnText.anchorOffsetX=51,t.turnText.anchorOffsetY=41,t.turnText.textAlign=egret.HorizontalAlign.CENTER,t.turnText.text=GameBangItemClass.turnNum.toString(),t._announcement.addChild(t.turnText)),t.setChildIndex(t.readyImg,t.numChildren),t.setChildIndex(t.reloadingImg,t.numChildren),t.setChildIndex(t._announcement,t.numChildren),t.setChildIndex(GameBangItemClass.uBorder,t.numChildren+1),t.setChildIndex(GameBangItemClass.bBorder,t.numChildren+1),t.setChildIndex(GameBangItemClass.ulBorder,t.numChildren+1),t.setChildIndex(GameBangItemClass.urBorder,t.numChildren+1);var a=egret.Tween.get(t._announcement);a.to({x:0},300),a.to({x:0},900),a.to({x:-640},300),a.call(function(){var a=egret.Tween.get(t.readyImg);a.to({x:220},200),a.call(function(){GameBangItemClass.youSoundEffect.play("BA_ready_mp3",!0)}),a.to({x:420},800),a.to({x:727},200),a.call(function(){var s=egret.Tween.get(t.reloadingImg);s.to({x:220},200),s.call(function(){GameBangItemClass.youSoundEffect.play("BA_reload_mp3",!0)}),s.to({x:420},800),s.call(function(){var e=egret.Tween.get(GameBangItemClass.youRole);e.to({scaleX:1,scaleY:1},100),e.to({scaleX:1,scaleY:1},100),e.call(function(){e=null});var a=egret.Tween.get(GameBangItemClass.otherRole);a.to({scaleX:1,scaleY:1},100),a.to({scaleX:1,scaleY:1},100),a.call(function(){a=null})}),s.to({x:727},200),s.call(function(){e&&e(),s=null,t.reloadingImg.alpha=0,t._announcement.alpha=0,t.setChildIndex(t._announcement,1)}),t.readyImg.alpha=0,a=null})})},t.resultDeal=function(e){DataCenter.instance.room.gameResult=e,t.popup("GameResult",null)},t.gameStart=function(){switch(App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,t.messageManager,t),App.MessageCenter.addListener(EventMessage.ReceiveGameResultS2C,t.resultDeal,t),GameBangItemClass.backGround=AssetManager.getBitmap("BA_backGround_jpg",!1,!1),GameBangItemClass.backGround.x=0,GameBangItemClass.backGround.y=0,GameBangItemClass.backGround.width=640,GameBangItemClass.backGround.height=1136,t.addChildAt(GameBangItemClass.backGround,1),GameBangItemClass.headIcoLeft=new RoleHeadImage(DataCenter.instance.user.imgUrl,"tou_png",84,84),GameBangItemClass.headIcoLeft.x=188,GameBangItemClass.headIcoLeft.y=19,t.addChild(GameBangItemClass.headIcoLeft),GameBangItemClass.headIcoRight=new RoleHeadImage(DataCenter.instance.room.player.imgUrl,"tou_png",84,84),GameBangItemClass.headIcoRight.x=366,GameBangItemClass.headIcoRight.y=19,t.addChild(GameBangItemClass.headIcoRight),GameBangItemClass.pkBorder=AssetManager.getBitmap("BA_headIcoBorder_png",!0,!1),GameBangItemClass.pkBorder.x=320,GameBangItemClass.pkBorder.y=18,t.addChild(GameBangItemClass.pkBorder),GameBangItemClass.otherSmoke=AssetManager.getBitmap("BA_otherSmoke_png",!0,!0),GameBangItemClass.otherSmoke.x=320,GameBangItemClass.otherSmoke.y=373.5,GameBangItemClass.otherSmoke.scaleX=.01,GameBangItemClass.otherSmoke.scaleY=.01,GameBangItemClass.otherSmoke.alpha=0,t.addChild(GameBangItemClass.otherSmoke),GameBangItemClass.otherFruit=AssetManager.getBitmap("BA_fruit_blueberry_png",!1,!1),GameBangItemClass.otherFruit.x=291,GameBangItemClass.otherFruit.y=222,GameBangItemClass.otherFruit.scaleX=.5,GameBangItemClass.otherFruit.scaleY=.5,GameBangItemClass.otherFruit.alpha=0,t.addChild(GameBangItemClass.otherFruit),GameBangItemClass.otherRole=AssetManager.getBitmap("BA_otherRole_png",!0,!1),GameBangItemClass.otherRole.x=320,GameBangItemClass.otherRole.y=266,t.addChild(GameBangItemClass.otherRole),GameBangItemClass.fireLightL=AssetManager.getBitmap("BA_fireLight_png",!1,!1),GameBangItemClass.fireLightL.x=243,GameBangItemClass.fireLightL.y=375,GameBangItemClass.fireLightL.alpha=0,t.addChild(GameBangItemClass.fireLightL),GameBangItemClass.fireLightR=AssetManager.getBitmap("BA_fireLight_png",!1,!1),GameBangItemClass.fireLightR.x=348,GameBangItemClass.fireLightR.y=375,GameBangItemClass.fireLightR.alpha=0,t.addChild(GameBangItemClass.fireLightR),GameBangItemClass.youSmoke=AssetManager.getBitmap("BA_youSmoke_png",!0,!0),GameBangItemClass.youSmoke.x=320,GameBangItemClass.youSmoke.y=703,GameBangItemClass.youSmoke.scaleX=.01,GameBangItemClass.youSmoke.scaleY=.01,GameBangItemClass.youSmoke.alpha=0,t.addChild(GameBangItemClass.youSmoke),GameBangItemClass.youRole=AssetManager.getBitmap("BA_youRole_png",!0,!1),GameBangItemClass.youRole.x=320,GameBangItemClass.youRole.y=632,t.addChild(GameBangItemClass.youRole),GameBangItemClass.btnBackGround=AssetManager.getBitmap("BA_btnBackGround_png",!1,!1),GameBangItemClass.btnBackGround.x=0,GameBangItemClass.btnBackGround.y=0,t.addChild(GameBangItemClass.btnBackGround),GameBangItemClass.otherHealthBoard=AssetManager.getBitmap("BA_healthBoard_png",!0,!1),GameBangItemClass.otherHealthBoard.x=320,GameBangItemClass.otherHealthBoard.y=147,t.addChild(GameBangItemClass.otherHealthBoard),GameBangItemClass.youHealthBoard=AssetManager.getBitmap("BA_healthBoard_png",!0,!1),GameBangItemClass.youHealthBoard.x=320,GameBangItemClass.youHealthBoard.y=852,t.addChild(GameBangItemClass.youHealthBoard),GameBangItemClass.btnBang=AssetManager.getBitmap("BA_btnBang_png",!0,!1),GameBangItemClass.btnBang.x=320,GameBangItemClass.btnBang.y=950,GameBangItemClass.btnBang.name="btnBang",GameBangItemClass.btnBang.touchEnabled=!1,GameBangItemClass.btnBang.alpha=0,GameBangItemClass.isOffline){case!1:GameBangItemClass.btnBang.addEventListener("touchTap",t.preShoot,t);
break;case!0:GameBangItemClass.btnBang.addEventListener("touchTap",t.shoot,t)}if(t.addChild(GameBangItemClass.btnBang),t.youHealth_1=AssetManager.getBitmap("BA_health_png",!0,!0),t.youHealth_1.x=219.5,t.youHealth_1.y=874.5,t.youHealth_1.name="youHealth_1",t.youHealth_1.alpha=0,t.addChild(t.youHealth_1),t.youHealth_2=AssetManager.getBitmap("BA_health_png",!0,!0),t.youHealth_2.x=269.5,t.youHealth_2.y=874.5,t.youHealth_2.name="youHealth_2",t.youHealth_2.alpha=0,t.addChild(t.youHealth_2),t.youHealth_3=AssetManager.getBitmap("BA_health_png",!0,!0),t.youHealth_3.x=320.5,t.youHealth_3.y=874.5,t.youHealth_3.name="youHealth_3",t.youHealth_3.alpha=0,t.addChild(t.youHealth_3),t.youHealth_4=AssetManager.getBitmap("BA_health_png",!0,!0),t.youHealth_4.x=370.5,t.youHealth_4.y=874.5,t.youHealth_4.name="youHealth_4",t.youHealth_4.alpha=0,t.addChild(t.youHealth_4),t.youHealth_5=AssetManager.getBitmap("BA_health_png",!0,!0),t.youHealth_5.x=421.5,t.youHealth_5.y=874.5,t.youHealth_5.name="youHealth_5",t.youHealth_5.alpha=0,t.addChild(t.youHealth_5),t.otherHealth_1=AssetManager.getBitmap("BA_health_png",!0,!0),t.otherHealth_1.x=219.5,t.otherHealth_1.y=169.5,t.otherHealth_1.name="otherHealth_1",t.otherHealth_1.alpha=0,t.addChild(t.otherHealth_1),t.otherHealth_2=AssetManager.getBitmap("BA_health_png",!0,!0),t.otherHealth_2.x=269.5,t.otherHealth_2.y=169.5,t.otherHealth_2.name="otherHealth_2",t.otherHealth_2.alpha=0,t.addChild(t.otherHealth_2),t.otherHealth_3=AssetManager.getBitmap("BA_health_png",!0,!0),t.otherHealth_3.x=320.5,t.otherHealth_3.y=169.5,t.otherHealth_3.name="otherHealth_3",t.otherHealth_3.alpha=0,t.addChild(t.otherHealth_3),t.otherHealth_4=AssetManager.getBitmap("BA_health_png",!0,!0),t.otherHealth_4.x=370.5,t.otherHealth_4.y=169.5,t.otherHealth_4.name="otherHealth_4",t.otherHealth_4.alpha=0,t.addChild(t.otherHealth_4),t.otherHealth_5=AssetManager.getBitmap("BA_health_png",!0,!0),t.otherHealth_5.x=421.5,t.otherHealth_5.y=169.5,t.otherHealth_5.name="otherHealth_5",t.otherHealth_5.alpha=0,t.addChild(t.otherHealth_5),GameBangItemClass.tipsText_ul=AssetManager.getBitmap("BA_L_DANG_png",!1,!1),GameBangItemClass.tipsText_ul.x=GameBangItemClass.tipsPosArray[0][0][0],GameBangItemClass.tipsText_ul.y=GameBangItemClass.tipsPosArray[0][0][1],t.addChild(GameBangItemClass.tipsText_ul),GameBangItemClass.tipsRole_ul=AssetManager.getBitmap("BA_L_Role_png",!1,!1),GameBangItemClass.tipsRole_ul.x=GameBangItemClass.tipsRolePosArray[0][0][0],GameBangItemClass.tipsRole_ul.y=GameBangItemClass.tipsRolePosArray[0][0][1],t.addChild(GameBangItemClass.tipsRole_ul),GameBangItemClass.tipsText_bl=AssetManager.getBitmap("BA_L_DANG_png",!1,!1),GameBangItemClass.tipsText_bl.x=GameBangItemClass.tipsPosArray[1][0][0],GameBangItemClass.tipsText_bl.y=GameBangItemClass.tipsPosArray[1][0][1],t.addChild(GameBangItemClass.tipsText_bl),GameBangItemClass.tipsRole_bl=AssetManager.getBitmap("BA_L_Role_png",!1,!1),GameBangItemClass.tipsRole_bl.x=GameBangItemClass.tipsRolePosArray[1][0][0],GameBangItemClass.tipsRole_bl.y=GameBangItemClass.tipsRolePosArray[1][0][1],t.addChild(GameBangItemClass.tipsRole_bl),GameBangItemClass.tipsText_ur=AssetManager.getBitmap("BA_R_DANG_png",!1,!1),GameBangItemClass.tipsText_ur.x=GameBangItemClass.tipsPosArray[2][0][0],GameBangItemClass.tipsText_ur.y=GameBangItemClass.tipsPosArray[2][0][1],t.addChild(GameBangItemClass.tipsText_ur),GameBangItemClass.tipsRole_ur=AssetManager.getBitmap("BA_R_Role_png",!1,!1),GameBangItemClass.tipsRole_ur.x=GameBangItemClass.tipsRolePosArray[2][0][0],GameBangItemClass.tipsRole_ur.y=GameBangItemClass.tipsRolePosArray[2][0][1],t.addChild(GameBangItemClass.tipsRole_ur),GameBangItemClass.tipsText_br=AssetManager.getBitmap("BA_R_DANG_png",!1,!1),GameBangItemClass.tipsText_br.x=GameBangItemClass.tipsPosArray[3][0][0],GameBangItemClass.tipsText_br.y=GameBangItemClass.tipsPosArray[3][0][1],t.addChild(GameBangItemClass.tipsText_br),GameBangItemClass.tipsRole_br=AssetManager.getBitmap("BA_R_Role_png",!1,!1),GameBangItemClass.tipsRole_br.x=GameBangItemClass.tipsRolePosArray[3][0][0],GameBangItemClass.tipsRole_br.y=GameBangItemClass.tipsRolePosArray[3][0][1],t.addChild(GameBangItemClass.tipsRole_br),GameBangItemClass.youFruit=AssetManager.getBitmap("BA_fruit_blueberry_png",!1,!1),GameBangItemClass.youFruit.x=256,GameBangItemClass.youFruit.y=560,GameBangItemClass.youFruit.alpha=0,t.addChild(GameBangItemClass.youFruit),GameBangItemClass.youFruitBoom=AssetManager.getBitmap("BA_boom_blueberry_png"),GameBangItemClass.youFruitBoom.x=320,GameBangItemClass.youFruitBoom.y=794,GameBangItemClass.youFruitBoom.alpha=0,t.addChild(GameBangItemClass.youFruitBoom),GameBangItemClass.otherFruitBoom=AssetManager.getBitmap("BA_boom_blueberry_png"),GameBangItemClass.otherFruitBoom.x=320,GameBangItemClass.otherFruitBoom.y=390,GameBangItemClass.otherFruitBoom.scaleX=.5,GameBangItemClass.otherFruitBoom.scaleY=.5,GameBangItemClass.otherFruitBoom.alpha=0,t.addChild(GameBangItemClass.otherFruitBoom),!App.IsXiaoMi&&!App.IsWanba){var e=AssetManager.getBitmap("goBack_png",!1,!1);e.y=19,e.name="backBtn",t.addChild(e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.popup("GameSureLeave")},t)}if(t.blackMask=AssetManager.getBitmap("BA_blackMask_png",!1,!1),t.blackMask.x=0,t.blackMask.y=0,t.blackMask.alpha=.8,t.blackMask.name="blackMask",t.addChild(t.blackMask),t.gameTips=AssetManager.getBitmap("BA_gameTips_png",!0,!1),t.gameTips.x=320,t.gameTips.y=80,t.gameTips.name="gameTips",t.addChild(t.gameTips),GameBangItemClass.bangTip=AssetManager.getBitmap("BA_bangTip_jpg",!0,!1),GameBangItemClass.bangTip.x=320,GameBangItemClass.bangTip.y=1010,t.addChild(GameBangItemClass.bangTip),GameBangItemClass.uBorder=AssetManager.getBitmap("BA_blackMask_png",!1,!1),GameBangItemClass.uBorder.x=0,GameBangItemClass.uBorder.y=-1136,t.addChild(GameBangItemClass.uBorder),GameBangItemClass.bBorder=AssetManager.getBitmap("BA_blackMask_png",!1,!1),GameBangItemClass.bBorder.x=0,GameBangItemClass.bBorder.y=1136,t.addChild(GameBangItemClass.bBorder),GameBangItemClass.ulBorder=AssetManager.getBitmap("BA_blackMask_png",!1,!1),GameBangItemClass.ulBorder.x=-640,GameBangItemClass.ulBorder.y=0,t.addChild(GameBangItemClass.ulBorder),GameBangItemClass.urBorder=AssetManager.getBitmap("BA_blackMask_png",!1,!1),GameBangItemClass.urBorder.x=640,GameBangItemClass.urBorder.y=0,t.addChild(GameBangItemClass.urBorder),GameBangItemClass.img5s=AssetManager.getBitmap("BA_5s_png"),GameBangItemClass.img5s.x=320,GameBangItemClass.img5s.y=550,GameBangItemClass.img5s.alpha=0,t.addChild(GameBangItemClass.img5s),GameBangItemClass.youSoundEffect=new SoundEffects,GameBangItemClass.youSoundEffect.setVolume(1),GameBangItemClass.otherSoundEffect=new SoundEffects,GameBangItemClass.otherSoundEffect.setVolume(1),GameBangItemClass.thirdSoundEffect=new SoundEffects,GameBangItemClass.thirdSoundEffect.setVolume(1),GameBangItemClass.backGroundSoundEffect=new SoundBg,GameBangItemClass.backGroundSoundEffect.setVolume(1),t.stage.stageHeight<1136){GameBangItemClass.multiple=t.stage.stageHeight/1136,t.scaleX=GameBangItemClass.multiple,t.scaleY=GameBangItemClass.multiple;var a=640*GameBangItemClass.multiple;t.x=(640-a)/2}else t.stage.stageHeight>1136&&(t.y=(t.stage.stageHeight-1136)/2);switch(egret.startTick(t.readyTick,t),GameBangItemClass.isOffline){case!0:break;case!1:App.TimerManager.doTimer(500,1,function(){GameBangEventClass.messageCenter(GameBangEventClass.EVENT_READY)},t)}},a.instance=t,t}return __extends(a,e),a.prototype.init=function(){e.prototype.init.call(this),GameBangItemClass.dispose(),DataCenter.instance.room.IsAI&&(GameBangItemClass.isOffline=!0),GameBangLogic.isHost(),App.SoundManager.stopBg(),App.SoundManager.playBg("BA_bgm_w8ToShoot_mp3"),egret.lifecycle.onPause=function(){App.SoundManager.setBgOn(!1),App.SoundManager.setEffectOn(!1),console.log("PAUSE!"),GameBangItemClass.backGroundSoundEffect&&GameBangItemClass.backGroundSoundEffect.setVolume(0),GameBangItemClass.otherSoundEffect&&GameBangItemClass.otherSoundEffect.setVolume(0),GameBangItemClass.thirdSoundEffect&&GameBangItemClass.thirdSoundEffect.setVolume(0),GameBangItemClass.youSoundEffect&&GameBangItemClass.youSoundEffect.setVolume(0)},egret.lifecycle.onResume=function(){App.SoundManager.setBgOn(!0),App.SoundManager.setEffectOn(!0),console.log("RESUME!"),GameBangItemClass.backGroundSoundEffect&&GameBangItemClass.backGroundSoundEffect.setVolume(1),GameBangItemClass.otherSoundEffect&&GameBangItemClass.otherSoundEffect.setVolume(1),GameBangItemClass.thirdSoundEffect&&GameBangItemClass.thirdSoundEffect.setVolume(1),GameBangItemClass.youSoundEffect&&GameBangItemClass.youSoundEffect.setVolume(1)},this.gameStart()},a.prototype.dispose=function(){e.prototype.dispose.call(this),GameBangItemClass.btnBang&&GameBangItemClass.btnBang.removeEventListener("touchTap",this.shoot,this),GameBangItemClass.dispose(),App.MessageCenter.removeListener(EventMessage.ReceiveGameEventS2C,this.messageManager,this),App.MessageCenter.removeListener(EventMessage.ReceiveGameResultS2C,this.resultDeal,this),this.expressionTimer&&egret.clearTimeout(this.expressionTimer),App.TimerManager.remove(this.otherShootJudge,this),egret.stopTick(this.mainTick,this),egret.stopTick(this.readyTick,this),egret.Tween.removeAllTweens()},a}(State);__reflect(GameBangMainScene.prototype,"GameBangMainScene");