var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},GameBlockoutBg=function(e){function t(){var t=e.call(this,GameBlockoutBgSkin)||this;return t.numRectWidth=29,t.ArrBlock_5=[[1,1],[1,1]],t.ArrBlock_6=[[0,1],[1,1]],t.ArrBlock_7=[[1,0],[1,1]],t.ArrBlock_8=[[1,1],[0,1]],t.ArrBlock_9=[[1,1],[1,0]],t.ArrBlock_10=[[1,1,1],[1,1,1],[1,1,1]],t.ArrBlock_11=[[0,0,1],[0,0,1],[1,1,1]],t.ArrBlock_12=[[1,0,0],[1,0,0],[1,1,1]],t.ArrBlock_13=[[1,1,1],[0,0,1],[0,0,1]],t.ArrBlock_14=[[1,1,1],[1,0,0],[1,0,0]],t.btn_help.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onHelp,t),t.addEventListener(egret.TouchEvent.TOUCH_END,t.onEnd,t),t}return __extends(t,e),t.prototype.onSetButton=function(e,t){if(void 0===t&&(t=1),this["btn_select"+t].name=e,0==e){var i=new eui.Image;i.source="game_block"+GameBlockoutView.GAME_BLOCK_CLOUR+"_png",this["gp_add"+t].addChild(i),i.width=i.height=this.numRectWidth}else if(0>e)for(var n=0;-1*e+1>n;++n){var i=new eui.Image;i.source="game_block"+GameBlockoutView.GAME_BLOCK_CLOUR+"_png",this["gp_add"+t].addChild(i),i.width=i.height=this.numRectWidth,i.x=n*this.numRectWidth}else if(e>0&&5>e)for(var n=0;e+1>n;++n){var i=new eui.Image;i.source="game_block"+GameBlockoutView.GAME_BLOCK_CLOUR+"_png",this["gp_add"+t].addChild(i),i.width=i.height=this.numRectWidth,i.y=n*this.numRectWidth}else for(var o=this["ArrBlock_"+e].length,n=0;o>n;++n)for(var s=0;o>s;++s)if(1==this["ArrBlock_"+e][s][n]){var i=new eui.Image;i.source="game_block"+GameBlockoutView.GAME_BLOCK_CLOUR+"_png",this["gp_add"+t].addChild(i),i.width=i.height=this.numRectWidth,i.x=n*this.numRectWidth,i.y=s*this.numRectWidth,console.log("添加物块",i.x,i.y,this["ArrBlock_"+e][n][s])}},t.prototype.onPlayBoomEffect=function(e,t){if(void 0===t&&(t=!0),t)for(var i=0;10>i;i++){var n=new eui.Image;this.gp_addBoomRect.addChild(n),n.anchorOffsetX=29,n.anchorOffsetY=29,n.x=29+58*i,n.y=29+58*e,n.name=""+i,n.source="game_block"+GameBlockoutView.GAME_BLOCK_CLOUR+"_png",this.onBoom(n)}else for(var i=0;10>i;i++){var n=new eui.Image;this.gp_addBoomRect.addChild(n),n.anchorOffsetX=29,n.anchorOffsetY=29,n.y=29+58*i,n.x=29+58*e,n.name=""+i,n.source="game_block"+GameBlockoutView.GAME_BLOCK_CLOUR+"_png",this.onBoom(n)}},t.prototype.onBoom=function(e){var t=this,i=Number(e.name);egret.Tween.get(e).wait(50*i).call(function(){var i=new eui.Image;t.gp_addBoomEffect.addChild(i),i.anchorOffsetX=65.5,i.anchorOffsetY=65.5,i.y=e.y,i.x=e.x,i.source="effect_delete"+GameBlockoutView.GAME_BLOCK_CLOUR+"_png",egret.Tween.get(i).to({alpha:0},600).call(function(){egret.Tween.removeTweens(i),i.parent&&i.parent.removeChild(i)})}).to({scaleX:1.2,scaleY:1.2},300).to({alpha:0},300).call(function(){egret.Tween.removeTweens(e),e.parent&&e.parent.removeChild(e)})},t.prototype.onHelp=function(){this.gp_help.visible=!0},t.prototype.onEnd=function(){1==this.gp_help.visible&&(this.gp_help.visible=!1)},t}(EuiComponent);__reflect(GameBlockoutBg.prototype,"GameBlockoutBg");var GameBlockoutView=function(e){function t(){var t=e.call(this)||this;return t.dict_move={},t.dict_Block={},t.numChange=0,t.numRectWidth=58,t.isLayoutButton_1=!1,t.isLayoutButton_2=!1,t.isLayoutButton_3=!1,t.num_name_1=0,t.num_name_2=0,t.num_name_3=0,t.isGameOver=!1,t.isAddBlocking=!1,t.numSelfLife=300,t.numEnumyLife=300,t.ArrNeedRandomChoose=[0,0,0,-1,-1,-2,-2,-3,-4,1,1,2,2,3,4,5,5,6,6,7,7,8,8,9,9,10],t.Arr_location=[[118,1018],[320,1018],[522,1018]],t.Can_DotArr=[],t.str_H1="",t.str_H2="",t.str_H3="",t.str_H4="",t.str_H5="",t.str_H6="",t.str_H7="",t.str_H8="",t.str_H9="",t.str_H0="",t.str_V1="",t.str_V2="",t.str_V3="",t.str_V4="",t.str_V5="",t.str_V6="",t.str_V7="",t.str_V8="",t.str_V9="",t.str_V0="",t.num_ReduceToEnumy=0,t.RectBoardArr=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],t.numTime=20,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.BaseComment=new GameBlockoutBg,this.addChild(this.BaseComment),this.BaseComment.width=App.GameWidth,this.BaseComment.height=App.GameHeight,App.GameHeight<t.GAME_HEIGHT&&(this.BaseComment.gp_game.scaleX=App.GameHeight/t.GAME_HEIGHT,this.BaseComment.gp_game.scaleY=App.GameHeight/t.GAME_HEIGHT);var i=DataCenter.instance.user;this.BaseComment.lb_name1.text=i.name;var n=new RoleHeadImage(i.imgUrl);n.scaleX=n.scaleY=.7,this.BaseComment.playerAvatarGroup1.addChild(n);var o=DataCenter.instance.room.player;this.BaseComment.lb_name2.text=o.name;var s=new RoleHeadImage(o.imgUrl);s.scaleX=s.scaleY=.7,this.BaseComment.playerAvatarGroup2.addChild(s);for(var a=1;3>=a;++a)this.BaseComment["btn_select"+a].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginButton,this);this.BaseComment.gp_game.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onbegin,this),this.BaseComment.gp_game.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this.BaseComment.gp_game.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.BaseComment.gp_game.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this),this.BaseComment.gp_game.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEnd,this),this.BaseComment.gp_red1.mask=new egret.Rectangle(0,0,130,9),this.BaseComment.gp_red2.mask=new egret.Rectangle(0,0,130,9),this.onReSetButton(),App.SoundManager.stopBg(),App.SoundManager.playBg("bg_blockmusic_mp3");for(var a=0;10>a;++a)for(var m=0;10>m;++m)this.dict_Block[a+"_"+m]=null;this.onReadyGo(),App.MessageCenter.addListener(EventMessage.ReceiveGameResultS2C,this.onGameResult,this)},t.prototype.onGameResult=function(e){DataCenter.instance.room.gameResult=e,this.popup("GameResult")},t.prototype.onGameEvent=function(e){var t=function(e){var t=e.split("|");return t},i=t(e.event);switch(i[0]){case"sendOperation":var n=Number(i[1]);this.onAttackSelf(n);break;case"EnumyReduceHeart":this.onGameTip(9),this.numEnumyLife-=100,this.onSetHeartEnumy();break;case"gameEnumyFail":this.onGameTip(3),this.numEnumyLife=0,this.onSetHeartEnumy()}},t.prototype.onReadyGo=function(){var e=this;this.BaseComment.img_start1.visible=!0;var t="readygo_mp3";App.SoundManager.playEffect(t),egret.Tween.get(this.BaseComment.img_start2).wait(700).call(function(){e.BaseComment.img_start1.visible=!1}).to({scaleX:1,scaleY:1},500).wait(500).call(function(){e.BaseComment.img_start2.visible=!1,egret.Tween.removeTweens(e.BaseComment.img_start2),DataCenter.instance.room.IsAI?App.TimerManager.doTimer(15e3,0,e.onAiAttack,e):App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,e.onGameEvent,e)})},t.prototype.show=function(){var t=this;e.prototype.show.call(this),this.dict_move.move={},egret.Tween.get(this).wait(1e3).to({alpha:1},500).call(function(){App.TimerManager.doTimer(1e3,0,t.onTimerUpdate,t)})},t.prototype.onBeginButton=function(e){if(!this.isGameOver){switch(e.target){case this.BaseComment.btn_select1:if(this.isLayoutButton_1)return;this.numChange=1;break;case this.BaseComment.btn_select2:if(this.isLayoutButton_2)return;this.numChange=2;break;case this.BaseComment.btn_select3:if(this.isLayoutButton_3)return;this.numChange=3}this.BaseComment["btn_"+this.numChange].scaleX=this.BaseComment["btn_"+this.numChange].scaleY=2,this.dict_move.move=this.BaseComment["btn_"+this.numChange],this.onMomentType=Number(e.target.name),this.onSetRectMove(e.target.name)}},t.prototype.onbegin=function(e){0==this.numChange||this.isGameOver||(this.BaseComment.gp_moveArr.x=this.dict_move.move.x-this.BaseComment.gp_moveArr.width/2,this.BaseComment.gp_moveArr.y=this.dict_move.move.y-this.BaseComment.gp_moveArr.height/2)},t.prototype.onMove=function(e){0==this.numChange||this.isGameOver||(this.dict_move.move.x=e.stageX,this.dict_move.move.y=e.stageY-100,this.num_FuYunX=e.stageX-this.BaseComment.gp_moveArr.width/2-30,this.num_FuYunY=e.stageY-100-this.BaseComment.gp_moveArr.height/2-300,this.BaseComment.gp_moveArr.x=e.stageX-this.BaseComment.gp_moveArr.width/2,this.BaseComment.gp_moveArr.y=e.stageY-100-this.BaseComment.gp_moveArr.height/2,this.num_FuYunX>0&&this.num_FuYunY>0?(this.initX=Math.floor(this.num_FuYunX/this.numRectWidth),this.initY=Math.floor(this.num_FuYunY/this.numRectWidth),this.BaseComment.gp_yuPan.x=this.initX*this.numRectWidth,this.BaseComment.gp_yuPan.y=this.initY*this.numRectWidth,this.BaseComment.gp_yuPan.x+this.BaseComment.gp_yuPan.width<=580&&this.BaseComment.gp_yuPan.y+this.BaseComment.gp_yuPan.height<=580&&this.onCheckCanLay(this.onMomentType,this.initY,this.initX)?this.BaseComment.gp_yuPan.visible=!0:this.BaseComment.gp_yuPan.visible=!1):this.BaseComment.gp_yuPan.visible=!1)},t.prototype.onCheckCanLay=function(e,t,i){if(0==e){if(0!=this.RectBoardArr[t][i])return!1}else if(0>e){for(var n=0;-1*e+1>n;++n)if(0!=this.RectBoardArr[t][i+n])return!1}else if(e>0&&5>e){for(var n=0;e+1>n;++n)if(0!=this.RectBoardArr[t+n][i])return!1}else for(var o=this.BaseComment["ArrBlock_"+e].length,n=0;o>n;++n)for(var s=0;o>s;++s)if(1==this.BaseComment["ArrBlock_"+e][n][s]&&0!=this.RectBoardArr[t+n][i+s])return!1;return!0},t.prototype.onEnd=function(e){var t=this;if(0!=this.numChange){var i=this.numChange-1;1==this.BaseComment.gp_yuPan.visible&&(this.onCheckCanLay(this.onMomentType,this.initY,this.initX)||(this.BaseComment.gp_yuPan.visible=!1)),0==this.BaseComment.gp_yuPan.visible?(this.BaseComment.gp_moveArr.removeChildren(),egret.Tween.get(this.dict_move.move).to({scaleX:1,scaleY:1,x:this.Arr_location[i][0],y:this.Arr_location[i][1]},250).call(function(){}),this.onGameTip(5)):(this.isAddBlocking=!0,this.numTime=20,this.BaseComment.lb_time.text="20s",this.BaseComment.img_time.width=560,this.dict_move.move.x=this.Arr_location[i][0],this.dict_move.move.y=this.Arr_location[i][1],this.dict_move.move.scaleX=this.dict_move.move.scaleY=1,this["isLayoutButton_"+this.numChange]=!0,this.BaseComment["gp_add"+this.numChange].removeChildren(),egret.Tween.get(this.BaseComment.gp_moveArr).to({x:this.BaseComment.gp_yuPan.x+30,y:this.BaseComment.gp_yuPan.y+300},100).call(function(){t.isAddBlocking=!1,t.onAddBlockOutToMap(t.onMomentType,t.initY,t.initX),t.BaseComment.gp_moveArr.removeChildren(),t.BaseComment.gp_yuPan.visible=!1,t.isLayoutButton_1&&t.isLayoutButton_2&&t.isLayoutButton_3&&t.onReSetButton(1)})),this.BaseComment.gp_yuPan.removeChildren(),this.dict_move.move={},this.numChange=0}},t.prototype.onSetRectMove=function(e){if(this.BaseComment.gp_moveArr.removeChildren(),this.BaseComment.gp_yuPan.removeChildren(),0==e){var i=new eui.Image;i.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_moveArr.addChild(i),i.width=i.height=this.numRectWidth;var n=new eui.Image;n.source="img_block_ying_png",this.BaseComment.gp_yuPan.addChild(n),n.width=n.height=this.numRectWidth}else if(0>e)for(var o=0;-1*e+1>o;++o){var i=new eui.Image;i.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_moveArr.addChild(i),i.width=i.height=this.numRectWidth,i.x=o*this.numRectWidth;var n=new eui.Image;n.source="img_block_ying_png",this.BaseComment.gp_yuPan.addChild(n),n.width=n.height=this.numRectWidth,n.x=o*this.numRectWidth}else if(e>0&&5>e)for(var o=0;e+1>o;++o){var i=new eui.Image;i.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_moveArr.addChild(i),i.width=i.height=this.numRectWidth,i.y=o*this.numRectWidth;var n=new eui.Image;n.source="img_block_ying_png",this.BaseComment.gp_yuPan.addChild(n),n.width=n.height=this.numRectWidth,n.y=o*this.numRectWidth}else for(var s=this.BaseComment["ArrBlock_"+e].length,o=0;s>o;++o)for(var a=0;s>a;++a)if(1==this.BaseComment["ArrBlock_"+e][a][o]){var i=new eui.Image;i.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_moveArr.addChild(i),i.width=i.height=this.numRectWidth,i.x=o*this.numRectWidth,i.y=a*this.numRectWidth,console.log("添加物块",i.x,i.y,this.BaseComment["ArrBlock_"+e][o][a]);var n=new eui.Image;n.source="img_block_ying_png",this.BaseComment.gp_yuPan.addChild(n),n.width=n.height=this.numRectWidth,n.x=o*this.numRectWidth,n.y=a*this.numRectWidth}},t.prototype.dispose=function(){e.prototype.dispose.call(this),App.TimerManager.remove(this.onTimerUpdate,this),App.TimerManager.remove(this.onAiAttack,this)},t.prototype.onTimerUpdate=function(){var e=this;if(this.isGameOver)return void App.TimerManager.remove(this.onTimerUpdate,this);if(this.numTime--,this.BaseComment.lb_time.text=this.numTime+"s",this.BaseComment.img_time.width=28*this.numTime,0==this.numTime){var t="timeOver_mp3";if(App.SoundManager.playEffect(t),this.numSelfLife-=100,this.numSelfLife>0?(this.numTime=20,this.BaseComment.lb_time.text=this.numTime+"s",this.BaseComment.img_time.width=560,this.isAddBlocking?egret.Tween.get(this).to({alpha:1},100).call(function(){e.onAddIron()}):this.onAddIron(),this.onGameTip(1)):this.onGameTip(8),!DataCenter.instance.room.IsAI){var t="EnumyReduceHeart";App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,t)}this.onSetHeartSelf()}},t.prototype.onAiAttack=function(){return this.isGameOver?void App.TimerManager.remove(this.onAiAttack,this):void this.onAttackSelf(2)},t.prototype.onAttackSelf=function(e){var t=this,i=e,n=this.numSelfLife%100/10;this.numSelfLife-=10*i,this.onScoreHitSelf(i),this.onSetbloodSelf(),0!=n&&i>=n&&(this.onSetHeartSelf(),this.numSelfLife>0?(this.onGameTip(2),this.isAddBlocking?egret.Tween.get(this).to({alpha:1},100).call(function(){t.onAddIron()}):this.onAddIron()):this.onGameTip(8))},t.prototype.onAddBlockOutToMap=function(e,i,n){var o="layoutBlock_mp3";if(App.SoundManager.playEffect(o),0==e)if(this.RectBoardArr[i][n]=1,null==this.dict_Block[this.initX+"_"+this.initY]){var s=new eui.Image;s.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_addGameRect.addChild(s),s.width=s.height=this.numRectWidth,s.x=this.initX*this.numRectWidth,s.y=this.initY*this.numRectWidth,this.dict_Block[this.initX+"_"+this.initY]=s}else this.dict_Block[this.initX+"_"+this.initY].visible=!0;else if(0>e)for(var a=0;-1*e+1>a;++a)if(this.RectBoardArr[i][n+a]=1,null==this.dict_Block[a+this.initX+"_"+this.initY]){var s=new eui.Image;s.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_addGameRect.addChild(s),s.width=s.height=this.numRectWidth,s.x=(a+this.initX)*this.numRectWidth,s.y=this.initY*this.numRectWidth,this.dict_Block[a+this.initX+"_"+this.initY]=s}else this.dict_Block[a+this.initX+"_"+this.initY].visible=!0;else if(e>0&&5>e)for(var a=0;e+1>a;++a)if(this.RectBoardArr[i+a][n]=1,null==this.dict_Block[this.initX+"_"+(this.initY+a)]){var s=new eui.Image;s.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_addGameRect.addChild(s),s.width=s.height=this.numRectWidth,s.x=this.initX*this.numRectWidth,s.y=(a+this.initY)*this.numRectWidth,this.dict_Block[this.initX+"_"+(this.initY+a)]=s}else this.dict_Block[this.initX+"_"+(this.initY+a)].visible=!0;else for(var m=this.BaseComment["ArrBlock_"+e].length,a=0;m>a;++a)for(var h=0;m>h;++h)if(1==this.BaseComment["ArrBlock_"+e][a][h])if(this.RectBoardArr[i+a][n+h]=1,null==this.dict_Block[h+n+"_"+(i+a)]){var s=new eui.Image;s.source="game_block"+t.GAME_BLOCK_CLOUR+"_png",this.BaseComment.gp_addGameRect.addChild(s),s.width=s.height=this.numRectWidth,s.x=(h+n)*this.numRectWidth,s.y=(i+a)*this.numRectWidth,this.dict_Block[h+n+"_"+(i+a)]=s}else this.dict_Block[h+n+"_"+(i+a)].visible=!0;if(this.onSelectMapArr(),!this.onJudceAllRect()&&(this.onGameTip(7),console.log("无路可走，你输了！"),this.numSelfLife=0,this.onSetHeartSelf(),!DataCenter.instance.room.IsAI)){var o="gameEnumyFail";App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,o)}},t.prototype.onRemovedBlockOutToMap=function(){},t.prototype.onAddIron=function(){this.Can_DotArr=[];for(var e=0;10>e;++e)for(var t=0;10>t;t++)if(0==this.RectBoardArr[e][t]){var i=[e,t];this.Can_DotArr.push(i)}var n=App.RandomUtils.limitInteger(0,this.Can_DotArr.length-1),o=this.Can_DotArr[n][1],s=this.Can_DotArr[n][0];this.RectBoardArr[s][o]=2;var a=new eui.Image;a.source="img_tikuai_png",this.BaseComment.gp_addGameRect.addChild(a),a.width=a.height=this.numRectWidth,a.x=o*this.numRectWidth-1,a.y=s*this.numRectWidth-1,console.log("添加铁块：",n,"輸出",this.RectBoardArr,"DFSADF:",this.Can_DotArr)},t.prototype.onReSetButton=function(e){void 0===e&&(e=0);var t=this.ArrNeedRandomChoose[App.RandomUtils.limitInteger(0,this.ArrNeedRandomChoose.length-1)],i=this.ArrNeedRandomChoose[App.RandomUtils.limitInteger(0,this.ArrNeedRandomChoose.length-1)],n=this.ArrNeedRandomChoose[App.RandomUtils.limitInteger(0,this.ArrNeedRandomChoose.length-1)];if(console.log(t,i,n),this.num_name_1=t,this.num_name_2=i,this.num_name_3=n,0!=e&&!this.onJudce(t)&&!this.onJudce(i)&&!this.onJudce(n))return void this.onReSetButton(1);var o="setButton_mp3";App.SoundManager.playEffect(o),this.BaseComment.onSetButton(t,1),this.BaseComment.onSetButton(i,2),this.BaseComment.onSetButton(n,3),this.isLayoutButton_1=this.isLayoutButton_2=this.isLayoutButton_3=!1},t.prototype.onJudce=function(e){if(0==e)return!0;if(0>e){for(var t=-1*e+1,i="",n=0;t>n;++n)i+="0";console.log("字符串横：",t,i);for(var n=0;10>n;n++)if(-1!=this["str_H"+n].indexOf(i))return!0}else if(e>0&&5>e){for(var t=e+1,i="",n=0;t>n;++n)i+="0";console.log("字符串竖：",t,i);for(var n=0;10>n;n++)if(-1!=this["str_V"+n].indexOf(i))return!0}else for(var o=this.BaseComment["ArrBlock_"+e].length,s=0;11-o>s;s++)for(var a=0;11-o>a;a++){for(var m=!0,n=0;o>n;++n)for(var h=0;o>h;++h)1==this.BaseComment["ArrBlock_"+e][n][h]&&0!=this.RectBoardArr[s+n][a+h]&&(m=!1);if(m)return console.log("DD:",s,a),!0}return!1},t.prototype.onSelectMapArr=function(){this.num_ReduceToEnumy=0;for(var e=0;10>e;e++){this["str_H"+e]="",this["str_V"+e]="";for(var t=0;10>t;++t)this["str_H"+e]+=this.RectBoardArr[e][t],this["str_V"+e]+=this.RectBoardArr[t][e];console.log("横:",this["str_H"+e]),console.log("竖:",this["str_V"+e])}for(var e=0;10>e;++e)if("1111111111"==this["str_H"+e]){this.num_ReduceToEnumy++,this["str_H"+e]="0000000000",this.BaseComment.onPlayBoomEffect(e);for(var t=0;10>t;++t)this.RectBoardArr[e][t]=0,null!=this.dict_Block[t+"_"+e]?this.dict_Block[t+"_"+e].visible=!1:console.log("空：",t+"_"+e)}for(var e=0;10>e;++e)if("1111111111"==this["str_V"+e]){this.num_ReduceToEnumy++,this["str_V"+e]="0000000000",this.BaseComment.onPlayBoomEffect(e,!1);for(var t=0;10>t;++t)this.RectBoardArr[t][e]=0,null!=this.dict_Block[e+"_"+t]?this.dict_Block[e+"_"+t].visible=!1:console.log("空：",e+"_"+t)}if(this.num_ReduceToEnumy>0){var i=this.numEnumyLife;if(this.numEnumyLife-=10*this.num_ReduceToEnumy,this.onScoreHitEnumy(this.num_ReduceToEnumy),this.onSetbloodEnumy(),i%100!=0){var n=i%100/10;this.num_ReduceToEnumy>=n&&(this.onSetHeartEnumy(),this.numEnumyLife>0?this.onGameTip(6):this.onGameTip(4))}if(!DataCenter.instance.room.IsAI){var o="sendOperation|"+this.num_ReduceToEnumy;App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,o)}}},t.prototype.onJudceAllRect=function(){return console.log("DDDD:",this.num_name_1,this.num_name_2,this.num_name_3),this.isLayoutButton_1&&this.isLayoutButton_2&&this.isLayoutButton_3?!0:0==this.isLayoutButton_1&&this.onJudce(this.num_name_1)?!0:0==this.isLayoutButton_2&&this.onJudce(this.num_name_2)?!0:0==this.isLayoutButton_3&&this.onJudce(this.num_name_3)?!0:!1},t.prototype.onSetbloodSelf=function(){this.numSelfLife<=0&&(this.numSelfLife=0,console.log("自己血量为零，输了！")),this.BaseComment.img_red1.left=13*(10-this.numSelfLife%100/10),this.numSelfLife>0&&this.numSelfLife%100==0&&(this.BaseComment.img_red1.left=0)},t.prototype.onSetbloodEnumy=function(){this.numEnumyLife<=0&&(this.numEnumyLife=0,console.log("对方血量为零，赢了！")),this.BaseComment.img_red2.right=13*(10-this.numEnumyLife%100/10),this.numEnumyLife>0&&this.numEnumyLife%100==0&&(this.BaseComment.img_red2.right=0)},t.prototype.onScoreHitSelf=function(e){var t=this;this.BaseComment.lb_reduce1.scaleX=this.BaseComment.lb_reduce1.scaleY=0,this.BaseComment.lb_reduce1.text="-"+10*e,egret.Tween.get(this.BaseComment.lb_reduce1).to({scaleX:1,scaleY:1},500).call(function(){t.BaseComment.lb_reduce1.text=""})},t.prototype.onScoreHitEnumy=function(e){var t=this,i="clearBlock_mp3";App.SoundManager.playEffect(i),this.BaseComment.lb_reduce2.scaleX=this.BaseComment.lb_reduce2.scaleY=0,this.BaseComment.lb_reduce2.text="-"+10*e,egret.Tween.get(this.BaseComment.lb_reduce2).to({scaleX:1,scaleY:1},500).call(function(){t.BaseComment.lb_reduce2.text=""})},t.prototype.onSetHeartSelf=function(){this.numSelfLife>0?this.BaseComment.lb_life1.text=""+Math.ceil(this.numSelfLife/100):(this.BaseComment.lb_life1.text="0",this.BaseComment.img_red1.visible=!1,this.isGameOver=!0,this.touchEnabled=!1,this.touchChildren=!1,this.onGameResultCartoon(2))},t.prototype.onSetHeartEnumy=function(){this.numEnumyLife>0?this.BaseComment.lb_life2.text=""+Math.ceil(this.numEnumyLife/100):(this.BaseComment.lb_life2.text="0",this.BaseComment.img_red2.visible=!1,this.isGameOver=!0,this.touchEnabled=!1,this.touchChildren=!1,this.onGameResultCartoon(1))},t.prototype.onGameTip=function(e){var t=this,i=new eui.Image;this.BaseComment.gp_game.addChild(i),i.source="img_BlocktipsBg_png",i.horizontalCenter=0,i.verticalCenter=0,i.touchEnabled=!1,i.scaleX=i.scaleY=0;var n=new eui.Image;this.BaseComment.gp_game.addChild(n),n.source="lb_block"+e+"_png",n.horizontalCenter=0,n.verticalCenter=0,n.touchEnabled=!1,n.scaleX=n.scaleY=0,egret.Tween.get(i).to({scaleX:1,scaleY:1},300).wait(750).call(function(){egret.Tween.removeTweens(i),t.BaseComment.gp_game.removeChild(i)}),egret.Tween.get(n).to({scaleX:1,scaleY:1},300).wait(750).call(function(){egret.Tween.removeTweens(n),t.BaseComment.gp_game.removeChild(n)})},t.prototype.onGameResultCartoon=function(e){var t=this;if(1==e){var i="block_win_wav";App.SoundManager.playEffect(i)}else{var i="blockLose_mp3";App.SoundManager.playEffect(i)}this.BaseComment.img_result.source="img_blockResult"+e+"_png",egret.Tween.get(this.BaseComment.img_result).wait(1e3).call(function(){t.BaseComment.rec_result.visible=!0}).to({scaleX:1,scaleY:1},500).wait(1500).call(function(){t.BaseComment.img_result.visible=!1,t.BaseComment.rec_result.visible=!1,1==e?t.gameOver(3):t.gameOver(1)})},t.prototype.gameOver=function(e){App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,e)},t.GAME_WIDTH=640,t.GAME_HEIGHT=1136,t.GAME_BLOCK_CLOUR=1,t}(State);__reflect(GameBlockoutView.prototype,"GameBlockoutView");