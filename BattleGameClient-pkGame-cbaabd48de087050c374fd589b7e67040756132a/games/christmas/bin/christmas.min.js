var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);a.prototype=t.prototype,e.prototype=new a},GameChristmasBall=function(e){function t(){var t=e.call(this)||this;return t.directionLOrR=0,t.directionPosL1_X=0,t.directionPosL1_Y=0,t.directionPosL2_X=0,t.directionPosL2_Y=0,t.directionPosL3_X=0,t.directionPosL3_Y=0,t.directionPosR1_X=0,t.directionPosR1_Y=0,t.directionPosR2_X=0,t.directionPosR2_Y=0,t.directionPosR3_X=0,t.directionPosR3_Y=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"factorOne",{get:function(){return 0},set:function(e){return 1==this.directionLOrR?(this.x=(1-e)*(1-e)*this.directionPosL1_X+2*e*(1-e)*this.directionPosL2_X+e*e*this.directionPosL3_X,void(this.y=(1-e)*(1-e)*this.directionPosL1_Y+2*e*(1-e)*this.directionPosL2_Y+e*e*this.directionPosL3_Y)):(this.x=(1-e)*(1-e)*this.directionPosR1_X+2*e*(1-e)*this.directionPosR2_X+e*e*this.directionPosR3_X,void(this.y=(1-e)*(1-e)*this.directionPosR1_Y+2*e*(1-e)*this.directionPosR2_Y+e*e*this.directionPosR3_Y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"factorTwo",{get:function(){return 0},set:function(e){return 1==this.directionLOrR?(this.x=(1-e)*(1-e)*this.directionPosL3_X+2*e*(1-e)*(this.directionPosL3_X-100)+e*e*Math.ceil(this.directionPosL3_X-100-100*Math.random()),void(this.y=(1-e)*(1-e)*this.directionPosL3_Y+2*e*(1-e)*(this.directionPosL3_Y+280)+e*e*Math.ceil(this.directionPosL3_Y+300+30*Math.random()))):(this.x=(1-e)*(1-e)*this.directionPosR3_X+2*e*(1-e)*(this.directionPosR3_X+80)+e*e*Math.ceil(this.directionPosR3_X+100+100*Math.random()),void(this.y=(1-e)*(1-e)*this.directionPosR3_Y+2*e*(1-e)*(this.directionPosR3_Y+280)+e*e*Math.ceil(this.directionPosR3_Y+300+30*Math.random())))},enumerable:!0,configurable:!0}),t}(egret.Bitmap);__reflect(GameChristmasBall.prototype,"GameChristmasBall");var GameChristmasMainView=function(e){function t(){var t=e.call(this,GameChristmasMainSkin)||this;return t.daodanActionTimeout=0,t.oneselfNum=1,t.gameStartBool=!1,t.gameLastTime=60,t.yujingIsPlay=!1,t.xiaoIsPlay=!1,t.nuIsPlay=!1,t.santaDbIndex=0,t.currAmiIndex=0,t.oneselfBeFound=!1,t.otherBeFound=!1,t.resultPageFun=function(){t.resultGroup.visible=!0,t.resultGroup.scaleX=t.resultGroup.scaleY=.3,egret.Tween.get(t.resultGroup).to({scaleX:1,scaleY:1},200,egret.Ease.bounceOut).wait(1600).call(function(){t.popup("GameResult",null)})},t.gameChristmasModel=new GameChristmasModel,t.gameChristmasSantaModel=new GameChristmasSantaModel,t.santaDbIndex=0,t}return __extends(t,e),t.prototype.init=function(){var a=this;e.prototype.init.call(this);var s=App.GameWidth/t.GAME_WIDTH,i=App.GameHeight/t.GAME_HEIGHT,o=Math.min(s,i);if(this.containerGroup.scaleX=this.containerGroup.scaleY=o,this.containerGroup.x=.5*(App.GameWidth-t.GAME_WIDTH*o),this.containerGroup.y=.5*(App.GameHeight-t.GAME_HEIGHT*o),App.SoundManager.stopBg(),this.christmasEffect=new SoundEffects,this.christmasEffect.setVolume(1),this.christmasCommonEffect=new SoundEffects,this.christmasCommonEffect.setVolume(1),egret.lifecycle.onPause=function(){a.christmasEffect&&(a.christmasEffect.setVolume(0),App.SoundManager.setBgOn(!1),App.SoundManager.setEffectOn(!1)),a.christmasCommonEffect&&a.christmasCommonEffect.setVolume(0)},egret.lifecycle.onResume=function(){a.christmasEffect&&(a.christmasEffect.setVolume(1),App.SoundManager.setBgOn(!0),App.SoundManager.setEffectOn(!0)),a.christmasCommonEffect&&a.christmasCommonEffect.setVolume(1)},this.btnsVisibleOrTouchEnabled(!0,!1),this.goBackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goBackBtnHandler,this),this.daodanBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.daodanBtnHandler,this),this.chaofengBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chaofengBtnHandler,this),App.IsXiaoMi||App.IsWanba)this.goBackBtn.visible=!1,this.goBackBtn.touchEnabled=!1,this.myHeadImage&&(this.myHeadImage.dispose(),this.myHeadImage=null),this.myHeadImage=new RoleHeadImage(DataCenter.instance.user.imgUrl),this.otherHeadImage&&(this.otherHeadImage.dispose(),this.otherHeadImage=null),this.otherHeadImage=new RoleHeadImage(DataCenter.instance.room.player.imgUrl);else{this.playerAvatarGroup1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playerAvatarGroup1Handler,this),this.playerAvatarGroup2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playerAvatarGroup2Handler,this);var n=DataCenter.instance.user;this.myAvatar=new RoleAvatar(n.curAvatarType,n.imgUrl,"toukuang"),this.myAvatar.armature.play("jing"),this.myAvatar.armature.scaleX=this.myAvatar.armature.scaleY=.5;var r=DataCenter.instance.room.player;this.otherAvatar=new RoleAvatar(r.curAvatarType,r.imgUrl,"toukuang"),this.otherAvatar.armature.play("jing"),this.otherAvatar.armature.scaleX=this.otherAvatar.armature.scaleY=.5}this.resultGroup.visible=!1},t.prototype.show=function(){e.prototype.show.call(this),this.gameStartBool=!1,this.addAllDb(),this.snowParticle(),DataCenter.instance.room.IsAI&&(this.gameRobotAi=new GameChristmasSantaAI(this,2),GameChristmasSantaAI.robotAiLv=App.CurrGameAiLevel,this.oneselfNum=1,this.youImg.x=130,this.playerAvatarAdd())},t.prototype.snowParticle=function(){var e=RES.getRes("xuehua_png"),t=RES.getRes("xuehua_json");this.particleXueHua=new particle.GravityParticleSystem(e,t),this.snowContainerGroup.addChild(this.particleXueHua),this.particleXueHua.start()},t.prototype.playerAvatarAdd=function(){1==this.oneselfNum?App.IsXiaoMi?(this.playerAvatarGroup1.addChild(this.myHeadImage),this.myHeadImage.scaleX=this.myHeadImage.scaleY=.8,this.myHeadImage.x=0,this.myHeadImage.y=0,this.playerAvatarGroup2.addChild(this.otherHeadImage),this.otherHeadImage.scaleX=this.otherHeadImage.scaleY=.8,this.otherHeadImage.x=0,this.otherHeadImage.y=0):(this.playerAvatarGroup1.addChild(this.myAvatar.armature),this.myAvatar.armature.x=this.playerAvatarGroup1.width/2,this.myAvatar.armature.y=.8*this.playerAvatarGroup1.height,this.playerAvatarGroup2.addChild(this.otherAvatar.armature),this.otherAvatar.armature.x=this.playerAvatarGroup2.width/2,this.otherAvatar.armature.y=.8*this.playerAvatarGroup2.height):App.IsXiaoMi?(this.playerAvatarGroup1.addChild(this.otherHeadImage),this.otherHeadImage.scaleX=this.otherHeadImage.scaleY=.8,this.otherHeadImage.x=0,this.otherHeadImage.y=0,this.playerAvatarGroup2.addChild(this.myHeadImage),this.myHeadImage.scaleX=this.myHeadImage.scaleY=.8,this.myHeadImage.x=0,this.myHeadImage.y=0):(this.playerAvatarGroup1.addChild(this.otherAvatar.armature),this.otherAvatar.armature.x=this.playerAvatarGroup1.width/2,this.otherAvatar.armature.y=.8*this.playerAvatarGroup1.height,this.playerAvatarGroup2.addChild(this.myAvatar.armature),this.myAvatar.armature.x=this.playerAvatarGroup2.width/2,this.myAvatar.armature.y=.8*this.playerAvatarGroup2.height),this.gameStart()},t.prototype.gameStart=function(){this.oneSelfTween(),this.clearTimeoutReadyId=egret.setTimeout(this.readyGoFun,this,1200)},t.prototype.readyGoFun=function(){var e=this;this.readyIMG=new GameReady(function(){App.SoundManager.playBg("christmas_bg_mp3"),e.gameStartBool=!0,egret.Tween.removeTweens(e.youImg),e.youImg.visible=!1,e.startMatchingTime(),DataCenter.instance.room.IsAI?(e.randomPlaySantaAction(),e.gameRobotAi&&e.gameRobotAi.randomPlayRobotAction()):1==e.oneselfNum&&e.randomPlaySantaAction()}),this.readyIMG.x=300,this.readyIMG.y=App.GameHeight/2,this.addChild(this.readyIMG),this.readyIMG.play()},t.prototype.addMesssgaeListener=function(){e.prototype.addMesssgaeListener.call(this),App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this),App.MessageCenter.addListener(EventMessage.ReceiveGameResultS2C,this.onGameResult,this),App.MessageCenter.addListener(EventMessage.GameLeave,this.onGameleave,this),DataCenter.instance.room.IsAI||(DataCenter.instance.room.player.id>DataCenter.instance.user.id?App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.GET_HOST_PC+"|"+DataCenter.instance.room.player.id,2):App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.GET_HOST_PC+"|"+DataCenter.instance.user.id,2))},t.prototype.onGameEvent=function(e){var t=e.event.split("|");switch(t[0]){case GameChristmasModel.GET_HOST_PC:if(DataCenter.instance.room.IsAI)return;t[1]==DataCenter.instance.user.id?(this.oneselfNum=1,this.youImg.x=130):(this.oneselfNum=2,this.youImg.x=App.GameWidth-130),this.playerAvatarAdd();break;case GameChristmasModel.EVENT_THROW_SNOWBALL:if(e.userId==DataCenter.instance.user.id)this.gameChristmasModel.myScore++,this["playerScoreLab"+this.oneselfNum].text=this.gameChristmasModel.myScore+"",this.arriveScore();else{if(1==this.oneselfNum){if(this.gameChristmasModel.otherScore++,this.playerScoreLab2.text=this.gameChristmasModel.otherScore+"",this.arriveScore(),this.nuIsPlay||this.xiaoIsPlay)return;return void this.playerThrowSnowBall(2)}if(this.gameChristmasModel.otherScore++,this.playerScoreLab1.text=this.gameChristmasModel.otherScore+"",this.arriveScore(),this.nuIsPlay||this.xiaoIsPlay)return;this.playerThrowSnowBall(1)}break;case GameChristmasModel.EVENT_MAKEFUN:e.userId==DataCenter.instance.user.id?this.makeFunOtherPlayer():(this.gameChristmasModel.myScore-=2,this.gameChristmasModel.myScore<=0&&(this.gameChristmasModel.myScore=0),this["playerScoreLab"+this.oneselfNum].text=this.gameChristmasModel.myScore+"",this.playerMakeFun(2),1==this.oneselfNum?this.zongseluAmiPlay(GameChristmasModel.STATUS_MAKEFUN,1):this.ziseluAmiPlay(GameChristmasModel.STATUS_MAKEFUN,1));break;case GameChristmasModel.EVENT_BE_FOUND:egret.clearTimeout(this.clearTimeoutHideBtnsId),egret.clearTimeout(this.clearTimeoutDaodanBtnYanChi),this.xiaoIsPlay=!1,this.santaPlayNuAmiFun(),e.userId==DataCenter.instance.user.id?1==this.oneselfNum?this.ziseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0):this.zongseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0):(this.otherBeFound=!0,this.oneselfBeFound?(this.zongseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),this.ziseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0)):(this.btnsVisibleOrTouchEnabled(!1,!0),1==this.oneselfNum?this.zongseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0):this.ziseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0)));break;case GameChristmasSantaModel.STATUS_YANCONG_YUJING:this.yancongYujingFun();break;case GameChristmasSantaModel.STATUS_MEN_YUJING:this.fangJianMenYujingFun();break;case GameChristmasSantaModel.STATUS_LIHE_YUJING:this.liWuHeYujingFun();break;case GameChristmasModel.GAMEOVER_AND_STEPSCORE:this.clearData(),e.userId==DataCenter.instance.user.id?(this.gameChristmasModel.myScore=parseInt(t[1]),this.gameChristmasModel.otherScore=parseInt(t[2]),1==this.oneselfNum?(this.playerScoreLab1.text=t[1],this.playerScoreLab2.text=t[2]):(this.playerScoreLab1.text=t[2],this.playerScoreLab2.text=t[1])):(this.gameChristmasModel.myScore=parseInt(t[2]),this.gameChristmasModel.otherScore=parseInt(t[1]),1==this.oneselfNum?(this.playerScoreLab1.text=t[2],this.playerScoreLab2.text=t[1]):(this.playerScoreLab1.text=t[1],this.playerScoreLab2.text=t[2])),1==this.oneselfNum&&(this.gameChristmasModel.myScore>=this.gameChristmasModel.otherScore?this.sendResult(3):this.sendResult(1),App.MessageCenter.removeListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this))}},t.prototype.yancongYujingFun=function(){return this.yujingIsPlay=!0,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi.santaComeoutThrowBall()),this.santaDbIndex=1,this.santaDbDisplay=this.yancongDb,10*Math.random()<5?void this.onYuJingTween(this.santaDbIndex,1600):void this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_YANCONG_YUJING,!0)},t.prototype.fangJianMenYujingFun=function(){this.yujingIsPlay=!0,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi.santaComeoutThrowBall()),this.santaDbIndex=2,this.santaDbDisplay=this.fangjianmenDb,this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_MEN_YUJING,!0)},t.prototype.liWuHeYujingFun=function(){return this.yujingIsPlay=!0,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi.santaComeoutThrowBall()),this.santaDbIndex=3,this.santaDbDisplay=this.liwuheDb,10*Math.random()<5?void this.onYuJingTween(this.santaDbIndex,1300):void this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_LIHE_YUJING,!0)},t.prototype.santaPlayNuAmiFun=function(){this.christmasCommonEffect&&this.christmasCommonEffect.play("christmas_santaCurse_mp3"),1==this.santaDbIndex?this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_YANCONG_NU,!0):2==this.santaDbIndex?this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_MEN_NU,!0):3==this.santaDbIndex&&this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_LIHE_NU,!0)},t.prototype.btnsVisibleOrTouchEnabled=function(e,t){this.daodanBtn.visible=e,this.daodanBtn.touchEnabled=e,this.chaofengBtn.visible=t,this.chaofengBtn.touchEnabled=t},t.prototype.makeFunOtherPlayer=function(){this.gameChristmasModel.otherScore-=2,this.gameChristmasModel.otherScore<=0&&(this.gameChristmasModel.otherScore=0),1==this.oneselfNum?(this.playerScoreLab2.text=this.gameChristmasModel.otherScore+"",this.ziseluAmiPlay(GameChristmasModel.STATUS_MAKEFUN,1)):(this.playerScoreLab1.text=this.gameChristmasModel.otherScore+"",this.zongseluAmiPlay(GameChristmasModel.STATUS_MAKEFUN,1))},t.prototype.setScoreView=function(e,t){switch(App.Language){case LanguageType.Ch:this.redScoreLab.text="红方"+e+"分",this.blueScoreLab.text="蓝方"+t+"分";break;case LanguageType.En:this.redScoreLab.text="Red "+e,this.blueScoreLab.text="Blue"+t}},t.prototype.resultViewState=function(){var e=DataCenter.instance.room.gameResult;e.winUserId==DataCenter.instance.user.id?(this.gameLastTime>0&&this.gameChristmasModel.myScore!=GameChristmasModel.resultScore&&(this.gameChristmasModel.myScore=GameChristmasModel.resultScore),1==this.oneselfNum?(this.blueWinFlagImg.visible=!0,this.blueScoreLab.textColor=16777215,this.blueScoreBg.source="blueBg_png",this.resultBuleLuImg.source="blueLuWin_png",this.redWinFlagImg.visible=!1,this.redScoreLab.textColor=7303023,this.redScoreBg.source="loseBg_png",this.resultRedLuImg.source="redLuLose_png",this.setScoreView(this.gameChristmasModel.otherScore,this.gameChristmasModel.myScore)):(this.blueWinFlagImg.visible=!1,this.blueScoreLab.textColor=7303023,this.blueScoreBg.source="loseBg_png",this.resultBuleLuImg.source="blueLuLose_png",this.redWinFlagImg.visible=!0,this.redScoreLab.textColor=16777215,this.redScoreBg.source="redBg_png",this.resultRedLuImg.source="redLuWin_png",this.setScoreView(this.gameChristmasModel.myScore,this.gameChristmasModel.otherScore))):(this.gameLastTime>0&&this.gameChristmasModel.otherScore!=GameChristmasModel.resultScore&&(this.gameChristmasModel.otherScore=GameChristmasModel.resultScore),1==this.oneselfNum?(this.blueWinFlagImg.visible=!1,this.blueScoreLab.textColor=7303023,this.blueScoreBg.source="loseBg_png",this.resultBuleLuImg.source="blueLuLose_png",this.redWinFlagImg.visible=!0,this.redScoreLab.textColor=16777215,this.redScoreBg.source="redBg_png",this.resultRedLuImg.source="redLuWin_png",this.setScoreView(this.gameChristmasModel.otherScore,this.gameChristmasModel.myScore)):(this.blueWinFlagImg.visible=!0,this.blueScoreLab.textColor=16777215,this.blueScoreBg.source="blueBg_png",this.resultBuleLuImg.source="blueLuWin_png",this.redWinFlagImg.visible=!1,this.redScoreLab.textColor=7303023,this.redScoreBg.source="loseBg_png",this.resultRedLuImg.source="redLuLose_png",this.setScoreView(this.gameChristmasModel.myScore,this.gameChristmasModel.otherScore)))},t.prototype.arriveScore=function(){return DataCenter.instance.room.IsAI?(this.gameChristmasModel.myScore>=GameChristmasModel.resultScore&&(this.clearData(),this.sendResult(3)),void(this.gameChristmasModel.otherScore>=GameChristmasModel.resultScore&&(this.clearData(),this.sendResult(1)))):void(this.gameChristmasModel.myScore>=GameChristmasModel.resultScore?(this.clearData(),this.gameChristmasModel.myScore=GameChristmasModel.resultScore,App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.GAMEOVER_AND_STEPSCORE+"|"+this.gameChristmasModel.myScore+"|"+this.gameChristmasModel.otherScore,1)):this.gameChristmasModel.otherScore>=GameChristmasModel.resultScore&&(this.clearData(),this.gameChristmasModel.otherScore=GameChristmasModel.resultScore,App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.GAMEOVER_AND_STEPSCORE+"|"+this.gameChristmasModel.myScore+"|"+this.gameChristmasModel.otherScore,1)))},t.prototype.onGameResult=function(e){DataCenter.instance.room.gameResult=e,this.resultViewState(),this.popup("GameResult",this.resultPageFun)},t.prototype.onGameleave=function(){this.clearData()},t.prototype.clearData=function(){this.particleXueHua.stop(),DataCenter.instance.room.IsAI&&this.gameRobotAi&&this.gameRobotAi.clearData(),this.readyIMG&&this.readyIMG.dispose(),egret.clearInterval(this.intervalIdKey),egret.clearTimeout(this.clearTimeoutHideBtnsId),egret.clearTimeout(this.clearTimeoutReadyId),App.TimerManager.remove(this.ontimerUpdate,this),this.daodanBtn.touchEnabled=!1,this.chaofengBtn.touchEnabled=!1,this.stopAllDbAmi(),egret.Tween.removeTweens(this.youImg),egret.Tween.removeTweens(this.renyingImg),egret.Tween.removeTweens(this.gantanhaoImg1),egret.Tween.removeTweens(this.gantanhaoImg2),egret.Tween.removeTweens(this.gantanhaoImg3),this.christmasEffect&&this.christmasEffect.setVolume(0),this.christmasCommonEffect&&this.christmasCommonEffect.setVolume(0),this.christmasEffect=null,this.christmasCommonEffect=null},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.myAvatar&&(this.myAvatar.dispose(),this.myAvatar=null),this.otherAvatar&&(this.otherAvatar.dispose(),this.otherAvatar=null),this.readyIMG&&this.readyIMG.dispose(),DataCenter.instance.room.IsAI||(App.MessageCenter.removeListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this),App.MessageCenter.removeListener(EventMessage.ReceiveGameResultS2C,this.onGameResult,this)),egret.clearInterval(this.intervalIdKey),egret.clearTimeout(this.clearTimeoutHideBtnsId),egret.clearTimeout(this.clearTimeoutReadyId),DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi=null),this.stopAllDbAmi(),egret.Tween.removeTweens(this.youImg),egret.Tween.removeTweens(this.renyingImg),egret.Tween.removeTweens(this.gantanhaoImg1),egret.Tween.removeTweens(this.gantanhaoImg2),egret.Tween.removeTweens(this.gantanhaoImg3),egret.Tween.removeTweens(this.resultGroup),ObjectPool.clearClass("GameChristmasBall"),ObjectPool.clearClass("GameChristmasScore"),this.yancongDbGroup.removeChildren(),this.menkuangDbGroup.removeChildren(),this.liwuheDbGroup.removeChildren(),this.ziseluGroup.removeChildren(),this.zongseluGroup.removeChildren(),this.resultGroup.visible=!1,this.oneselfBeFound=!1,this.otherBeFound=!1,this.christmasEffect&&this.christmasEffect.setVolume(0),this.christmasCommonEffect&&this.christmasCommonEffect.setVolume(0),this.christmasEffect=null,this.christmasCommonEffect=null},t.prototype.playerAvatarGroup1Handler=function(){this.christmasCommonEffect&&this.christmasCommonEffect.play("mouseClickSound_mp3");var e;e=1==this.oneselfNum?DataCenter.instance.user:DataCenter.instance.room.player,this.popup("GameCenterMyHomePage",{lastViewName:"IS_GAMEING",currPlayerData:e})},t.prototype.playerAvatarGroup2Handler=function(){this.christmasCommonEffect&&this.christmasCommonEffect.play("mouseClickSound_mp3");var e;e=1==this.oneselfNum?DataCenter.instance.room.player:DataCenter.instance.user,this.popup("GameCenterMyHomePage",{lastViewName:"IS_GAMEING",currPlayerData:e})},t.prototype.goBackBtnHandler=function(){this.popup("GameSureLeave")},t.prototype.ontimerUpdate=function(){if(this.gameLastTime>0)this.gameLastTime--,this.timesLab.text=this.gameLastTime+"",this.gameLastTime<4&&this.gameLastTime>0?this.christmasCommonEffect&&this.christmasCommonEffect.play("countDownSound_mp3"):0==this.gameLastTime&&this.christmasCommonEffect&&this.christmasCommonEffect.play("countDownSoundEnd_mp3");else{if(App.TimerManager.remove(this.ontimerUpdate,this),this.clearData(),this.gameChristmasModel.myScore==this.gameChristmasModel.otherScore&&this.gameChristmasModel.myScore++,DataCenter.instance.room.IsAI)return void(this.gameChristmasModel.myScore>=this.gameChristmasModel.otherScore?this.sendResult(3):this.sendResult(1));this.gameChristmasModel.myScore==this.gameChristmasModel.otherScore&&this.gameChristmasModel.myScore++,App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.GAMEOVER_AND_STEPSCORE+"|"+this.gameChristmasModel.myScore+"|"+this.gameChristmasModel.otherScore,1)}},t.prototype.sendResult=function(e){App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,e)},t.prototype.startMatchingTime=function(){this.gameLastTime=60,App.TimerManager.doTimer(1e3,0,this.ontimerUpdate,this)},t.prototype.oneSelfTween=function(){var e=this.youImg.y,t=this.youImg.y+60;this.youImg.x=this.youImg.x,this.youImg.visible=!0,egret.Tween.get(this.youImg,{loop:!0},egret.Ease.sineOut).to({scaleX:.7,scaleY:.7,x:this.youImg.x,y:t},400).to({scaleX:.8,scaleY:.8,x:this.youImg.x,y:e},400)},t.prototype.onYuJingTween=function(e,t){void 0===t&&(t=1e3);var a=this,s=this["gantanhaoImg"+e];s.visible=!0,this.shanShuoTween=egret.Tween.get(s,{loop:!0},egret.Ease.sineOut).to({visible:!1},200).to({visible:!0},200),egret.Tween.get(s).wait(t).call(function(){a.yujingIsPlay=!1,egret.Tween.removeTweens(s),s.visible=!1,a.santaPlayStatusXiaoFun()})},t.prototype.moveOne=function(e){egret.Tween.get(e).to({factorTwo:1},100).call(this.moveTwo.bind(this,e))},t.prototype.moveTwo=function(e){var t=this;egret.Tween.get(e).to({alpha:.2},1600).call(function(){t.snowContainerGroup.removeChild(e),ObjectPool.push(e)})},t.prototype.scoreTweenMove=function(e){var t=this;egret.Tween.get(e).wait(80).call(function(){t.snowContainerGroup.removeChild(e),ObjectPool.push(e)})},t.prototype.daodanBtnHandler=function(e){var t=this;if(this.gameStartBool)return this.daodanBtn.touchEnabled=!1,this.daodanActionTimeout=setTimeout(function(){t.daodanBtn.touchEnabled=!0,egret.clearTimeout(t.daodanActionTimeout)},80),this.playerThrowSnowBall(this.oneselfNum),this.xiaoIsPlay?(egret.clearTimeout(this.clearTimeoutHideBtnsId),this.christmasCommonEffect&&this.christmasCommonEffect.stopSound("santaSmileStatus_mp3"),this.oneselfBeFound=!0,this.btnsVisibleOrTouchEnabled(!1,!1),DataCenter.instance.room.IsAI?(this.xiaoIsPlay=!1,this.santaPlayNuAmiFun(),this.ziseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),void(this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi.SetTimeoutExample()))):(this.nuIsPlay=!0,void App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.EVENT_BE_FOUND,1))):DataCenter.instance.room.IsAI?(this.gameChristmasModel.myScore++,this["playerScoreLab"+this.oneselfNum].text=this.gameChristmasModel.myScore+"",void this.arriveScore()):void App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.EVENT_THROW_SNOWBALL,1)},t.prototype.onThrowSnowBallXunlu1Complete=function(){if(this.xunLuDb1.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onThrowSnowBallXunlu1Complete,this),this.nuIsPlay||this.xiaoIsPlay){if(1==this.oneselfNum&&this.oneselfBeFound)return;if(2==this.oneselfNum&&this.otherBeFound)return}this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)},t.prototype.onThrowSnowBallXunlu2Complete=function(){if(this.xunLuDb2.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onThrowSnowBallXunlu2Complete,this),this.nuIsPlay||this.xiaoIsPlay){if(2==this.oneselfNum&&this.oneselfBeFound)return;if(1==this.oneselfNum&&this.otherBeFound)return}this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)},t.prototype.onBeatingXunlu2Complete=function(){if(this.xunLuDb2.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onBeatingXunlu2Complete,this),this.oneselfBeFound)if(1==this.oneselfNum){if(this.ziseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),this.otherBeFound)return;this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}else{if(this.zongseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),this.otherBeFound)return;this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}else if(1==this.oneselfNum){if(this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0),this.otherBeFound)return;this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}else if(2==this.oneselfNum){if(this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0),this.otherBeFound)return;this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}},t.prototype.onBeatingXunlu1Complete=function(){if(this.xunLuDb1.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onBeatingXunlu1Complete,this),this.oneselfBeFound)if(1==this.oneselfNum){if(this.ziseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),this.otherBeFound)return;this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}else{if(this.zongseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),this.otherBeFound)return;this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}else if(1==this.oneselfNum){if(this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0),this.otherBeFound)return;this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}else if(2==this.oneselfNum){if(this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0),this.otherBeFound)return;this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)}},t.prototype.playerThrowSnowBall=function(e){this.christmasEffect&&this.christmasEffect.play("christmas_throwSnowBall"+Math.ceil(2*Math.random())+"_mp3"),this.christmasEffect&&this.christmasEffect.play("christmas_beating"+Math.ceil(2*Math.random())+"_mp3"),1==e?(this.xunLuDb1.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onThrowSnowBallXunlu1Complete,this),this.ziseluAmiPlay(GameChristmasModel.STATUS_THROW_SNOWBALL),this.xunLuDb2.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onBeatingXunlu2Complete,this),this.zongseluAmiPlay(GameChristmasModel.STATUS_BEATING)):(this.xunLuDb2.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onThrowSnowBallXunlu2Complete,this),this.zongseluAmiPlay(GameChristmasModel.STATUS_THROW_SNOWBALL),this.xunLuDb1.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onBeatingXunlu1Complete,this),this.ziseluAmiPlay(GameChristmasModel.STATUS_BEATING));var t=ObjectPool.pop(GameChristmasBall,"GameChristmasBall");t.alpha=1,t.texture=RES.getRes("xueqiu_png"),t.directionLOrR=e,1==t.directionLOrR?(t.x=this.ziseluGroup.x,t.y=620,t.directionPosL1_X=this.ziseluGroup.x,t.directionPosL1_Y=620,t.directionPosL2_X=this.ziseluGroup.x+(this.zongseluGroup.x-this.ziseluGroup.x)*(1/3),t.directionPosL2_Y=500,t.directionPosL3_X=this.zongseluGroup.x-80,t.directionPosL3_Y=590+Math.ceil(40*Math.random())):2==t.directionLOrR&&(t.x=this.zongseluGroup.x,t.y=620,t.directionPosR1_X=this.zongseluGroup.x,t.directionPosR1_Y=620,t.directionPosR2_X=this.zongseluGroup.x-(this.zongseluGroup.x-this.ziseluGroup.x)*(2/3),t.directionPosR2_Y=500,t.directionPosR3_X=this.ziseluGroup.x+60,t.directionPosR3_Y=590+Math.ceil(40*Math.random())),this.snowContainerGroup.addChild(t),egret.Tween.get(t).to({factorOne:1},100).call(this.moveOne.bind(this,t));var a=ObjectPool.pop(GameChristmasScore,"GameChristmasScore"),s=Math.ceil(4*Math.random());1==t.directionLOrR?(a.texture=RES.getRes("oneL"+s+"_png"),a.x=this.ziseluGroup.x+110,a.y=this.ziseluGroup.y-400):2==t.directionLOrR&&(a.texture=RES.getRes("oneR"+s+"_png"),a.x=this.zongseluGroup.x-110,a.y=this.zongseluGroup.y-400),a.alpha=1,this.snowContainerGroup.addChild(a),egret.Tween.get(a).to({x:a.x,y:a.y-200,alpha:.2},1e3).call(this.scoreTweenMove.bind(this,a))},t.prototype.chaofengBtnHandler=function(e){return this.gameStartBool?(this.playerMakeFun(1),DataCenter.instance.room.IsAI&&this.gameRobotAi.robotBeMakeFun&&!this.oneselfBeFound?void this.makeFunOtherPlayer():void App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasModel.EVENT_MAKEFUN,1)):void 0},t.prototype.playerMakeFun=function(e){this.christmasEffect&&this.christmasEffect.play("christmas_makeFun1_mp3");var t=ObjectPool.pop(GameChristmasScore,"GameChristmasScore"),a=Math.ceil(4*Math.random());1==e?1==this.oneselfNum?(t.texture=RES.getRes("twoL"+a+"_png"),t.x=this.zongseluGroup.x-110,t.y=this.zongseluGroup.y-400):(t.texture=RES.getRes("twoL"+a+"_png"),t.x=this.ziseluGroup.x+110,t.y=this.ziseluGroup.y-400):2==e&&(1==this.oneselfNum?(t.texture=RES.getRes("twoL"+a+"_png"),t.x=this.ziseluGroup.x+110,t.y=this.ziseluGroup.y-400):(t.texture=RES.getRes("twoL"+a+"_png"),t.x=this.zongseluGroup.x-110,t.y=this.zongseluGroup.y-400)),t.alpha=1,this.snowContainerGroup.addChild(t),egret.Tween.get(t).to({x:t.x,y:t.y-200,alpha:.2},1e3).call(this.scoreTweenMove.bind(this,t))},t.prototype.addAllDb=function(){this.yancongDb=AssetManager.getQuickDBArmature("santaArmature"),this.fangjianmenDb=AssetManager.getQuickDBArmature("santaArmature"),this.liwuheDb=AssetManager.getQuickDBArmature("santaArmature"),this.xunLuDb1=AssetManager.getQuickDBArmature("ziseluDb"),this.xunLuDb2=AssetManager.getQuickDBArmature("zongseluDb"),this.yancongDb.x=0,this.yancongDb.y=0,this.yancongDbGroup.addChild(this.yancongDb),this.fangjianmenDb.x=0,this.fangjianmenDb.y=0,this.menkuangDbGroup.addChild(this.fangjianmenDb),this.liwuheDb.x=0,this.liwuheDb.y=0,this.liwuheDbGroup.addChild(this.liwuheDb),this.xunLuDb1.x=0,this.xunLuDb1.y=0,this.ziseluGroup.addChild(this.xunLuDb1),this.xunLuDb2.x=0,this.xunLuDb2.y=0,this.zongseluGroup.addChild(this.xunLuDb2),this.santaStatusAmiPlay(1,GameChristmasSantaModel.STATUS_YANCONG_YUJING,!1),this.santaStatusAmiPlay(2,GameChristmasSantaModel.STATUS_MEN_YUJING,!1),this.santaStatusAmiPlay(3,GameChristmasSantaModel.STATUS_LIHE_YUJING,!1),this.xunLuDb1.play(GameChristmasModel.STATUS_SWEEPFLOOR,0),this.xunLuDb2.play(GameChristmasModel.STATUS_SWEEPFLOOR,0)},t.prototype.tick=function(t){e.prototype.tick.call(this,t),this.dbTimeTicker||(this.dbTimeTicker=t);var a=t;a-this.dbTimeTicker;this.dbTimeTicker=a},t.prototype.stopAllDbAmi=function(){this.santaStatusAmiPlay(1,GameChristmasSantaModel.STATUS_YANCONG_YUJING,!1),this.santaStatusAmiPlay(2,GameChristmasSantaModel.STATUS_MEN_YUJING,!1),this.santaStatusAmiPlay(3,GameChristmasSantaModel.STATUS_LIHE_YUJING,!1),this.xunLuDb1.gotoAndStop(GameChristmasModel.STATUS_SWEEPFLOOR),this.xunLuDb2.gotoAndStop(GameChristmasModel.STATUS_SWEEPFLOOR)},t.prototype.menYujingTween=function(){function e(){n--,egret.Tween.get(s.renyingImg,egret.Ease.sineOut).to({x:o,y:s.renyingImg.y},500+10*n).call(t)}function t(){egret.Tween.get(s.renyingImg,egret.Ease.sineOut).to({x:i,y:s.renyingImg.y},500+30*n).call(a)}function a(){return n>0?void e():(s.renyingImg.visible=!1,s.yujingIsPlay=!1,void s.santaPlayStatusXiaoFun())}var s=this;this.yujingIsPlay=!0;var i=this.renyingImg.x,o=this.renyingImg.x+80;this.renyingImg.x=this.renyingImg.x,s.renyingImg.visible=!0;var n=3;e()},t.prototype.santaStatusAmiPlay=function(e,t,a){var s=this;if(a)if(1==this.santaDbIndex)t==GameChristmasSantaModel.STATUS_YANCONG_YUJING?this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onYuJingComplete,this):t==GameChristmasSantaModel.STATUS_YANCONG_XIAO?(this.clearTimeoutHideBtnsId=egret.setTimeout(function(){s.xiaoIsPlay&&!s.nuIsPlay&&s.btnsVisibleOrTouchEnabled(!1,!1)},this,1e3),this.clearTimeoutDaodanBtnYanChi=egret.setTimeout(function(){s.xiaoIsPlay=!0},this,400),this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this)):t==GameChristmasSantaModel.STATUS_YANCONG_NU&&(this.nuIsPlay=!0,this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)),this.yancongDb.play(t,1);
else if(2==this.santaDbIndex){if(t==GameChristmasSantaModel.STATUS_MEN_YUJING)return void this.menYujingTween();t==GameChristmasSantaModel.STATUS_MEN_XIAO?(this.clearTimeoutHideBtnsId=egret.setTimeout(function(){s.xiaoIsPlay&&!s.nuIsPlay&&s.btnsVisibleOrTouchEnabled(!1,!1)},this,1e3),this.clearTimeoutDaodanBtnYanChi=egret.setTimeout(function(){s.xiaoIsPlay=!0},this,400),this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this)):t==GameChristmasSantaModel.STATUS_MEN_NU&&(this.nuIsPlay=!0,this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)),this.fangjianmenDb.visible=!0,this.fangjianmenDb.play(t,1)}else 3==this.santaDbIndex&&(t==GameChristmasSantaModel.STATUS_LIHE_YUJING?this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onYuJingComplete,this):t==GameChristmasSantaModel.STATUS_LIHE_XIAO?(this.clearTimeoutHideBtnsId=egret.setTimeout(function(){s.xiaoIsPlay&&!s.nuIsPlay&&s.btnsVisibleOrTouchEnabled(!1,!1)},this,1e3),this.clearTimeoutDaodanBtnYanChi=egret.setTimeout(function(){s.xiaoIsPlay=!0},this,400),this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this)):t==GameChristmasSantaModel.STATUS_LIHE_NU&&(this.nuIsPlay=!0,this.santaDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)),this.liwuheDb.play(t,1));else if(1==e)this.yancongDb.gotoAndStop(t);else if(2==e){if(t==GameChristmasSantaModel.STATUS_MEN_YUJING)return this.fangjianmenDb.visible=!1,void(this.renyingImg.visible=!1);this.fangjianmenDb.gotoAndStop(t)}else 3==e&&this.liwuheDb.gotoAndStop(t)},t.prototype.onYuJingComplete=function(){this.santaDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onYuJingComplete,this),this.yujingIsPlay=!1,this.santaPlayStatusXiaoFun()},t.prototype.onXiaoComplete=function(){this.nuIsPlay||(this.santaDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this),this.xiaoIsPlay=!1,this.santaPlayStatusYuJingFun(),DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.robotNoBeFound=!1),this.btnsVisibleOrTouchEnabled(!0,!1),(App.IsXiaoMi||App.IsLocal)&&App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasSantaModel.SANTA_ACTION_END,2))},t.prototype.onNuComplete=function(){this.santaDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this),this.santaPlayStatusYuJingFun(),this.nuIsPlay=!1,this.xiaoIsPlay=!1,this.oneselfBeFound=!1,this.otherBeFound=!1,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.robotBeMakeFun=!1,this.gameRobotAi.robotNoBeFound=!1,this.gameRobotAi.clearData(),this.gameRobotAi.SetTimeoutExample()),this.ziseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0),this.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0),this.btnsVisibleOrTouchEnabled(!0,!1),(App.IsXiaoMi||App.IsLocal)&&App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasSantaModel.SANTA_ACTION_END,2)},t.prototype.santaPlayStatusYuJingFun=function(){this.santaStatusAmiPlay(1,GameChristmasSantaModel.STATUS_YANCONG_YUJING,!1),this.santaStatusAmiPlay(2,GameChristmasSantaModel.STATUS_MEN_YUJING,!1),this.santaStatusAmiPlay(3,GameChristmasSantaModel.STATUS_LIHE_YUJING,!1)},t.prototype.santaPlayStatusXiaoFun=function(){this.christmasCommonEffect&&this.christmasCommonEffect.play("santaSmileStatus_mp3"),1==this.santaDbIndex?this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_YANCONG_XIAO,!0):2==this.santaDbIndex?this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_MEN_XIAO,!0):3==this.santaDbIndex&&this.santaStatusAmiPlay(this.santaDbIndex,GameChristmasSantaModel.STATUS_LIHE_XIAO,!0),(App.IsXiaoMi||App.IsLocal)&&App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasSantaModel.SANTA_COMEOUT,2)},t.prototype.ziseluAmiPlay=function(e,t){void 0===t&&(t=1),this.xunLuDb1.play(e,t)},t.prototype.zongseluAmiPlay=function(e,t){void 0===t&&(t=1),this.xunLuDb2.play(e,t)},t.prototype.randomPlaySantaAction=function(){this.currAmiIndex=0,this.SetTimeoutExample()},t.prototype.SetTimeoutExample=function(){this.intervalIdKey=egret.setInterval(this.myDelayedFunction,this,3e3+1e3*Math.ceil(3*Math.random()))},t.prototype.myDelayedFunction=function(e){this.yujingIsPlay||this.xiaoIsPlay||this.nuIsPlay||(this.gameChristmasSantaModel.checkActions[this.currAmiIndex]==GameChristmasSantaModel.SANTA_ACTION_STATUS1?1==DataCenter.instance.room.IsAI?this.yancongYujingFun():App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasSantaModel.STATUS_YANCONG_YUJING,1):this.gameChristmasSantaModel.checkActions[this.currAmiIndex]==GameChristmasSantaModel.SANTA_ACTION_STATUS2?1==DataCenter.instance.room.IsAI?this.fangJianMenYujingFun():App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasSantaModel.STATUS_MEN_YUJING,1):this.gameChristmasSantaModel.checkActions[this.currAmiIndex]==GameChristmasSantaModel.SANTA_ACTION_STATUS3&&(1==DataCenter.instance.room.IsAI?this.liWuHeYujingFun():App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,GameChristmasSantaModel.STATUS_LIHE_YUJING,1)),this.currAmiIndex++)},t.GAME_WIDTH=640,t.GAME_HEIGHT=1136,t}(StateEui);__reflect(GameChristmasMainView.prototype,"GameChristmasMainView");var GameChristmasModel=function(e){function t(){var t=e.call(this)||this;return t.myScore=0,t.otherScore=0,t.myScore=0,t.otherScore=0,t}return __extends(t,e),t.EVENT_THROW_SNOWBALL="EVENT_THROW_SNOWBALL",t.EVENT_MAKEFUN="EVENT_MAKEFUN",t.EVENT_GET_SNOWBALL="EVENT_GET_SNOWBALL",t.EVENT_GET_MAKEFUN="EVENT_GET_MAKEFUN",t.EVENT_BE_FOUND="EVENT_BE_FOUND",t.EVENT_GAME_START="EVENT_GAME_START",t.EVENT_GAME_OVER="EVENT_GAME_OVER",t.EVENT_WIN="EVENT_WIN",t.EVENT_LOSE="EVENT_WIN",t.STATUS_BEATING="beating",t.STATUS_ISSCOLDED="isScolded",t.STATUS_MAKEFUN="makeFun",t.STATUS_SWEEPFLOOR="sweepFloor",t.STATUS_THROW_SNOWBALL="throwSnowBall",t.GET_HOST_PC="GET_HOST_PC",t.GAMEOVER_AND_STEPSCORE="GAMEOVER_AND_STEPSCORE",t.resultScore=150,t}(egret.DisplayObjectContainer);__reflect(GameChristmasModel.prototype,"GameChristmasModel");var GameChristmasSantaAI=function(e){function t(t,a){var s=e.call(this)||this;return s.robotAiDirection=2,s.intervalIdRobotAiKey=0,s.intervalSantaComeoutIdRobotAiKey=0,s.robotBeMakeFun=!1,s.robotNoBeFound=!1,s.actionTimeout=0,s.gameChristmasMainView=t,s.robotAiDirection=a,s}return __extends(t,e),t.prototype.robotThrowSnowBall=function(){this.gameChristmasMainView.gameChristmasModel.otherScore++,this.gameChristmasMainView.playerScoreLab2.text=this.gameChristmasMainView.gameChristmasModel.otherScore+"",this.gameChristmasMainView.arriveScore(),this.gameChristmasMainView.playerThrowSnowBall(this.robotAiDirection)},t.prototype.robotMakeFun=function(){this.gameChristmasMainView.gameChristmasModel.myScore-=2,this.gameChristmasMainView.gameChristmasModel.myScore<=0&&(this.gameChristmasMainView.gameChristmasModel.myScore=0),this.gameChristmasMainView.playerScoreLab1.text=this.gameChristmasMainView.gameChristmasModel.myScore+"",this.gameChristmasMainView.playerMakeFun(this.robotAiDirection),this.gameChristmasMainView.ziseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),this.gameChristmasMainView.zongseluAmiPlay(GameChristmasModel.STATUS_MAKEFUN,1)},t.prototype.sendGameResult=function(){this.gameChristmasMainView.popup("GameResult")},t.prototype.randomPlayRobotAction=function(){this.SetTimeoutExample()},t.prototype.clearsantaComeoutThrowBall=function(){egret.clearInterval(this.intervalSantaComeoutIdRobotAiKey)},t.prototype.santaComeoutThrowBall=function(){this.intervalSantaComeoutIdRobotAiKey=egret.setInterval(this.myDelayedFunction,this,200+Math.ceil(50*Math.random()))},t.prototype.clearSetTimeoutExample=function(){egret.clearInterval(this.intervalIdRobotAiKey)},t.prototype.SetTimeoutExample=function(){this.intervalIdRobotAiKey=egret.setInterval(this.myDelayedFunction,this,140+60*(5-t.robotAiLv))},t.prototype.myDelayedFunction=function(){if(1==this.robotBeMakeFun)return void this.gameChristmasMainView.zongseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0);if(!this.gameChristmasMainView.xiaoIsPlay||!this.robotNoBeFound){if(this.gameChristmasMainView.xiaoIsPlay&&!this.robotNoBeFound){var e=Math.ceil(10*Math.random());return void(e>5+t.robotAiLv?(this.gameChristmasMainView.xiaoIsPlay=!1,this.robotBeMakeFun=!0,this.gameChristmasMainView.zongseluAmiPlay(GameChristmasModel.STATUS_ISSCOLDED,0),this.gameChristmasMainView.nuIsPlay||this.gameChristmasMainView.santaPlayNuAmiFun(),this.gameChristmasMainView.btnsVisibleOrTouchEnabled(!1,!0)):(this.robotNoBeFound=!0,this.gameChristmasMainView.zongseluAmiPlay(GameChristmasModel.STATUS_SWEEPFLOOR,0)))}return this.gameChristmasMainView.nuIsPlay&&this.gameChristmasMainView.oneselfBeFound?void this.robotMakeFun():void this.robotThrowSnowBall()}},t.prototype.clearData=function(){egret.clearInterval(this.intervalIdRobotAiKey),egret.clearInterval(this.intervalSantaComeoutIdRobotAiKey)},t.robotAiLv=3,t}(egret.DisplayObjectContainer);__reflect(GameChristmasSantaAI.prototype,"GameChristmasSantaAI");var GameChristmasSantaModel=function(e){function t(){var t=e.call(this)||this;return t.checkActions=[1,2,3,2,3,1,3,2,1,1,2,3,2,3,1,3,2,1,2,3,2,3,1,3,2,1],t.arrRandomByIndex(t.checkActions,0,t.checkActions.length),t}return __extends(t,e),t.prototype.arrRandom=function(e){function t(e,t){return Math.random()>.5?1:-1}e.sort(t)},t.prototype.arrRandomByIndex=function(e,t,a){var s=e.slice(t,a);this.arrRandom(s);for(var i=0;i<s.length;i++)e[t+i]=s[i]},t.STATUS_YANCONG_YUJING="yancongyujing",t.STATUS_YANCONG_XIAO="yancongxiao",t.STATUS_YANCONG_NU="yancongnu",t.STATUS_MEN_YUJING="menyujing",t.STATUS_MEN_XIAO="menxiao",t.STATUS_MEN_NU="mennu",t.STATUS_LIHE_YUJING="liheyujing",t.STATUS_LIHE_XIAO="lihexiao",t.STATUS_LIHE_NU="lihenu",t.SANTA_ACTION_STATUS1=1,t.SANTA_ACTION_STATUS2=2,t.SANTA_ACTION_STATUS3=3,t.SANTA_COMEOUT="SANTA_COMEOUT",t.SANTA_ACTION_END="SANTA_ACTION_END",t}(egret.DisplayObjectContainer);__reflect(GameChristmasSantaModel.prototype,"GameChristmasSantaModel");var GameChristmasScore=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(egret.Bitmap);__reflect(GameChristmasScore.prototype,"GameChristmasScore");