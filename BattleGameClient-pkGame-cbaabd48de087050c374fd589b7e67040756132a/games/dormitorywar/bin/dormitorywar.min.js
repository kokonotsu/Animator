var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},DormitoryWarBall=function(t){function e(){var e=t.call(this)||this;return e.directionLOrR=0,e.directionPosL1_X=0,e.directionPosL1_Y=0,e.directionPosL2_X=0,e.directionPosL2_Y=0,e.directionPosL3_X=0,e.directionPosL3_Y=0,e.directionPosR1_X=0,e.directionPosR1_Y=0,e.directionPosR2_X=0,e.directionPosR2_Y=0,e.directionPosR3_X=0,e.directionPosR3_Y=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"factorOne",{get:function(){return 0},set:function(t){return 1==this.directionLOrR?(this.x=(1-t)*(1-t)*this.directionPosL1_X+2*t*(1-t)*this.directionPosL2_X+t*t*this.directionPosL3_X,void(this.y=(1-t)*(1-t)*this.directionPosL1_Y+2*t*(1-t)*this.directionPosL2_Y+t*t*this.directionPosL3_Y)):(this.x=(1-t)*(1-t)*this.directionPosR1_X+2*t*(1-t)*this.directionPosR2_X+t*t*this.directionPosR3_X,void(this.y=(1-t)*(1-t)*this.directionPosR1_Y+2*t*(1-t)*this.directionPosR2_Y+t*t*this.directionPosR3_Y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"factorTwo",{get:function(){return 0},set:function(t){return 1==this.directionLOrR?(this.x=(1-t)*(1-t)*this.directionPosL3_X+2*t*(1-t)*(this.directionPosL3_X-80)+t*t*Math.ceil(this.directionPosL3_X-100-100*Math.random()),void(this.y=(1-t)*(1-t)*this.directionPosL3_Y+2*t*(1-t)*(this.directionPosL3_Y+150)+t*t*Math.ceil(this.directionPosL3_Y+190+30*Math.random()))):(this.x=(1-t)*(1-t)*this.directionPosR3_X+2*t*(1-t)*(this.directionPosR3_X+80)+t*t*Math.ceil(this.directionPosR3_X+100+100*Math.random()),void(this.y=(1-t)*(1-t)*this.directionPosR3_Y+2*t*(1-t)*(this.directionPosR3_Y+150)+t*t*Math.ceil(this.directionPosR3_Y+190+30*Math.random())))},enumerable:!0,configurable:!0}),e}(egret.Bitmap);__reflect(DormitoryWarBall.prototype,"DormitoryWarBall");var DormitoryWarMainView=function(t){function e(){var e=t.call(this,GameDormitoryWarMainSkin)||this;return e.daodanActionTimeout=0,e.oneselfNum=1,e.gameStartBool=!1,e.gameLastTime=60,e.teacherActionTime=0,e.checkPointBool=!1,e.yujingIsPlay=!1,e.xiaoIsPlay=!1,e.nuIsPlay=!1,e.teachersAniIndex=0,e.currAmiIndex=0,e.oneselfBeFound=!1,e.otherBeFound=!1,e.resultPageFun=function(){e.resultGroup.visible=!0,e.resultGroup.scaleX=e.resultGroup.scaleY=.3,egret.Tween.get(e.resultGroup).to({scaleX:1,scaleY:1},200,egret.Ease.bounceOut).wait(1800).call(function(){e.popup("GameResult",null)})},e.dormitoryWarModel=new DormitoryWarModel,e.dormitoryWarSantaModel=new DormitoryWarSantaModel,e.teachersAniIndex=0,e}return __extends(e,t),e.prototype.init=function(){var i=this;t.prototype.init.call(this),App.SoundManager.stopBg();var o=App.GameWidth/e.GAME_WIDTH,a=App.GameHeight/e.GAME_HEIGHT,r=Math.min(o,a);this.containerGroup.scaleX=this.containerGroup.scaleY=r,this.containerGroup.x=.5*(App.GameWidth-e.GAME_WIDTH*r),this.containerGroup.y=.5*(App.GameHeight-e.GAME_HEIGHT*r),this.btnsVisibleOrTouchEnabled(!1,!1),this.goBackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){i.popup("GameSureLeave")},this),this.daodanBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.daodanBtnHandler,this),this.chaofengBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chaofengBtnHandler,this),(App.IsXiaoMi||App.IsWanba)&&(this.goBackBtn.visible=!1,this.goBackBtn.touchEnabled=!1),this.myHeadImage&&(this.myHeadImage.dispose(),this.myHeadImage=null),this.myHeadImage=new RoleHeadImage(DataCenter.instance.user.imgUrl,"tou_png",78,78),this.otherHeadImage&&(this.otherHeadImage.dispose(),this.otherHeadImage=null),this.otherHeadImage=new RoleHeadImage(DataCenter.instance.room.player.imgUrl,"tou_png",78,78),this.resultGroup.visible=!1},e.prototype.show=function(){t.prototype.show.call(this),this.gameStartBool=!1,this.addAllMc(),DataCenter.instance.room.IsAI&&(this.gameRobotAi=new DormitoryWarSantaAI(this,2),DormitoryWarSantaAI.robotAiLv=App.CurrGameAiLevel,this.oneselfNum=1,this.youImg.x=90,this.playerAvatarAdd())},e.prototype.playerAvatarAdd=function(){1==this.oneselfNum?(this.playerAvatarGroup1.addChild(this.myHeadImage),this.myHeadImage.x=0,this.myHeadImage.y=0,this.playerAvatarGroup2.addChild(this.otherHeadImage),this.otherHeadImage.x=0,this.otherHeadImage.y=0):(this.playerAvatarGroup1.addChild(this.otherHeadImage),this.otherHeadImage.x=0,this.otherHeadImage.y=0,this.playerAvatarGroup2.addChild(this.myHeadImage),this.myHeadImage.x=0,this.myHeadImage.y=0),this.gameStart()},e.prototype.gameStart=function(){function t(){this.readyIMG=new GameReady(function(){i()}),this.readyIMG.x=300,this.readyIMG.y=App.GameHeight/2,this.addChild(this.readyIMG),this.readyIMG.play()}var e=this,i=function(){App.SoundManager.playBg("dormitoryWar_bg_mp3"),e.oneSelfTween(),e.guideHandTween(),e.btnsVisibleOrTouchEnabled(!0,!1),egret.setTimeout(function(){e.gameStartBool=!0,egret.Tween.removeTweens(e.youImg),e.youImg.visible=!1,e.startMatchingTime(),DataCenter.instance.room.IsAI?(e.randomPlaySantaAction(),e.gameRobotAi&&e.gameRobotAi.randomPlayRobotAction()):1==e.oneselfNum&&e.randomPlaySantaAction()},e,2e3)};this.clearTimeoutReadyId=egret.setTimeout(t,this,200)},e.prototype.addMesssgaeListener=function(){t.prototype.addMesssgaeListener.call(this),App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this),App.MessageCenter.addListener(EventMessage.ReceiveGameResultS2C,this.onGameResult,this),App.MessageCenter.addListener(EventMessage.GameLeave,this.onGameleave,this),DataCenter.instance.room.IsAI||(DataCenter.instance.room.player.id>DataCenter.instance.user.id?App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarModel.GET_HOST_PC+"|"+DataCenter.instance.room.player.id,2):App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarModel.GET_HOST_PC+"|"+DataCenter.instance.user.id,2))},e.prototype.onGameEvent=function(t){var e=t.event.split("|");switch(e[0]){case DormitoryWarModel.GET_HOST_PC:if(DataCenter.instance.room.IsAI)return;e[1]==DataCenter.instance.user.id?(this.oneselfNum=1,this.youImg.x=90):(this.oneselfNum=2,this.youImg.x=App.GameWidth-90),this.playerAvatarAdd();break;case DormitoryWarModel.EVENT_HIT:if(t.userId==DataCenter.instance.user.id)this.dormitoryWarModel.myScore++,this["playerScoreLab"+this.oneselfNum].text=this.dormitoryWarModel.myScore+"",this.arriveScore();else{if(1==this.oneselfNum){if(this.dormitoryWarModel.otherScore++,this.playerScoreLab2.text=this.dormitoryWarModel.otherScore+"",this.arriveScore(),this.nuIsPlay||this.xiaoIsPlay)return;return void this.playerHitOther(2)}if(this.dormitoryWarModel.otherScore++,this.playerScoreLab1.text=this.dormitoryWarModel.otherScore+"",this.arriveScore(),this.nuIsPlay||this.xiaoIsPlay)return;this.playerHitOther(1)}break;case DormitoryWarModel.EVENT_MAKEFUN:t.userId==DataCenter.instance.user.id?this.makeFunOtherPlayer():(this.dormitoryWarModel.myScore-=2,this.dormitoryWarModel.myScore<=0&&(this.dormitoryWarModel.myScore=0),this["playerScoreLab"+this.oneselfNum].text=this.dormitoryWarModel.myScore+"",this.playerMakeFun(2),1==this.oneselfNum?this.rightStudentAmiPlay(DormitoryWarModel.STATUS_MAKEFUN):this.leftStudentAmiPlay(DormitoryWarModel.STATUS_MAKEFUN));break;case DormitoryWarModel.EVENT_BE_FOUND:if(this.checkPointBool)return;t.userId==DataCenter.instance.user.id?this.oneselfBeFound=!0:this.otherBeFound=!0;break;case DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_YUJING:this.upLeftStudentYujingFun();break;case DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_YUJING:this.upRightStudentYujingFun();break;case DormitoryWarSantaModel.STATUS_TEACHER_YUJING:this.teacherYujingFun()}},e.prototype.upLeftStudentYujingFun=function(){this.yujingIsPlay=!0,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi.santaComeoutHit()),this.teachersAniIndex=1,this.teachersDbDisplay=this.upLeftStudentDb,this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_YUJING,!0)},e.prototype.upRightStudentYujingFun=function(){this.yujingIsPlay=!0,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi.santaComeoutHit()),this.teachersAniIndex=2,this.teachersDbDisplay=this.upRightStudentDb,this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_YUJING,!0)},e.prototype.teacherYujingFun=function(){this.yujingIsPlay=!0,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi.santaComeoutHit()),this.teachersAniIndex=3,this.teachersDbDisplay=this.suGuanDb,this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_YUJING,!0)},e.prototype.teachersNuAmiFun=function(){if(App.SoundManager.playEffect("christmas_santaCurse_mp3"),1==this.teachersAniIndex)this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_NU,!0);else if(2==this.teachersAniIndex)this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_NU,!0);else if(3==this.teachersAniIndex){if(DataCenter.instance.room.IsAI)return void(this.oneselfBeFound&&this.gameRobotAi.robotBeMakeFun?this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_ALLNU,!0):this.oneselfBeFound?this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_LEFTNU,!0):this.gameRobotAi.robotBeMakeFun&&this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_RIGHTNU,!0));this.oneselfBeFound&&this.otherBeFound?this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_ALLNU,!0):this.oneselfBeFound?1==this.oneselfNum?this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_LEFTNU,!0):this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_RIGHTNU,!0):this.otherBeFound&&(1==this.oneselfNum?this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_RIGHTNU,!0):this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_LEFTNU,!0))}},e.prototype.btnsVisibleOrTouchEnabled=function(t,e){this.daodanBtn.visible=t,this.daodanBtn.touchEnabled=t,this.chaofengBtn.visible=e,this.chaofengBtn.touchEnabled=e},e.prototype.makeFunOtherPlayer=function(){this.dormitoryWarModel.otherScore-=2,this.dormitoryWarModel.otherScore<=0&&(this.dormitoryWarModel.otherScore=0),1==this.oneselfNum?(this.playerScoreLab2.text=this.dormitoryWarModel.otherScore+"",this.leftStudentAmiPlay(DormitoryWarModel.STATUS_MAKEFUN)):(this.playerScoreLab1.text=this.dormitoryWarModel.otherScore+"",this.rightStudentAmiPlay(DormitoryWarModel.STATUS_MAKEFUN))},e.prototype.resultViewState=function(){var t=DataCenter.instance.room.gameResult;t.winUserId==DataCenter.instance.user.id?(this.meWinImg.visible=!0,this.meLoseImg.visible=!1,1==this.oneselfNum?(this.leftStatusImg.source="dwLeftWin_png",this.rightStatusImg.source="dwRightLose_png"):(this.leftStatusImg.source="dwLeftLose_png",this.rightStatusImg.source="dwRightWin_png")):(this.meWinImg.visible=!1,this.meLoseImg.visible=!0,1==this.oneselfNum?(this.leftStatusImg.source="dwLeftLose_png",this.rightStatusImg.source="dwRightWin_png"):(this.leftStatusImg.source="dwLeftWin_png",this.rightStatusImg.source="dwRightLose_png"))},e.prototype.arriveScore=function(){return this.dormitoryWarModel.myScore>=DormitoryWarModel.resultScore?void this.sendResult(3):void(this.dormitoryWarModel.otherScore>=DormitoryWarModel.resultScore&&this.sendResult(1))},e.prototype.onGameResult=function(t){DataCenter.instance.room.gameResult=t,this.resultViewState(),this.popup("GameResult",this.resultPageFun)},e.prototype.onGameleave=function(){this.clearData()},e.prototype.clearData=function(){DataCenter.instance.room.IsAI&&this.gameRobotAi&&this.gameRobotAi.clearData(),egret.clearInterval(this.intervalIdKey),egret.clearTimeout(this.clearTimeoutReadyId),egret.clearTimeout(this.clearTimeoutCheckPoint),App.TimerManager.remove(this.ontimerUpdate,this),this.daodanBtn.touchEnabled=!1,this.chaofengBtn.touchEnabled=!1,this.stopAllDbAmi(),egret.Tween.removeTweens(this.youImg)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.timesLab.text="60",egret.clearTimeout(this.clearTimeoutReadyId),egret.clearTimeout(this.clearTimeoutCheckPoint),DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.clearData(),this.gameRobotAi=null),this.stopAllDbAmi(),egret.Tween.removeTweens(this.youImg),egret.Tween.removeTweens(this.resultGroup),egret.clearInterval(this.intervalIdKey),ObjectPool.clearClass("DormitoryWarScore"),this.resultGroup.visible=!1,this.oneselfBeFound=!1,this.otherBeFound=!1,this.checkPointBool=!1},e.prototype.playerAvatarGroup1Handler=function(){var t="mouseClickSound_mp3";App.SoundManager.playEffect(t);var e;e=1==this.oneselfNum?DataCenter.instance.user:DataCenter.instance.room.player,this.popup("GameCenterMyHomePage",{lastViewName:"IS_GAMEING",currPlayerData:e})},e.prototype.playerAvatarGroup2Handler=function(){var t="mouseClickSound_mp3";App.SoundManager.playEffect(t);var e;e=1==this.oneselfNum?DataCenter.instance.room.player:DataCenter.instance.user,this.popup("GameCenterMyHomePage",{lastViewName:"IS_GAMEING",currPlayerData:e})},e.prototype.ontimerUpdate=function(){this.gameLastTime>0?(this.gameLastTime--,this.timesLab.text=this.gameLastTime+"",this.gameLastTime<4&&this.gameLastTime>0?App.SoundManager.playEffect("countDownSound_mp3"):0==this.gameLastTime&&App.SoundManager.playEffect("countDownSoundEnd_mp3")):(App.TimerManager.remove(this.ontimerUpdate,this),this.dormitoryWarModel.myScore>=this.dormitoryWarModel.otherScore?this.sendResult(3):this.sendResult(1))},e.prototype.sendResult=function(t){App.MessageCenter.removeListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this),this.clearData(),App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,t)},e.prototype.startMatchingTime=function(){this.gameLastTime=60,App.TimerManager.doTimer(1e3,0,this.ontimerUpdate,this)},e.prototype.oneSelfTween=function(){var t=this.youImg.y,e=this.youImg.y+60;this.youImg.x=this.youImg.x,this.youImg.visible=!0,egret.Tween.get(this.youImg,{loop:!0},egret.Ease.sineOut).to({scaleX:.9,scaleY:.9,x:this.youImg.x,y:e},400).to({scaleX:1,scaleY:1,x:this.youImg.x,y:t},400)},e.prototype.guideHandTween=function(){var t=0,e=0;t=this.guideHandImg.x,e=this.guideHandImg.x-20;var i=this.guideHandImg.y,o=this.guideHandImg.y+40;this.guideHandImg.x=this.guideHandImg.x,this.guideHandImg.y=this.guideHandImg.y,this.guideHandImg.visible=!0,egret.Tween.get(this.guideHandImg,{loop:!0},egret.Ease.sineOut).to({scaleX:1,scaleY:1,x:e,y:o},400).to({scaleX:1,scaleY:1,x:t,y:i},400)},e.prototype.moveOne=function(t){App.SoundManager.playEffect("dormitoryWar_beHit_mp3"),egret.Tween.get(t).to({factorTwo:1},100).call(this.moveTwo.bind(this,t))},e.prototype.moveTwo=function(t){var e=this;egret.Tween.get(t).to({alpha:.2},1600).call(function(){e.scoreAndBallContainerGroup.removeChild(t),ObjectPool.push(t)})},e.prototype.scoreTweenMove=function(t){var e=this;egret.Tween.get(t).wait(80).call(function(){e.scoreAndBallContainerGroup.removeChild(t),ObjectPool.push(t)})},e.prototype.daodanBtnHandler=function(t){var e=this;if(this.gameStartBool)return this.guideHandImg.visible&&(egret.Tween.removeTweens(this.guideHandImg),this.guideHandImg.visible=!1),this.daodanBtn.touchEnabled=!1,this.daodanActionTimeout=setTimeout(function(){e.daodanBtn.touchEnabled=!0,egret.clearTimeout(e.daodanActionTimeout)},60),this.playerHitOther(this.oneselfNum),this.xiaoIsPlay&&!this.checkPointBool?DataCenter.instance.room.IsAI?void(this.oneselfBeFound=!0):void App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarModel.EVENT_BE_FOUND,1):DataCenter.instance.room.IsAI?(this.dormitoryWarModel.myScore++,this["playerScoreLab"+this.oneselfNum].text=this.dormitoryWarModel.myScore+"",void this.arriveScore()):void App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarModel.EVENT_HIT,1)},e.prototype.onStudentHitLComplete=function(){if(this.hitLMc.removeEventListener(egret.Event.COMPLETE,this.onStudentHitLComplete,this),this.nuIsPlay||this.xiaoIsPlay){if(1==this.oneselfNum&&this.oneselfBeFound)return;if(2==this.oneselfNum&&this.otherBeFound)return}this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)},e.prototype.onStudentHitRComplete=function(){if(this.hitRMc.removeEventListener(egret.Event.COMPLETE,this.onStudentHitRComplete,this),this.nuIsPlay||this.xiaoIsPlay){if(2==this.oneselfNum&&this.oneselfBeFound)return;if(1==this.oneselfNum&&this.otherBeFound)return}this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)},e.prototype.onStudentBeHitRComplete=function(){if(this.beHitRMc.removeEventListener(egret.Event.COMPLETE,this.onStudentBeHitRComplete,this),this.oneselfBeFound)if(1==this.oneselfNum){if(this.leftStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED),this.otherBeFound)return;this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}else{if(this.rightStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED),this.otherBeFound)return;this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}else if(1==this.oneselfNum){if(this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI),this.otherBeFound)return;this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}else if(2==this.oneselfNum){if(this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI),this.otherBeFound)return;this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}},e.prototype.onStudentBeHitLComplete=function(){if(this.beHitLMc.removeEventListener(egret.Event.COMPLETE,this.onStudentBeHitLComplete,this),this.oneselfBeFound)if(1==this.oneselfNum){if(this.leftStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED),this.otherBeFound)return;this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}else{if(this.rightStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED),this.otherBeFound)return;this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}else if(1==this.oneselfNum){if(this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI),this.otherBeFound)return;this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}else if(2==this.oneselfNum){if(this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI),this.otherBeFound)return;this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI)}},e.prototype.playerHitOther=function(t){1==t?(this.leftStudentAmiActionInit(),this.hitLMc.visible=!0,this.hitLMc.addEventListener(egret.Event.COMPLETE,this.onStudentHitLComplete,this),this.hitLMc.gotoAndPlay(1,1),this.rightStudentAmiActionInit(),this.beHitRMc.visible=!0,this.beHitRMc.addEventListener(egret.Event.COMPLETE,this.onStudentBeHitRComplete,this),this.beHitRMc.gotoAndPlay(1,1)):(this.rightStudentAmiActionInit(),this.hitRMc.visible=!0,this.hitRMc.addEventListener(egret.Event.COMPLETE,this.onStudentHitRComplete,this),this.hitRMc.gotoAndPlay(1,1),this.leftStudentAmiActionInit(),this.beHitLMc.visible=!0,this.beHitLMc.addEventListener(egret.Event.COMPLETE,this.onStudentBeHitLComplete,this),this.beHitLMc.gotoAndPlay(1,1));var e=ObjectPool.pop(DormitoryWarBall,"DormitoryWarBall");e.alpha=1,e.texture=RES.getRes("zhiqiuDw_png"),e.directionLOrR=t,1==e.directionLOrR?(e.x=190,e.y=670,e.directionPosL1_X=190,e.directionPosL1_Y=670,e.directionPosL2_X=260,e.directionPosL2_Y=590,e.directionPosL3_X=490,e.directionPosL3_Y=620+Math.ceil(30*Math.random())):2==e.directionLOrR&&(e.x=450,e.y=670,e.directionPosR1_X=450,e.directionPosR1_Y=670,e.directionPosR2_X=380,e.directionPosR2_Y=590,e.directionPosR3_X=150,e.directionPosR3_Y=620+Math.ceil(30*Math.random())),this.scoreAndBallContainerGroup.addChild(e),App.SoundManager.playEffect("dormitoryWar_hit_mp3"),egret.Tween.get(e).to({factorOne:1},100).call(this.moveOne.bind(this,e));var i=ObjectPool.pop(DormitoryWarScore,"DormitoryWarScore"),o=Math.ceil(3*Math.random());1==t?(i.texture=RES.getRes("scoreOneDw"+o+"_png"),i.x=80,i.y=520):2==t&&(i.texture=RES.getRes("scoreOneDw"+o+"_png"),i.x=460,i.y=520),i.alpha=1,this.scoreAndBallContainerGroup.addChild(i),egret.Tween.get(i).to({x:i.x,y:i.y-100,alpha:.2},1e3).call(this.scoreTweenMove.bind(this,i))},e.prototype.chaofengBtnHandler=function(t){return this.gameStartBool?(this.guideHandImg.visible&&(egret.Tween.removeTweens(this.guideHandImg),this.guideHandImg.visible=!1),this.playerMakeFun(1),DataCenter.instance.room.IsAI&&this.gameRobotAi.robotBeMakeFun&&!this.oneselfBeFound?void this.makeFunOtherPlayer():void App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarModel.EVENT_MAKEFUN,1)):void 0},e.prototype.playerMakeFun=function(t){App.SoundManager.playEffect("dormitoryWar_makeFun_mp3");var e=ObjectPool.pop(DormitoryWarScore,"DormitoryWarScore"),i=Math.ceil(3*Math.random());1==t?1==this.oneselfNum?(e.texture=RES.getRes("scoreTwoDw"+i+"_png"),e.x=460,e.y=520):(e.texture=RES.getRes("scoreTwoDw"+i+"_png"),e.x=80,e.y=520):2==t&&(1==this.oneselfNum?(e.texture=RES.getRes("scoreTwoDw"+i+"_png"),e.x=80,e.y=520):(e.texture=RES.getRes("scoreTwoDw"+i+"_png"),e.x=460,e.y=520)),e.alpha=1,this.scoreAndBallContainerGroup.addChild(e),egret.Tween.get(e).to({x:e.x,y:e.y-100,alpha:.2},1e3).call(this.scoreTweenMove.bind(this,e))},e.prototype.addAllMc=function(){this.upLeftStudentDb=AssetManager.getQuickDBArmature("upLeftStudentDB"),this.upLeftStudentDbGroup.addChild(this.upLeftStudentDb),this.upLeftStudentDb.x=0,this.upLeftStudentDb.y=0,this.upRightStudentDb=AssetManager.getQuickDBArmature("upRightStudentDB"),this.upRightStudentDbGroup.addChild(this.upRightStudentDb),this.upRightStudentDb.x=0,this.upRightStudentDb.y=0,this.suGuanDb=AssetManager.getQuickDBArmature("suGuanDB"),this.teacherDbGroup.addChild(this.suGuanDb),this.suGuanDb.x=-16,this.suGuanDb.y=-34,this.beFoundOneMcFactory=new egret.MovieClipDataFactory(RES.getRes("beFoundLeftEffect_mc_json"),RES.getRes("beFoundLeftEffect_tex_png")),this.beFoundOneMc=new egret.MovieClip(this.beFoundOneMcFactory.generateMovieClipData("beFoundLeftEffect")),this.leftStudentDbGroup.addChild(this.beFoundOneMc),this.beFoundOneMc.x=170,this.beFoundOneMc.y=200,this.beFoundTwoMcFactory=new egret.MovieClipDataFactory(RES.getRes("beFoundRightEffect_mc_json"),RES.getRes("beFoundRightEffect_tex_png")),this.beFoundTwoMc=new egret.MovieClip(this.beFoundTwoMcFactory.generateMovieClipData("beFoundRightEffect")),this.rightStudentDbGroup.addChild(this.beFoundTwoMc),this.beFoundTwoMc.x=150,this.beFoundTwoMc.y=200,this.hitLMcFactory=new egret.MovieClipDataFactory(RES.getRes("studentLeftHitMc_mc_json"),RES.getRes("studentLeftHitMc_tex_png")),this.hitLMc=new egret.MovieClip(this.hitLMcFactory.generateMovieClipData("studentLeftHit")),this.leftStudentDbGroup.addChild(this.hitLMc),this.hitLMc.x=106,this.hitLMc.y=253.5,this.beHitLMcFactory=new egret.MovieClipDataFactory(RES.getRes("studentLeftBeHit_mc_json"),RES.getRes("studentLeftBeHit_tex_png")),this.beHitLMc=new egret.MovieClip(this.beHitLMcFactory.generateMovieClipData("studentLeftBeHit")),this.leftStudentDbGroup.addChild(this.beHitLMc),this.beHitLMc.x=84,this.beHitLMc.y=224.5,this.makeFunLMcFactory=new egret.MovieClipDataFactory(RES.getRes("studentLeftMakeFun_mc_json"),RES.getRes("studentLeftMakeFun_tex_png")),this.makeFunLMc=new egret.MovieClip(this.makeFunLMcFactory.generateMovieClipData("studentLeftMakeFun")),this.leftStudentDbGroup.addChild(this.makeFunLMc),this.makeFunLMc.x=95,this.makeFunLMc.y=254.5,this.hitRMcFactory=new egret.MovieClipDataFactory(RES.getRes("studentRightHit_mc_json"),RES.getRes("studentRightHit_tex_png")),this.hitRMc=new egret.MovieClip(this.hitRMcFactory.generateMovieClipData("studentRightHit")),this.rightStudentDbGroup.addChild(this.hitRMc),this.hitRMc.x=213,this.hitRMc.y=241,this.beHitRMcFactory=new egret.MovieClipDataFactory(RES.getRes("studentRightBeHit_mc_json"),RES.getRes("studentRightBeHit_tex_png")),this.beHitRMc=new egret.MovieClip(this.beHitRMcFactory.generateMovieClipData("studentRightBeHit")),this.rightStudentDbGroup.addChild(this.beHitRMc),this.beHitRMc.x=231,this.beHitRMc.y=229,this.makeFunRMcFactory=new egret.MovieClipDataFactory(RES.getRes("studentRightMakeFun_mc_json"),RES.getRes("studentRightMakeFun_tex_png")),this.makeFunRMc=new egret.MovieClip(this.makeFunRMcFactory.generateMovieClipData("studentRightMakeFun")),this.rightStudentDbGroup.addChild(this.makeFunRMc),this.makeFunRMc.x=230,this.makeFunRMc.y=245,this.teachersPlayStatusYuJingFun(),this.leftStudentAmiActionInit(),this.leftStudentDaijiImg.visible=!0,this.rightStudentAmiActionInit(),this.rightStudentDaijiImg.visible=!0},e.prototype.tick=function(e){t.prototype.tick.call(this,e),this.dbTimeTicker||(this.dbTimeTicker=e);var i=e;i-this.dbTimeTicker;this.dbTimeTicker=i},e.prototype.stopAllDbAmi=function(){this.upLeftStudentDb.gotoAndStop(DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_YUJING),this.upRightStudentDb.gotoAndStop(DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_YUJING),this.teachersStatusAmiPlay(3,DormitoryWarSantaModel.STATUS_TEACHER_YUJING,!1),this.leftStudentAmiActionInit(),this.rightStudentAmiActionInit()},e.prototype.isXiaoAniPlayStatus=function(){var t=this;egret.clearTimeout(this.clearTimeoutReadyId),egret.clearTimeout(this.clearTimeoutCheckPoint),this.checkPointBool=!1,this.clearTimeoutCheckPoint=egret.setTimeout(function(){t.xiaoIsPlay=!0,3==t.teachersAniIndex&&App.SoundManager.playEffect("dormitoryWar_hitDoor_mp3"),egret.clearTimeout(t.clearTimeoutCheckPoint)},this,300),this.clearTimeoutDaodanBtnYanChi=egret.setTimeout(function(){return t.checkPointBool=!0,DataCenter.instance.room.IsAI?void(t.oneselfBeFound||t.gameRobotAi.robotBeMakeFun?(t.teachersDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,t.onXiaoComplete,t),App.SoundManager.stopEffect("santaSmileStatus_mp3"),t.xiaoIsPlay=!1,t.nuIsPlay=!0,t.oneselfBeFound?(t.btnsVisibleOrTouchEnabled(!1,!1),t.leftStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED)):t.btnsVisibleOrTouchEnabled(!1,!0),t.gameRobotAi.robotBeMakeFun&&(t.rightStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED),t.gameRobotAi.clearData(),t.gameRobotAi.SetTimeoutExample()),t.teachersNuAmiFun()):t.xiaoIsPlay&&!t.nuIsPlay&&(t.btnsVisibleOrTouchEnabled(!1,!1),t.guideHandImg.visible&&(egret.Tween.removeTweens(t.guideHandImg),t.guideHandImg.visible=!1))):void(t.oneselfBeFound||t.otherBeFound?(t.teachersDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,t.onXiaoComplete,t),App.SoundManager.stopEffect("santaSmileStatus_mp3"),t.xiaoIsPlay=!1,t.nuIsPlay=!0,t.oneselfBeFound?(t.btnsVisibleOrTouchEnabled(!1,!1),1==t.oneselfNum?t.leftStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED):t.rightStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED)):t.btnsVisibleOrTouchEnabled(!1,!0),t.otherBeFound&&(1==t.oneselfNum?t.rightStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED):t.leftStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED)),t.teachersNuAmiFun()):t.xiaoIsPlay&&!t.nuIsPlay&&(t.btnsVisibleOrTouchEnabled(!1,!1),t.guideHandImg.visible&&(egret.Tween.removeTweens(t.guideHandImg),t.guideHandImg.visible=!1)))},this,600)},e.prototype.teachersStatusAmiPlay=function(t,e,i){i?1==t?(e==DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_YUJING?this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onYuJingComplete,this):e==DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_XIAO?(this.isXiaoAniPlayStatus(),this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this)):e==DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_NU&&(this.nuIsPlay=!0,this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)),this.upLeftStudentDb.play(e,1)):2==t?(e==DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_YUJING?this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onYuJingComplete,this):e==DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_XIAO?(this.isXiaoAniPlayStatus(),this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this)):e==DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_NU&&(this.nuIsPlay=!0,this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)),this.upRightStudentDb.play(e,1)):3==t&&(e==DormitoryWarSantaModel.STATUS_TEACHER_YUJING?this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onYuJingComplete,this):e==DormitoryWarSantaModel.STATUS_TEACHER_XIAO?(this.isXiaoAniPlayStatus(),this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this)):e==DormitoryWarSantaModel.STATUS_TEACHER_LEFTNU?(this.nuIsPlay=!0,this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)):e==DormitoryWarSantaModel.STATUS_TEACHER_RIGHTNU?(this.nuIsPlay=!0,this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)):e==DormitoryWarSantaModel.STATUS_TEACHER_ALLNU&&(this.nuIsPlay=!0,this.teachersDbDisplay.addDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this)),this.suGuanDb.play(e,1)):1==t?this.upLeftStudentDb.play(DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_YUJING,0):2==t?this.upRightStudentDb.play(DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_YUJING,0):3==t&&this.suGuanDb.gotoAndStop(e)},e.prototype.onYuJingComplete=function(){this.teachersDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onYuJingComplete,this),this.yujingIsPlay=!1,this.oneselfBeFound=!1,this.otherBeFound=!1,this.santaPlayStatusXiaoFun()},e.prototype.onXiaoComplete=function(){this.teachersDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onXiaoComplete,this),this.yujingIsPlay=!1,this.xiaoIsPlay=!1,this.nuIsPlay||(this.teachersPlayStatusYuJingFun(),DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.robotNoBeFound=!1),this.btnsVisibleOrTouchEnabled(!0,!1),App.IsXiaoMi&&App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarSantaModel.TEACHERS_ACTION_END,2))},e.prototype.onNuComplete=function(){this.teachersDbDisplay.removeDisplayEvent(dragonBones.AnimationEvent.LOOP_COMPLETE,this.onNuComplete,this),egret.clearTimeout(this.clearTimeoutDaodanBtnYanChi),this.teachersPlayStatusYuJingFun(),this.nuIsPlay=!1,this.xiaoIsPlay=!1,this.yujingIsPlay=!1,this.oneselfBeFound=!1,this.otherBeFound=!1,DataCenter.instance.room.IsAI&&this.gameRobotAi&&(this.gameRobotAi.robotBeMakeFun=!1,this.gameRobotAi.robotNoBeFound=!1,this.gameRobotAi.clearData(),this.gameRobotAi.SetTimeoutExample()),this.leftStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI),this.rightStudentAmiPlay(DormitoryWarModel.STATUS_DAIJI),this.btnsVisibleOrTouchEnabled(!0,!1),App.IsXiaoMi&&App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarSantaModel.TEACHERS_ACTION_END,2)},e.prototype.teachersPlayStatusYuJingFun=function(){this.teachersStatusAmiPlay(1,DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_YUJING,!1),this.teachersStatusAmiPlay(2,DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_YUJING,!1),this.teachersStatusAmiPlay(3,DormitoryWarSantaModel.STATUS_TEACHER_YUJING,!1)},e.prototype.santaPlayStatusXiaoFun=function(){App.SoundManager.playEffect("santaSmileStatus_mp3"),1==this.teachersAniIndex?this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_XIAO,!0):2==this.teachersAniIndex?this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_XIAO,!0):3==this.teachersAniIndex&&this.teachersStatusAmiPlay(this.teachersAniIndex,DormitoryWarSantaModel.STATUS_TEACHER_XIAO,!0),App.IsXiaoMi&&App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarSantaModel.TEACHERS_COMEOUT,2)},e.prototype.leftStudentAmiActionInit=function(){this.leftStudentDaijiImg.visible=!1,this.beFoundOneMc.gotoAndStop(1),this.beFoundOneMc.visible=!1,this.hitLMc.visible=!1,this.hitLMc.stop(),this.beHitLMc.visible=!1,this.beHitLMc.stop(),this.makeFunLMc.visible=!1,this.makeFunLMc.stop()
},e.prototype.leftStudentAmiPlay=function(t){switch(this.leftStudentAmiActionInit(),t){case DormitoryWarModel.STATUS_DAIJI:this.leftStudentDaijiImg.visible=!0;break;case DormitoryWarModel.STATUS_ISSCOLDED:this.leftStudentDaijiImg.visible=!0,this.beFoundOneMc.visible=!0,this.beFoundOneMc.gotoAndPlay(1,-1);break;case DormitoryWarModel.STATUS_MAKEFUN:this.makeFunLMc.visible=!0,this.makeFunLMc.gotoAndPlay(1,1);break;case DormitoryWarModel.EVENT_HIT:this.hitLMc.visible=!0,this.hitLMc.gotoAndPlay(1,1);break;case DormitoryWarModel.EVENT_BEHIT:this.beHitLMc.visible=!0,this.beHitLMc.gotoAndPlay(1,1)}},e.prototype.rightStudentAmiActionInit=function(){this.rightStudentDaijiImg.visible=!1,this.beFoundTwoMc.gotoAndStop(1),this.beFoundTwoMc.visible=!1,this.hitRMc.visible=!1,this.hitRMc.stop(),this.beHitRMc.visible=!1,this.beHitRMc.stop(),this.makeFunRMc.visible=!1,this.makeFunRMc.stop()},e.prototype.rightStudentAmiPlay=function(t){switch(this.rightStudentAmiActionInit(),t){case DormitoryWarModel.STATUS_DAIJI:this.rightStudentDaijiImg.visible=!0;break;case DormitoryWarModel.STATUS_ISSCOLDED:this.rightStudentDaijiImg.visible=!0,this.beFoundTwoMc.visible=!0,this.beFoundTwoMc.gotoAndPlay(1,-1);break;case DormitoryWarModel.STATUS_MAKEFUN:this.makeFunRMc.visible=!0,this.makeFunRMc.gotoAndPlay(1,1);break;case DormitoryWarModel.EVENT_HIT:this.hitRMc.visible=!0,this.hitRMc.gotoAndPlay(1,1);break;case DormitoryWarModel.EVENT_BEHIT:this.beHitRMc.visible=!0,this.beHitRMc.gotoAndPlay(1,1)}},e.prototype.randomPlaySantaAction=function(){this.currAmiIndex=0,this.SetTimeoutExample()},e.prototype.SetTimeoutExample=function(){this.intervalIdKey=egret.setInterval(this.myDelayedFunction,this,3e3+1e3*Math.ceil(3*Math.random()))},e.prototype.myDelayedFunction=function(t){this.yujingIsPlay||this.xiaoIsPlay||this.nuIsPlay||(this.dormitoryWarSantaModel.checkActions[this.currAmiIndex]==DormitoryWarSantaModel.TEACHERS_ACTION_STATUS1?1==DataCenter.instance.room.IsAI?this.upLeftStudentYujingFun():App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarSantaModel.STATUS_UPLEFTSTUDENT_YUJING,1):this.dormitoryWarSantaModel.checkActions[this.currAmiIndex]==DormitoryWarSantaModel.TEACHERS_ACTION_STATUS2?1==DataCenter.instance.room.IsAI?this.upRightStudentYujingFun():App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarSantaModel.STATUS_UPRIGHTSTUDENT_YUJING,1):this.dormitoryWarSantaModel.checkActions[this.currAmiIndex]==DormitoryWarSantaModel.TEACHERS_ACTION_STATUS3&&(1==DataCenter.instance.room.IsAI?this.teacherYujingFun():App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,DormitoryWarSantaModel.STATUS_TEACHER_YUJING,1)),this.currAmiIndex++)},e.GAME_WIDTH=640,e.GAME_HEIGHT=1136,e}(StateEui);__reflect(DormitoryWarMainView.prototype,"DormitoryWarMainView");var DormitoryWarModel=function(t){function e(){var e=t.call(this)||this;return e.myScore=0,e.otherScore=0,e.myScore=0,e.otherScore=0,e}return __extends(e,t),e.EVENT_HIT="EVENT_HIT",e.EVENT_BEHIT="EVENT_BEHIT",e.EVENT_MAKEFUN="EVENT_MAKEFUN",e.EVENT_BE_FOUND="EVENT_BE_FOUND",e.STATUS_ISSCOLDED="isScolded",e.STATUS_MAKEFUN="makeFun",e.STATUS_DAIJI="sweepFloor",e.GET_HOST_PC="GET_HOST_PC",e.resultScore=1500,e}(egret.DisplayObjectContainer);__reflect(DormitoryWarModel.prototype,"DormitoryWarModel");var DormitoryWarSantaAI=function(t){function e(e,i){var o=t.call(this)||this;return o.robotAiDirection=2,o.intervalIdRobotAiKey=0,o.intervalSantaComeoutIdRobotAiKey=0,o.robotBeMakeFun=!1,o.robotNoBeFound=!1,o.actionTimeout=0,o.gameChristmasMainView=e,o.robotAiDirection=i,o}return __extends(e,t),e.prototype.robotThrowSnowBall=function(){this.gameChristmasMainView.dormitoryWarModel.otherScore++,this.gameChristmasMainView.playerScoreLab2.text=this.gameChristmasMainView.dormitoryWarModel.otherScore+"",this.gameChristmasMainView.arriveScore(),this.gameChristmasMainView.playerHitOther(this.robotAiDirection)},e.prototype.robotMakeFun=function(){this.gameChristmasMainView.dormitoryWarModel.myScore-=2,this.gameChristmasMainView.dormitoryWarModel.myScore<=0&&(this.gameChristmasMainView.dormitoryWarModel.myScore=0),this.gameChristmasMainView.playerScoreLab1.text=this.gameChristmasMainView.dormitoryWarModel.myScore+"",this.gameChristmasMainView.playerMakeFun(this.robotAiDirection),this.gameChristmasMainView.leftStudentAmiPlay(DormitoryWarModel.STATUS_ISSCOLDED),this.gameChristmasMainView.rightStudentAmiPlay(DormitoryWarModel.STATUS_MAKEFUN)},e.prototype.sendGameResult=function(){this.gameChristmasMainView.popup("GameResult")},e.prototype.randomPlayRobotAction=function(){this.SetTimeoutExample()},e.prototype.clearsantaComeoutHit=function(){egret.clearInterval(this.intervalSantaComeoutIdRobotAiKey)},e.prototype.santaComeoutHit=function(){this.intervalSantaComeoutIdRobotAiKey=egret.setInterval(this.myDelayedFunction,this,200+Math.ceil(50*Math.random()))},e.prototype.clearSetTimeoutExample=function(){egret.clearInterval(this.intervalIdRobotAiKey)},e.prototype.SetTimeoutExample=function(){this.intervalIdRobotAiKey=egret.setInterval(this.myDelayedFunction,this,140+60*(5-e.robotAiLv))},e.prototype.myDelayedFunction=function(){if(!(1==this.robotBeMakeFun||this.gameChristmasMainView.xiaoIsPlay&&this.robotNoBeFound)){if(this.gameChristmasMainView.xiaoIsPlay&&!this.robotNoBeFound){var t=Math.ceil(10*Math.random());return void(t>5+e.robotAiLv?this.robotBeMakeFun=!0:this.robotNoBeFound=!0)}return this.gameChristmasMainView.nuIsPlay&&this.gameChristmasMainView.oneselfBeFound?void this.robotMakeFun():void this.robotThrowSnowBall()}},e.prototype.clearData=function(){egret.clearInterval(this.intervalIdRobotAiKey),egret.clearInterval(this.intervalSantaComeoutIdRobotAiKey)},e.robotAiLv=3,e}(egret.DisplayObjectContainer);__reflect(DormitoryWarSantaAI.prototype,"DormitoryWarSantaAI");var DormitoryWarSantaModel=function(t){function e(){var e=t.call(this)||this;return e.checkActions=[1,2,3,2,3,1,3,2,1,1,2,3,2,3,1,3,2,1,2,3,2,3,1,3,2,1],e.arrRandomByIndex(e.checkActions,0,e.checkActions.length),e}return __extends(e,t),e.prototype.arrRandom=function(t){function e(t,e){return Math.random()>.5?1:-1}t.sort(e)},e.prototype.arrRandomByIndex=function(t,e,i){var o=t.slice(e,i);this.arrRandom(o);for(var a=0;a<o.length;a++)t[e+a]=o[a]},e.STATUS_UPLEFTSTUDENT_YUJING="upLeftDaiji",e.STATUS_UPLEFTSTUDENT_XIAO="upLeftYujing",e.STATUS_UPLEFTSTUDENT_NU="upLeftFound",e.STATUS_UPRIGHTSTUDENT_YUJING="upRightDaiji",e.STATUS_UPRIGHTSTUDENT_XIAO="upRightYujing",e.STATUS_UPRIGHTSTUDENT_NU="upRightFound",e.STATUS_TEACHER_YUJING="suGuanDaiji",e.STATUS_TEACHER_XIAO="suGuanYujing",e.STATUS_TEACHER_LEFTNU="suGuanLeftFound",e.STATUS_TEACHER_RIGHTNU="suGuanRightFound",e.STATUS_TEACHER_ALLNU="suGuanAllFound",e.TEACHERS_ACTION_STATUS1=1,e.TEACHERS_ACTION_STATUS2=2,e.TEACHERS_ACTION_STATUS3=3,e.TEACHERS_COMEOUT="TEACHERS_COMEOUT",e.TEACHERS_ACTION_END="TEACHERS_ACTION_END",e}(egret.DisplayObjectContainer);__reflect(DormitoryWarSantaModel.prototype,"DormitoryWarSantaModel");var DormitoryWarScore=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(egret.Bitmap);__reflect(DormitoryWarScore.prototype,"DormitoryWarScore");