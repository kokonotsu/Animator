var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);r.prototype=t.prototype,e.prototype=new r},GameLongJump;!function(e){var t=function(){function t(){var r=this;this.initbo=function(){r.circleLightFallDB1=AssetManager.getDBArmature("bo"),r.circleLightFallDB1.gotoAndStopByProgress("newAnimation",1),GameLongJumpView.instance.gameLayer.addChild(r.circleLightFallDB1),r.circleLightFallDB2=AssetManager.getDBArmature("bo"),r.circleLightFallDB2.gotoAndStopByProgress("newAnimation",1),GameLongJumpView.instance.gameLayer.addChild(r.circleLightFallDB2)},this.initShuihua=function(){var e=RES.getRes("fallintowater_png"),t=RES.getRes("fallintowater_json");r.particleShuiHua=new particle.GravityParticleSystem(e,t),GameLongJumpView.instance.gameLayer.addChild(r.particleShuiHua)},this.initPower=function(){var e=RES.getRes("xuli1_png"),t=RES.getRes("xuli1_json");r.circleLightPowerPartical1=new particle.GravityParticleSystem(e,t),GameLongJumpView.instance.gameLayer.addChild(r.circleLightPowerPartical1);var a=RES.getRes("xuli2_png"),o=RES.getRes("xuli2_json");r.circleLightPowerPartical2=new particle.GravityParticleSystem(a,o),GameLongJumpView.instance.gameLayer.addChild(r.circleLightPowerPartical2)},this.jumpSuccessLightAnim=function(e){var t=Math.ceil(e/2);r.circleLightFallDB1.x=r.userCharacter.x,r.circleLightFallDB1.y=r.userCharacter.y,r.circleLightFallDB2.x=r.userCharacter.x,r.circleLightFallDB2.y=r.userCharacter.y,0==t&&(t=1),r.circleLightFallDB1.play("newAnimation",t),e-t>0&&App.TimerManager.doFrame(10,1,function(){r.circleLightFallDB2.play("newAnimation",e-t)},r)},this.hideLightPower=function(){r.isRemovePower=!0,r.circleLightPowerPartical1.stop(!0),r.circleLightPowerPartical2.stop(!0)},this.isRemovePower=!0,this.setPowerAnim=function(){r.isRemovePower=!1;var e=function(){r.isRemovePower||(r.circleLightPowerPartical1.y=r.userCharacter.y,r.circleLightPowerPartical1.x=r.userCharacter.x,r.circleLightPowerPartical1.start(),r.circleLightPowerPartical2.y=r.userCharacter.y,r.circleLightPowerPartical2.x=r.userCharacter.x,r.circleLightPowerPartical2.start())};e()},void 0==t.powerSize&&(t.powerSize=5*e.userConfig.powerLimit),this.initShuihua(),this.initPower(),this.initbo(),this.hideLightPower()}return t.prototype.setPos=function(){this.userCharacter.x=this._currentPlatform.collisionX,this.userCharacter.y=this._currentPlatform.collisionY,this.posY=this._currentPlatform.collisionY,this._power=e.userConfig.power},t.prototype.getSlopeOrDir=function(){var e,t=this.target.collisionY-this._currentPlatform.collisionY,r=this.target.collisionX-this._currentPlatform.collisionX,a=t/r;return a>0?(this.userCharacter.directionLOrR=1,e=0):(this.userCharacter.directionLOrR=0,a*=-1,e=1),{slope:a,dir:e}},t.prototype.onParticleEffect=function(e,t){this.particleShuiHua.y=t,this.particleShuiHua.x=e,this.particleShuiHua.start(500)},t.prototype.getDis=function(t){void 0===t&&(t=!1);var r,a,o=this.getSlopeOrDir(),i=this._power*e.userConfig.jumpDis;if(t){var s=void 0,n=void 0,c=-1/o.slope;return o.dir?(s=this._currentPlatform.collisionY-i*Math.sin(Math.atan(o.slope))/2,n=this._currentPlatform.collisionX+i*Math.cos(Math.atan(o.slope))/2,r=s+e.userConfig.jumpHeight*Math.sin(Math.atan(c)),a=n-e.userConfig.jumpHeight*Math.cos(Math.atan(c))):(s=this._currentPlatform.collisionY-i*Math.sin(Math.atan(o.slope))/2,n=this._currentPlatform.collisionX-i*Math.cos(Math.atan(o.slope))/2,r=s+e.userConfig.jumpHeight*Math.sin(Math.atan(c)),a=n+e.userConfig.jumpHeight*Math.cos(Math.atan(c))),{x:a,y:r}}return o.dir?(r=this._currentPlatform.collisionY-i*Math.sin(Math.atan(o.slope)),a=this._currentPlatform.collisionX+i*Math.cos(Math.atan(o.slope))):(r=this._currentPlatform.collisionY-i*Math.sin(Math.atan(o.slope)),a=this._currentPlatform.collisionX-i*Math.cos(Math.atan(o.slope))),{x:a,y:r}},Object.defineProperty(t.prototype,"particalY",{set:function(e){this.circleLightPowerPartical1.y=e,this.circleLightPowerPartical2.y=e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){},t}();e.CharacterController=t,__reflect(t.prototype,"GameLongJump.CharacterController")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t=function(){function e(){}return e.jumpDis=160,e.jumpSpeed=8,e.power=.4,e.powerAdd=.2,e.jumpHeight=200,e.powerLimit=4,e.score=60,e}();e.userConfig=t,__reflect(t.prototype,"GameLongJump.userConfig");var r=function(r){function a(){var a=r.call(this)||this;return a.isPlayAnim=!1,a.landSccess=function(r){(1===r||2===r||4===r||6===r||8===r||10===r)&&((a.target.platformType===e.PlatformType.k||a.target.platformType===e.PlatformType.q||a.target.platformType===e.PlatformType.w||a.target.platformType===e.PlatformType.max_r||a.target.platformType===e.PlatformType.g)&&(a.normalPlatformEffect.x=a.userCharacter.x,a.normalPlatformEffect.y=a.userCharacter.y,a.normalPlatformEffect.play("newAnimation",1)),a.userCharacter.gotoAndStopByProgress("xuli",0),a._power=t.power,a.posY=a.userCharacter.y,a.jumpSuccessLightAnim(a.combo),a.currentPlatform=a.target,a.userCharacter.scaleY=.8,a.shakeTips(r),App.SoundManager.playEffect("A＋"+r+"_mp3"),GameLongJumpView.instance.platformController.moveWorld(a.target,a._currentPlatform),GameLongJumpView.instance.canJump=!0,egret.Tween.get(a.userCharacter).to({scaleY:1},300))},a.landFailure=function(){a.power*t.jumpDis>a.target.offsetFromLast+a.target.offsetToEdge&&GameLongJumpView.instance.gameLayer.addChildAt(a.userCharacter,0),a.combo=0,a.userCharacter.play("luoshui",1);var e=Math.floor(3*Math.random())+1;App.SoundManager.playEffect("longJump_drop"+e+"_mp3",!0),a.onParticleEffect(a.userCharacter.x,a.userCharacter.y),egret.Tween.get(a.userCharacter).to({y:a.userCharacter.y+120,alpha:0},800).call(function(){a.userCharacter.alpha=1,GameLongJumpView.instance.gameLayer.addChild(a.userCharacter),a.userCharacter.gotoAndStopByProgress("xuli",0),a.setPos();var e=new EffectUtils;e.startFlicker(a.userCharacter,50),App.TimerManager.doTimer(300,1,function(){e.stopFlicker(a.userCharacter),a.userCharacter.alpha=1,GameLongJumpView.instance.canJump=!0},a)})},a}return __extends(a,r),a.prototype.init=function(){this.normalPlatformEffect=AssetManager.getDBArmature("Fang_1"),this.normalPlatformEffect.gotoAndStopByProgress("newAnimation",1),DataCenter.instance.room.selfIsMaster?this.userCharacter=new e.Character(AssetManager.getDBArmature("wa1")._armature):this.userCharacter=new e.Character(AssetManager.getDBArmature("wa2")._armature),this.userCharacter.name="Self",GameLongJumpView.instance.gameLayer.addChild(this.userCharacter),this._power=t.power,this.floatScore=AssetManager.getDBArmature("floatScore"),GameLongJumpView.instance.moveLayer.addChild(this.floatScore),GameLongJumpView.instance.moveLayer.addChild(this.normalPlatformEffect),this.combo=0},Object.defineProperty(a.prototype,"currentPlatform",{set:function(e){this._currentPlatform=e,this.target=GameLongJumpView.instance.platformController.creatNext(this._currentPlatform),this.target.offsetFromLast=GameLongJumpView.instance.platformController.getPlatformOffset(this._currentPlatform,this.target);var t=this.getSlopeOrDir();t.dir?this.userCharacter.scaleX=1:this.userCharacter.scaleX=-1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"power",{get:function(){return this._power},set:function(t){this._power=t,this._currentPlatform.scaleY=(e.CharacterController.powerSize-t)/e.CharacterController.powerSize,this.userCharacter.y=this.posY+this._currentPlatform.height*(1-this._currentPlatform.scaleY),this.particalY=this.posY+this._currentPlatform.height*(1-this._currentPlatform.scaleY),this.isPlayAnim||(this.setPowerAnim(),this.isPlayAnim=!0)},enumerable:!0,configurable:!0}),a.prototype.shakeTips=function(e){if(this.floatScore.scaleX=this.floatScore.scaleY=1.4,this.floatScore.x=this._currentPlatform.collisionX,this.floatScore.y=this._currentPlatform.collisionY,this.floatScore.play("+"+e,1),DataCenter.instance.room.IsAI)GameLongJumpView.instance.stateController.selfScore+=e;else{var t=GameLongJumpView.instance.stateController.selfScore+e;App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,"Score|"+DataCenter.instance.user.id+"|"+t+"|"+this.combo,1),console.log("Score"+t)}},a.prototype.jump=function(){var e=this;this.hideLightPower(),this.isPlayAnim=!1,egret.Tween.get(this._currentPlatform).to({scaleY:1},300,egret.Ease.quintOut),GameLongJumpView.instance.canJump=!1;var r=Math.floor(2*Math.random())+1;App.SoundManager.stopEffect("longJump_powering_mp3"),App.SoundManager.stopEffect("longJump_powerLimit_mp3"),GameLongJumpView.instance.sound=!1,App.SoundManager.playEffect("longJump_jump"+r+"_mp3",!0),DataCenter.instance.room.IsAI||App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,"jump|"+this.power,2),this.userCharacter.play("tiao"),this.userCharacter.scaleY=1;var a=this.getDis(),o=this.getDis(!0);this.userCharacter.directionLOrR?(this.userCharacter.directionPosL1_X=this.userCharacter.x,this.userCharacter.directionPosL1_Y=this.userCharacter.y,this.userCharacter.directionPosL2_X=o.x,this.userCharacter.directionPosL2_Y=o.y,this.userCharacter.directionPosL3_X=a.x,this.userCharacter.directionPosL3_Y=a.y):(this.userCharacter.directionPosR1_X=this.userCharacter.x,this.userCharacter.directionPosR1_Y=this.userCharacter.y,this.userCharacter.directionPosR2_X=o.x,this.userCharacter.directionPosR2_Y=o.y,this.userCharacter.directionPosR3_X=a.x,this.userCharacter.directionPosR3_Y=a.y),egret.Tween.get(this.userCharacter).to({factorOne:1},300).call(function(){return e.power*t.jumpDis<e.target.offsetFromLast+e.target.offsetToEdge&&e.power*t.jumpDis>e.target.offsetFromLast-e.target.offsetToEdge?void(e.power*t.jumpDis<e.target.offsetFromLast+.3*e.target.offsetToEdge&&e.power*t.jumpDis>e.target.offsetFromLast-.3*e.target.offsetToEdge?(e.combo<5&&e.combo++,5==e.combo&&App.SoundManager.playEffect("longJump_handclap_mp3",!0),isNaN(e.combo)?(e.combo=0,e.landSccess(1)):e.landSccess(2*e.combo)):(e.combo=0,e.landSccess(1))):void e.landFailure()})},a.prototype.dispose=function(){egret.Tween.removeTweens(this.userCharacter),App.TimerManager.removeAll(this)},a}(e.CharacterController);e.UserController=r,__reflect(r.prototype,"GameLongJump.UserController")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t=function(){function t(r){var a=this;this.isHard=!1,this.AItouch=function(){App.TimerManager.removeAll(a);var r=GameLongJumpView.instance.comController.target;if(r){var o,i=r.offsetFromLast,s=(Math.random(),GameLongJumpView.instance.stateController),n=GameLongJumpView.instance.userController.combo;if(5==a.aiLevel)o=n>0||s.comScore-s.selfScore<t.AIComboFlag?a.nextCombo(i,r.offsetToEdge):a.nextSuccess(i,r.offsetToEdge);else{var c=Math.random();o=a.dropNum>t.dropLimit||c<=t.successRound?a.nextSuccess(i,r.offsetToEdge):a.nextFail(i,r.offsetToEdge)}a.isHard&&(s.comScore-s.selfScore<t.easyToHard||n>0?a.aiLevel=5:s.comScore-s.selfScore>=t.hardTo4?a.aiLevel=4:s.comScore-s.selfScore>=t.hardTo3&&(a.aiLevel=3));var h=Math.ceil((o-e.userConfig.power)/e.userConfig.powerAdd)+1;App.TimerManager.doTimer(100*h,1,function(){GameLongJumpView.instance.comController.power=o,a.comJump()},a)}},this.comJump=r,this.combo=0,this.aiLevel=App.CurrGameAiLevel,5===this.aiLevel&&(this.isHard=!0),this.dropNum=0}return Object.defineProperty(t.prototype,"aiLevel",{get:function(){return this._aiLevel},set:function(e){switch(this._aiLevel=e,this._aiLevel){case 1:t.successRound=.3,t.comboRound=.1,t.dropLimit=4;break;case 2:t.successRound=.5,t.comboRound=.2,t.dropLimit=3;break;case 3:t.successRound=.75,t.comboRound=.5,t.dropLimit=2;break;case 4:t.successRound=.95,t.comboRound=.8,t.dropLimit=1;break;case 5:t.successRound=1,t.comboRound=0,t.dropLimit=0}},enumerable:!0,configurable:!0}),t.prototype.nextCombo=function(t,r){var a=r*Math.random()*.3;return this.dropNum=0,(t+a)/e.userConfig.jumpDis},t.prototype.nextSuccess=function(e,r){var a=Math.random();return a<=t.comboRound?this.nextCombo(e,r):this.noCombo(e,r)},t.prototype.nextFail=function(t,r){var a,o=Math.random();return a=o>.5?(t+r*(o+1))/e.userConfig.jumpDis:(t-r*(o+1))/e.userConfig.jumpDis,this.dropNum++,a},t.prototype.noCombo=function(t,r){var a=.3*r+r*Math.random()*.2;return this.dropNum=0,this.combo=0,(t+a)/e.userConfig.jumpDis},t.prototype.dispose=function(){App.TimerManager.removeAll(this)},t.successRound=.2,t.comboRound=.6,t.dropLimit=3,t.hardTo3=30,t.hardTo4=20,t.AIComboFlag=15,t.easyToHard=15,t}();e.AiController=t,__reflect(t.prototype,"GameLongJump.AiController")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t=function(t){function r(){var r=t.call(this)||this;return r.commandList=[],r.isPlay=!1,r.webSocre=void 0,r.offsetS2C=0,r.excuteCommand=function(){if(0==r.commandList.length)r.isPlay=!1;else{var e=r.commandList.shift();r.power=e.power,r.webSocre=e.webScore,r.jump()}},r.jump=function(){r.isPlay=!0,r.hideLightPower(),r.userCharacter.scaleY=1;var t=r.getDis(),a=r.getDis(!0);r._power*e.userConfig.jumpDis;r.userCharacter.directionLOrR?(r.userCharacter.directionPosL1_X=r.userCharacter.x,r.userCharacter.directionPosL1_Y=r.userCharacter.y,r.userCharacter.directionPosL2_X=a.x,r.userCharacter.directionPosL2_Y=a.y,r.userCharacter.directionPosL3_X=t.x,r.userCharacter.directionPosL3_Y=t.y):(r.userCharacter.directionPosR1_X=r.userCharacter.x,r.userCharacter.directionPosR1_Y=r.userCharacter.y,r.userCharacter.directionPosR2_X=a.x,r.userCharacter.directionPosR2_Y=a.y,r.userCharacter.directionPosR3_X=t.x,r.userCharacter.directionPosR3_Y=t.y),r.userCharacter.play("tiao",1),egret.Tween.get(r.userCharacter).to({factorOne:1},300).call(function(){if(r.power*e.userConfig.jumpDis<r.target.offsetFromLast+r.target.offsetToEdge&&r.power*e.userConfig.jumpDis>r.target.offsetFromLast-r.target.offsetToEdge){r.userCharacter.scaleY=.8;Math.floor(3*Math.random())+1;return r.userCharacter.gotoAndStopByProgress("xuli",0),DataCenter.instance.room.IsAI&&(r.power*e.userConfig.jumpDis<r.target.offsetFromLast+.3*r.target.offsetToEdge&&r.power*e.userConfig.jumpDis>r.target.offsetFromLast-.3*r.target.offsetToEdge?(r.ai.combo<5&&r.ai.combo++,isNaN(r.ai.combo)?(r.ai.combo=0,GameLongJumpView.instance.stateController.comScore+=1):GameLongJumpView.instance.stateController.comScore+=2*r.ai.combo):(r.ai.combo=0,GameLongJumpView.instance.stateController.comScore+=1)),r.posY=r.userCharacter.y,r.currentPlatform=r.target,egret.Tween.get(r.userCharacter).to({scaleY:1},300).call(r.excuteCommand),void 0===r.webSocre||isNaN(r.webSocre)||(GameLongJumpView.instance.stateController.comScore=r.webSocre,r.webSocre=void 0),void(DataCenter.instance.room.IsAI&&GameLongJumpView.instance.stateController.comScore<=60&&GameLongJumpView.instance.stateController.selfScore<=60&&r.ai.AItouch())}r.power*e.userConfig.jumpDis>r.target.offsetFromLast+r.target.offsetToEdge&&GameLongJumpView.instance.gameLayer.addChildAt(r.userCharacter,0),DataCenter.instance.room.IsAI&&(r.ai.combo=0),r.onParticleEffect(r.userCharacter.x,r.userCharacter.y),r.userCharacter.play("luoshui",1),egret.Tween.get(r.userCharacter).to({y:r.userCharacter.y+120,alpha:0},800).call(function(){r.userCharacter.alpha=.5,GameLongJumpView.instance.gameLayer.addChild(r.userCharacter),r.setPos(),r.userCharacter.gotoAndStopByProgress("xuli",0),egret.Tween.get(r.userCharacter).to({alpha:.1},50).to({alpha:.5},50).to({alpha:.1},50).to({alpha:.5},50).to({alpha:.1},50).to({alpha:.5},50),App.TimerManager.doTimer(300,1,function(){r.userCharacter.alpha=.5,r.isPlay=!1,DataCenter.instance.room.IsAI&&GameLongJumpView.instance.stateController.comScore<=60&&GameLongJumpView.instance.stateController.selfScore<=60&&r.ai.AItouch()},r)})})},r}return __extends(r,t),r.prototype.init=function(){DataCenter.instance.room.selfIsMaster?this.userCharacter=new e.Character(AssetManager.getDBArmature("wa2")._armature):this.userCharacter=new e.Character(AssetManager.getDBArmature("wa1")._armature),this.userCharacter.alpha=.5,this.userCharacter.name="Com",GameLongJumpView.instance.gameLayer.addChild(this.userCharacter),DataCenter.instance.room.IsAI?this.ai=new e.AiController(this.jump):App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this)},Object.defineProperty(r.prototype,"power",{get:function(){return this._power},set:function(e){this._power=e},enumerable:!0,configurable:!0}),r.prototype.onGameEvent=function(e){if(e.userId!=DataCenter.instance.user.id){var t=function(e){var t=e.split("|");return t},r=t(e.event);switch(r[0]){case"pressBegin":this.userCharacter.play("xuli");break;case"jump":if(this.isPlay){var a={power:parseFloat(r[1]),webScore:parseFloat(r[2])};this.commandList.push(a)}else this.power=parseFloat(r[1]),r[2]&&(this.webSocre=parseInt(r[2])),this.jump();break;case"offset":this.offsetS2C=parseFloat(r[1])}}},Object.defineProperty(r.prototype,"currentPlatform",{get:function(){return this._currentPlatform},set:function(e){this._currentPlatform=e,this.userCharacter.gotoAndStopByProgress("xuli",0),this.target=GameLongJumpView.instance.platformController.creatNext(this._currentPlatform),this.target.offsetFromLast=GameLongJumpView.instance.platformController.getPlatformOffset(this._currentPlatform,this.target);var t=this.getSlopeOrDir();t.dir?this.userCharacter.scaleX=1:this.userCharacter.scaleX=-1},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){egret.Tween.removeTweens(this.userCharacter),DataCenter.instance.room.IsAI?this.ai.dispose():App.MessageCenter.removeListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this),App.TimerManager.removeAll(this)},r}(e.CharacterController);e.CompetitorController=t,__reflect(t.prototype,"GameLongJump.CompetitorController")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t=function(){function e(){}return e.prototype.init=function(){this.selfContainner=new egret.DisplayObjectContainer,this.comContainner=new egret.DisplayObjectContainer,this.winContainner=new egret.DisplayObjectContainer,this.loseContainner=new egret.DisplayObjectContainer,this.mask=AssetManager.getBitmap("longJump_blackMask_png",!1,!1),this.mask.width=App.GameWidth,this.mask.height=App.GameHeight,this.mask.anchorOffsetX=this.mask.width/2,this.mask.anchorOffsetY=this.mask.height/2,this.mask.alpha=.5,DataCenter.instance.room.selfIsMaster?(this.winImage=AssetManager.getBitmap("winGreen_png"),this.loseImage=AssetManager.getBitmap("loseRed_png"),this.selfScoreBG=AssetManager.getBitmap("green_png"),this.comScoreBg=AssetManager.getBitmap("red_png"),this.selfHeadBg=AssetManager.getBitmap("headBg_green_png"),this.comHeadBg=AssetManager.getBitmap("headBg_red_png")):(this.winImage=AssetManager.getBitmap("winRed_png"),this.loseImage=AssetManager.getBitmap("loseGreen_png"),this.selfScoreBG=AssetManager.getBitmap("red_png"),this.comScoreBg=AssetManager.getBitmap("green_png"),this.comHeadBg=AssetManager.getBitmap("headBg_green_png"),this.selfHeadBg=AssetManager.getBitmap("headBg_red_png")),this.winImage.y=this.loseImage.y=-100,this.selfScoreBG.anchorOffsetX=this.selfScoreBG.width,this.comScoreBg.anchorOffsetX=0,this.selfHeadBg.x=this.selfScoreBG.x-this.selfScoreBG.width,this.selfHead=new RoleHeadImage(DataCenter.instance.user.imgUrl),this.selfHead.anchorOffsetX=this.selfHead.width/2,this.selfHead.anchorOffsetY=this.selfHead.height/2,this.selfHead.x=this.selfHeadBg.x,this.comHeadBg.x=this.comScoreBg.x+this.comScoreBg.width,this.comHead=new RoleHeadImage(DataCenter.instance.room.player.imgUrl),this.comHead.anchorOffsetX=this.comHead.width/2,this.comHead.anchorOffsetY=this.comHead.height/2,this.comHead.x=this.comHeadBg.x,this.selfScoreBG.y=this.comScoreBg.y=this.selfHeadBg.y=this.comHeadBg.y=this.selfHead.y=this.comHead.y=this.winImage.height/2+30,this.winTag=AssetManager.getBitmap("winTag_png")},e.prototype.initData=function(){this.selfScoreView=new egret.TextField;var e=GameLongJumpView.instance.stateController.selfScore;10>e?this.selfScoreView.text="0"+e:this.selfScoreView.text=e.toString(),this.selfScoreView.size=40,this.selfScoreView.anchorOffsetX=this.selfScoreView.measuredWidth,this.selfScoreView.anchorOffsetY=this.selfScoreView.measuredHeight/2,this.selfScoreView.x=-this.selfScoreBG.width/3,this.selfScoreView.y=this.winImage.height/2+30,this.comScoreView=new egret.TextField;var t=GameLongJumpView.instance.stateController.comScore;10>t?this.comScoreView.text="0"+t:this.comScoreView.text=t.toString(),this.comScoreView.size=40,this.comScoreView.anchorOffsetX=0,this.comScoreView.anchorOffsetY=this.comScoreView.measuredHeight/2,this.comScoreView.x=this.comScoreBg.width/3,this.comScoreView.y=this.winImage.height/2+30,this.selfContainner.addChild(this.selfScoreBG),this.comContainner.addChild(this.comScoreBg),this.selfContainner.addChild(this.selfHeadBg),this.comContainner.addChild(this.comHeadBg),this.selfContainner.addChild(this.selfHead),this.comContainner.addChild(this.comHead),this.selfContainner.addChild(this.selfScoreView),this.comContainner.addChild(this.comScoreView)},e.prototype.win=function(){this.initData(),this.winContainner.addChild(this.winImage),this.winContainner.addChild(this.selfContainner),this.winContainner.addChild(this.comContainner),this.winTag.anchorOffsetX=this.winTag.width,this.winTag.y=this.selfScoreBG.y-30,this.winTag.x=this.selfScoreBG.x,this.selfContainner.addChild(this.winTag),this.selfContainner.x=-350,egret.Tween.get(this.selfContainner).to({x:-20},300),this.comContainner.x=350,egret.Tween.get(this.comContainner).to({x:20},350),this.winContainner.addChildAt(this.mask,0),this.selfContainner.y=this.comContainner.y=-50,this.winContainner.x=App.GameWidth/2,this.winContainner.y=App.GameHeight/2,GameLongJumpView.instance.addChild(this.winContainner)},e.prototype.lose=function(e){void 0===e&&(e=!1),this.initData(),this.loseContainner.addChildAt(this.mask,0),this.loseContainner.addChild(this.loseImage),this.loseContainner.addChild(this.selfContainner),this.loseContainner.addChild(this.comContainner),this.winTag.anchorOffsetX=0,this.winTag.y=this.comScoreBg.y-30,this.winTag.x=this.comScoreBg.x,this.comContainner.addChild(this.winTag),this.selfContainner.x=-350,egret.Tween.get(this.selfContainner).to({x:-20},300),this.comContainner.x=350,egret.Tween.get(this.comContainner).to({x:20},300),this.selfContainner.y=this.comContainner.y=-50,this.loseContainner.x=App.GameWidth/2,this.loseContainner.y=App.GameHeight/2,GameLongJumpView.instance.addChild(this.loseContainner)},e.prototype.dispose=function(){},e}();e.GameLongJumpResult=t,__reflect(t.prototype,"GameLongJump.GameLongJumpResult")}(GameLongJump||(GameLongJump={}));var GameLongJumpView=function(e){function t(){var r=e.call(this)||this;return r.user1Ready=!1,r.user2Ready=!1,r.start=function(){r.user1Ready&&r.user2Ready&&r.readyGo.play()},r.sound=!1,r.onGameResult=function(e){DataCenter.instance.room.gameResult=e,console.log(DataCenter.instance.room.id+"号房收到结果为"+DataCenter.instance.user.id+":"+e.winUserId),r.stateController.selfScore>=60&&App.MessageCenter.dispatch(EventMessage.leaderboardSetScore,120-t.instance.stateController.time),App.TimerManager.doTimer(2e3,1,function(){r.popup("GameResult")},r)},r.pauseCallback=function(){App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,1),r.next("gameChangeMatch")},t.instance=r,r.gameLayer=new egret.DisplayObjectContainer,r.sceneItemLayer=new egret.DisplayObjectContainer,r.moveLayer=new egret.DisplayObjectContainer,r}return __extends(t,e),t.prototype.init=function(){var e=this;this.stateController=new GameLongJump.StateController,this.stateController.init();var r=CommonUtils.hashCodeAbs(DataCenter.instance.room.id)%10;this.randomConfig=RES.getRes("RandomConfig_json")[r],DataCenter.instance.room.IsAI||App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,"Map|"+r,2),this.random=new Math.seedrandom(DataCenter.instance.room.id+"random"),this.canJump=!1;var a=AssetManager.getBitmap("LongJumpBG_png",!1,!1);a.width=App.GameWidth,a.height=App.GameHeight,this.addChild(a),this.moveLayer.addChild(this.sceneItemLayer),this.moveLayer.addChild(this.gameLayer),this.addChild(this.moveLayer),this.comController=new GameLongJump.CompetitorController,this.comController.init(),this.userController=new GameLongJump.UserController,this.userController.init(),this.platformController=new GameLongJump.PlatformController,this.platformController.init(),this.addListener(),this.addChild(this.stateController),this.stateController.x=App.GameWidth/2,this.stateController.y=90,this.readyGo=new GameLongJump.LongJumpReady(function(){e.canJump=!0,DataCenter.instance.room.IsAI&&t.instance.comController.ai.AItouch(),e.stateController.timeStart(),DataCenter.instance.room.IsAI||App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,"readyGoOver",2)}),this.addChild(this.readyGo),this.readyGo.hide(),this.result=new GameLongJump.GameLongJumpResult,this.result.init(),App.IsXiaoMi||App.IsWanba||(this.returnToLastButton=AssetManager.getBitmap("goBack_png",!1,!1),this.returnToLastButton.y=19,this.addChild(this.returnToLastButton),this.returnToLastButton.touchEnabled=!0,this.returnToLastButton.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.popup("GameSureLeave")},this)),App.SoundManager.stopBg(),App.MessageCenter.addListener(EventMessage.ReceiveGameResultS2C,this.onGameResult,this);var o=AssetManager.getBitmap("longJump_tip_png",!1,!1);o.anchorOffsetX=0,o.anchorOffsetY=o.height,o.x=0,o.y=App.GameHeight-30,this.addChild(o),App.MessageCenter.addListener(EventMessage.pauseMessage,this.pauseCallback,this),DataCenter.instance.room.IsAI?this.readyGo.play():(App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this),App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,"ready",1))},t.prototype.onGameEvent=function(e){switch(e.event){case"ready":e.userId==DataCenter.instance.user.id?this.user1Ready=!0:this.user2Ready=!0,this.start()}},t.prototype.addListener=function(){this.touchChildren=this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.pressBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.pressEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.pressEnd,this)},t.prototype.pressBegin=function(){this.canJump&&(this.isPressBegin=!0,App.TimerManager.remove(this.touch,this),App.TimerManager.doTimer(100,0,this.touch,this),App.SoundManager.playEffect("longJump_powering_mp3",!0),DataCenter.instance.room.IsAI||App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,"pressBegin",2),this.userController.userCharacter.play("xuli",1))},t.prototype.touch=function(){return this.userController.power>GameLongJump.userConfig.powerLimit?void(this.sound||(App.SoundManager.playEffect("longJump_powerLimit_mp3",!0,0),this.sound=!0)):void(this.userController.power+=GameLongJump.userConfig.powerAdd)},t.prototype.pressEnd=function(){this.canJump&&this.isPressBegin&&(this.isPressBegin=!1,App.TimerManager.remove(this.touch,this),this.userController.jump(),this.sound=!1)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.userController.dispose(),this.platformController.dispose(),this.comController.dispose(),this.readyGo.dispose(),this.result.dispose(),this.stateController.dispose(),App.TimerManager.removeAll(this),DataCenter.instance.room.IsAI||(App.MessageCenter.removeListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this),App.MessageCenter.removeListener(EventMessage.ReceiveGameResultS2C,this.onGameResult,this)),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.pressBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.pressEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.pressEnd,this),App.MessageCenter.removeListener(EventMessage.pauseMessage,this.pauseCallback,this)},t}(State);__reflect(GameLongJumpView.prototype,"GameLongJumpView");var GameLongJump;!function(e){var t=function(e){function t(t){var r=e.call(this,t,"longJump_ready_png","longJump_go_png")||this;return r.bgmask=AssetManager.getBitmap("longJump_blackMask_png",!1,!1),r.title=AssetManager.getBitmap("readyGoTitle_png"),r.bgmask.width=App.GameWidth,r.bgmask.height=App.GameHeight,r.bgmask.alpha=.5,r.addChildAt(r.bgmask,0),r.imgReady.x=r.imgGo.x=r.title.x=App.GameWidth/2,r.imgReady.y=r.imgGo.y=App.GameHeight/2-50,r.title.y=App.GameHeight/2+50,r.addChild(r.title),r}return __extends(t,e),t.prototype.hide=function(){this.imgReady.alpha=0,this.imgGo.alpha=0,this.title.alpha=0,this.bgmask.alpha=0},t.prototype.play=function(){var e=this;this.hide(),App.SoundManager.playEffect("readyGo_mp3"),this.imgReady.alpha=1,this.bgmask.alpha=.5,this.title.alpha=1,this.stepReady=setTimeout(function(){e.hide(),e.imgGo.alpha=1,e.bgmask.alpha=.5,e.title.alpha=1,e.stepGo=setTimeout(function(){e.hide(),e._callback(),clearTimeout(e.stepGo),e.stepGo=void 0},500),clearTimeout(e.stepReady),e.stepReady=void 0},1e3)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.bgmask=void 0,this.title=void 0},t}(GameReady);e.LongJumpReady=t,__reflect(t.prototype,"GameLongJump.LongJumpReady")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t;!function(e){e[e.a=0]="a",e[e.g=1]="g",e[e.h=2]="h",e[e.i=3]="i",e[e.j=4]="j",e[e.m=5]="m",e[e.o=6]="o",e[e.q=7]="q",e[e.t=8]="t",e[e.z=9]="z",e[e.max_e=10]="max_e",e[e.max_q=11]="max_q",e[e.max_r=12]="max_r",e[e.max_t=13]="max_t",e[e.max_u=14]="max_u",e[e.max_w=15]="max_w",e[e.max_y=16]="max_y",e[e.k=17]="k",e[e.e=18]="e",e[e.l=19]="l",e[e.w=20]="w"}(t=e.PlatformType||(e.PlatformType={}));var r=function(e){function r(){return e.call(this)||this}return __extends(r,e),Object.defineProperty(r.prototype,"UID",{get:function(){return this._UID},enumerable:!0,configurable:!0}),r.prototype.init=function(e,r,a){if(void 0===a&&(a=!0),this.platformType!==e){switch(this._UID=r,this.platformType=e,this.platformType===t.max_e||this.platformType===t.max_q||this.platformType===t.max_r||this.platformType===t.max_t||this.platformType===t.max_u||this.platformType===t.max_w||this.platformType===t.max_y?(this.platformImg=AssetManager.getBitmap("longJump_"+t[this.platformType]+"1_png"),this.platformShadow=AssetManager.getBitmap("longJump_max_shadow_png")):(this.platformImg=AssetManager.getBitmap("Jump"+t[this.platformType]+"1_png"),this.platformShadow=AssetManager.getBitmap("Jump"+t[this.platformType]+"3_png")),this.collisionX=this.platformImg.anchorOffsetX=this.platformImg.width/2,this.platformImg.anchorOffsetY=this.platformImg.height,this.platformType){case t.a:this.collisionY=34,this.platformShadow.anchorOffsetY=34,this.offsetToEdge=32;break;case t.e:this.collisionY=24,this.platformShadow.anchorOffsetY=24,this.offsetToEdge=32;break;case t.g:this.collisionY=64,this.platformShadow.anchorOffsetY=64,this.offsetToEdge=67;break;case t.h:this.collisionY=42,this.platformShadow.anchorOffsetY=42,this.offsetToEdge=44;break;case t.i:this.collisionY=35,this.platformShadow.anchorOffsetY=35,this.offsetToEdge=36;break;case t.j:this.collisionY=35,this.platformShadow.anchorOffsetY=35,this.offsetToEdge=35;break;case t.k:this.collisionY=43,this.platformShadow.anchorOffsetY=64,this.offsetToEdge=42;break;case t.l:this.collisionY=43,this.platformShadow.anchorOffsetY=43,this.offsetToEdge=45;break;case t.m:this.collisionY=35,this.platformShadow.anchorOffsetY=35,this.offsetToEdge=35;break;case t.o:this.collisionY=64,this.platformShadow.anchorOffsetY=64,this.offsetToEdge=65;break;case t.q:this.collisionY=42,this.platformShadow.anchorOffsetY=42,this.offsetToEdge=59;break;case t.t:this.collisionY=50,this.platformShadow.anchorOffsetY=50,this.offsetToEdge=50;break;case t.w:this.collisionY=23,this.platformShadow.anchorOffsetY=23,this.offsetToEdge=31;break;case t.z:this.collisionY=36,this.platformShadow.anchorOffsetY=36,this.offsetToEdge=37;break;default:this.collisionY=65,this.platformShadow.anchorOffsetY=65,this.offsetToEdge=69}this.addChild(this.platformShadow),this.platformImg.name="platformImg",this.addChild(this.platformImg),a?(this.platformShadow.alpha=0,this.platformImg.y=-800,this.playCartoon()):this.platformShadow.y=this.platformImg.y
}},r.prototype.setXY=function(e,t){this.x=e,this.y=t+this.platformImg.height-this.collisionY,this.collisionX=e,this.collisionY=t},r.prototype.playCartoon=function(){var e=this;egret.Tween.get(this.platformImg).to({y:0},300).call(function(){e.platformShadow.alpha=1,e.platformShadow.y=e.platformImg.y})},r}(egret.DisplayObjectContainer);e.Platform=r,__reflect(r.prototype,"GameLongJump.Platform")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t=function(){function t(){this.worldOffsetX=0,this.worldOffsetY=0,this.platformList={},t.slope=28/180*Math.PI,t.itemSlope=.25*Math.PI}return t.prototype.init=function(){var t=ObjectPool.pop(e.Platform,"max_qPlatform");t.init(e.PlatformType.max_q,0,!1),t.setXY(150,700),GameLongJumpView.instance.gameLayer.addChildAt(t,0),this.platformList[t.UID]=t,GameLongJumpView.instance.userController.currentPlatform=t,GameLongJumpView.instance.userController.setPos(),GameLongJumpView.instance.comController.currentPlatform=t,GameLongJumpView.instance.comController.setPos(),this.moveWorld(GameLongJumpView.instance.userController.target,t)},t.prototype.creatNext=function(t){var r=t.UID+1;if(this.platformList[r])return this.platformList[r];var a=this.getPlatformPos(t),o=this.getPlatformType(),i=ObjectPool.pop(e.Platform,e.PlatformType[o]+"Platform");return i.init(o,r,!0),i.setXY(a.x,a.y),i.offsetFromLast=a.offset,GameLongJumpView.instance.gameLayer.addChildAt(i,0),this.platformList[i.UID]=i,this.creatSceneItems(i),i},t.prototype.moveWorld=function(e,t){var r=(e.x+t.x)/2,a=(e.y+t.y)/2;egret.Tween.get(GameLongJumpView.instance.moveLayer).to({x:-r+App.GameWidth/2,y:-a+App.GameHeight/2},500,egret.Ease.sineIn),this.worldOffsetX=-r+App.GameWidth/2,this.worldOffsetY=-a+App.GameHeight/2},t.prototype.getPlatformPos=function(e){var r,a,o=GameLongJumpView.instance.randomConfig.shift();.5>o?(r=MathUtils.reserveDecimal((o+.5)*t.MaxOffset,2),a=-r*Math.cos(t.slope)):(r=MathUtils.reserveDecimal(o*t.MaxOffset,2),a=r*Math.cos(t.slope));var i=e.collisionX+MathUtils.reserveDecimal(a,2),s=e.collisionY-MathUtils.reserveDecimal(r*Math.sin(t.slope),2);return{x:i,y:s,offset:r}},t.prototype.getPlatformType=function(){var t=GameLongJumpView.instance.randomConfig.shift();return.1>t?e.PlatformType.max_e:.2>t?e.PlatformType.max_q:.3>t?e.PlatformType.max_r:.4>t?e.PlatformType.max_t:.5>t?e.PlatformType.max_u:.6>t?e.PlatformType.max_w:.7>t?e.PlatformType.max_y:.72>t?e.PlatformType.a:.74>t?e.PlatformType.h:.76>t?e.PlatformType.i:.78>t?e.PlatformType.j:.8>t?e.PlatformType.m:.82>t?e.PlatformType.o:.84>t?e.PlatformType.q:.86>t?e.PlatformType.t:.88>t?e.PlatformType.g:.9>t?e.PlatformType.z:.92>t?e.PlatformType.e:.94>t?e.PlatformType.l:.96>t?e.PlatformType.k:.98>t?e.PlatformType.w:e.PlatformType.max_e},t.prototype.getPlatformOffset=function(e,t){var r=Math.sqrt((t.collisionY-e.collisionY)*(t.collisionY-e.collisionY)+(t.collisionX-e.collisionX)*(t.collisionX-e.collisionX));return MathUtils.reserveDecimal(r,2)},t.prototype.creatSceneItems=function(e){var t=GameLongJumpView.instance.random(),r=this.creatSceneItem();.5>t?(r.x=e.x-100*(t+.5),r.y=e.y-e.platformImg.height-(150*t+.5)):(r.x=e.x+100*t,r.y=e.y+150*t),r.alpha=0,egret.Tween.get(r).to({alpha:1},1e3),GameLongJumpView.instance.sceneItemLayer.addChildAt(r,0)},t.prototype.creatSceneItem=function(){var e=this.getSceneItemType();return AssetManager.getBitmap("bj"+e+"_png")},t.prototype.getSceneItemType=function(){var e=GameLongJumpView.instance.random();return.7>e?2:5},t.prototype.dispose=function(){ObjectPool.clearClass("max_ePlatform"),ObjectPool.clearClass("max_yPlatform"),ObjectPool.clearClass("max_uPlatform"),ObjectPool.clearClass("max_yPlatform"),ObjectPool.clearClass("max_rPlatform"),ObjectPool.clearClass("max_qPlatform"),ObjectPool.clearClass("max_ePlatform"),ObjectPool.clearClass("kPlatform"),ObjectPool.clearClass("ePlatform"),ObjectPool.clearClass("lPlatform"),ObjectPool.clearClass("wPlatform"),ObjectPool.clearClass("aPlatform"),ObjectPool.clearClass("gPlatform"),ObjectPool.clearClass("hPlatform"),ObjectPool.clearClass("iPlatform"),ObjectPool.clearClass("jPlatform"),ObjectPool.clearClass("mPlatform"),ObjectPool.clearClass("oPlatform"),ObjectPool.clearClass("qPlatform"),ObjectPool.clearClass("tPlatform"),ObjectPool.clearClass("zPlatform"),egret.Tween.removeTweens(GameLongJumpView.instance.gameLayer)},t.MaxOffset=400,t}();e.PlatformController=t,__reflect(t.prototype,"GameLongJump.PlatformController")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.isOver=!1,e.timeOver=function(){e._time--,e.timeView.text=e._time.toString(),e._time<=0&&(e._selfScore>e._comScore?e.isWin=!0:e._selfScore<e._comScore?App.TimerManager.doTimer(100,1,function(){App.SoundManager.playEffect("longJump_lose_wav",!0),App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,1),console.log(DataCenter.instance.room.id+"号房发送结果为"+DataCenter.instance.user.id+":1"),GameLongJumpView.instance.result.lose(!0)},e):DataCenter.instance.user.id>DataCenter.instance.room.player.id?e.isWin=!0:e.isWin=!1,App.TimerManager.remove(e.timeOver,e))},e}return __extends(r,t),r.prototype.init=function(){var e,t;DataCenter.instance.room.selfIsMaster?(this.selfScoreBG=AssetManager.getBitmap("green_png"),this.comScoreBg=AssetManager.getBitmap("red_png"),e=AssetManager.getBitmap("headBg_green_png"),t=AssetManager.getBitmap("headBg_red_png")):(this.selfScoreBG=AssetManager.getBitmap("red_png"),this.comScoreBg=AssetManager.getBitmap("green_png"),t=AssetManager.getBitmap("headBg_green_png"),e=AssetManager.getBitmap("headBg_red_png")),this.selfScoreBG.anchorOffsetX=this.selfScoreBG.width,this.comScoreBg.anchorOffsetX=0,this.addChild(this.selfScoreBG),this.addChild(this.comScoreBg),e.x=this.selfScoreBG.x-this.selfScoreBG.width;var r=new RoleHeadImage(DataCenter.instance.user.imgUrl);r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.x=e.x,t.x=this.comScoreBg.x+this.comScoreBg.width;var a=new RoleHeadImage(DataCenter.instance.room.player.imgUrl);a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=t.x,this.addChild(e),this.addChild(t),this.addChild(r),this.addChild(a),this.selfScoreView=new egret.TextField,this.selfScoreView.text="00",this.selfScoreView.size=40,this.selfScoreView.anchorOffsetX=this.selfScoreView.measuredWidth,this.selfScoreView.anchorOffsetY=this.selfScoreView.measuredHeight/2,this.selfScoreView.x=-this.selfScoreBG.width/3,this.addChild(this.selfScoreView),this.comScoreView=new egret.TextField,this.comScoreView.text="00",this.comScoreView.size=40,this.comScoreView.anchorOffsetX=0,this.comScoreView.anchorOffsetY=this.comScoreView.measuredHeight/2,this.comScoreView.x=this.comScoreBg.width/3,this.addChild(this.comScoreView);var o=AssetManager.getBitmap("longJump_TimeBG_png");o.scaleX=o.scaleY=1.2,this.addChild(o);var i=AssetManager.getBitmap("readyGoTitle_png");i.anchorOffsetY=i.height,i.y=.6*-o.height,this.addChild(i),this._selfScore=0,this._comScore=0,this.timeView=new egret.BitmapText,this.timeView.font=RES.getRes("longJump_number_fnt"),this.timeView.width=102,this.timeView.height=50,this.timeView.letterSpacing=-5,this.timeView.anchorOffsetX=51,this.timeView.anchorOffsetY=25,this.timeView.textAlign=egret.HorizontalAlign.CENTER,this.timeView.alpha=1,this.timeView.text="120",this.addChild(this.timeView),DataCenter.instance.room.IsAI||App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this)},r.prototype.onGameEvent=function(e){var t=function(e){var t=e.split("|");return t},r=t(e.event);switch(r[0]){case"Score":DataCenter.instance.user.id==r[1]?this.selfScore=parseInt(r[2]):this.comScore=parseInt(r[2])}},Object.defineProperty(r.prototype,"selfScore",{get:function(){return this._selfScore},set:function(t){0>t||(this._selfScore=t,this._selfScore>=10?this.selfScoreView.text=this._selfScore.toString():this.selfScoreView.text="0"+this._selfScore,this._selfScore>=e.userConfig.score&&!this.isOver&&(this.isWin=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isWin",{set:function(e){this.isOver=!0,App.TimerManager.doTimer(100,1,function(){e?(App.SoundManager.playEffect("longJump_sccess_mp3",!0),App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,3),GameLongJumpView.instance.result.win()):(App.SoundManager.playEffect("longJump_lose_wav",!0),App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,1),GameLongJumpView.instance.result.lose())},this),App.TimerManager.remove(this.timeOver,this)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"comScore",{get:function(){return this._comScore},set:function(t){0>t&&isNaN(t)||(this._comScore=t,this._comScore>=10?this.comScoreView.text=this._comScore.toString():this.comScoreView.text="0"+this._comScore,this._comScore>=e.userConfig.score&&!this.isOver&&(this.isWin=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),r.prototype.timeStart=function(){this._time=120,App.TimerManager.doTimer(1e3,0,this.timeOver,this)},r.prototype.dispose=function(){App.TimerManager.removeAll(this),DataCenter.instance.room.IsAI||App.MessageCenter.removeListener(EventMessage.ReceiveGameEventS2C,this.onGameEvent,this)},r}(egret.DisplayObjectContainer);e.StateController=t,__reflect(t.prototype,"GameLongJump.StateController")}(GameLongJump||(GameLongJump={}));var GameLongJump;!function(e){var t=function(e){function t(t){var r=e.call(this,t)||this;return r.directionLOrR=0,r.directionPosL1_X=0,r.directionPosL1_Y=0,r.directionPosL2_X=0,r.directionPosL2_Y=0,r.directionPosL3_X=0,r.directionPosL3_Y=0,r.directionPosR1_X=0,r.directionPosR1_Y=0,r.directionPosR2_X=0,r.directionPosR2_Y=0,r.directionPosR3_X=0,r.directionPosR3_Y=0,r}return __extends(t,e),Object.defineProperty(t.prototype,"factorOne",{get:function(){return 0},set:function(e){return 1==this.directionLOrR?(this.x=(1-e)*(1-e)*this.directionPosL1_X+2*e*(1-e)*this.directionPosL2_X+e*e*this.directionPosL3_X,void(this.y=(1-e)*(1-e)*this.directionPosL1_Y+2*e*(1-e)*this.directionPosL2_Y+e*e*this.directionPosL3_Y)):(this.x=(1-e)*(1-e)*this.directionPosR1_X+2*e*(1-e)*this.directionPosR2_X+e*e*this.directionPosR3_X,void(this.y=(1-e)*(1-e)*this.directionPosR1_Y+2*e*(1-e)*this.directionPosR2_Y+e*e*this.directionPosR3_Y))},enumerable:!0,configurable:!0}),t}(DBArmature);e.Character=t,__reflect(t.prototype,"GameLongJump.Character")}(GameLongJump||(GameLongJump={}));