var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var m in t)t.hasOwnProperty(m)&&(e[m]=t[m]);a.prototype=t.prototype,e.prototype=new a},GameRhythmKingEventClass=function(){function e(){}return e.EVENT_CHOOSE_SETTINGS="choose",e.EVEVT_READY="ready",e.EVENT_PER="per",e.EVENT_NOR="nor",e.EVENT_GOOD="good",e.EVENT_LOSE="lose",e.EVENT_MUSIC_END="end",e.rkMessagerCenter=function(t){if(1!=GameRhythmKingLogic.isOffline)switch(t){case e.EVENT_CHOOSE_SETTINGS:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_CHOOSE_SETTINGS+"|"+GameRhythmKingLogic.randomChoose(),1);break;case e.EVEVT_READY:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVEVT_READY);break;case e.EVENT_PER:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_PER);break;case e.EVENT_NOR:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_NOR);break;case e.EVENT_GOOD:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_GOOD);break;case e.EVENT_LOSE:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_LOSE);break;case e.EVENT_MUSIC_END:App.MessageCenter.dispatch(EventMessage.SendGameEventC2S,e.EVENT_MUSIC_END)}},e.dispose=function(){},e}();__reflect(GameRhythmKingEventClass.prototype,"GameRhythmKingEventClass");var GameRhythmKingItemClass=function(){function e(){}return e.backGroundMusicPlayer=new SoundEffects,e.runningSec=-180,e.speedSupplement=180,e.settingsIndex=0,e.usingSetting=[],e.pointYou=new egret.TextField,e.pointOther=new egret.TextField,e.pointYouNumber=0,e.pointOtherNumber=0,e.comboYou=0,e.comboOther=0,e.recycleArray=[],e.blockArray=[],e.blockOtherArray=[],e.blockYouHeight=0,e.blockOtherHeight=0,e.blockItemSettingsArray=[],e.blockItemSettingsOtherArray=[],e.comboYouText=new egret.BitmapText,e.comboOtherText=new egret.BitmapText,e.rhythmSumPast=1,e.rhythmSumNum=0,e.rhythmYouPast=1,e.rhythmOtherPast=1,e.readyState=[0,0],e.gameOverState=[0,0],e.stars=[],e.gameLevel=0,e.highestYouCombo=0,e.highestOtherCombo=0,e.perNumYou=0,e.perNumOther=0,e.goodNumYou=0,e.goodNumOther=0,e.norNumYou=0,e.norNumOther=0,e.resultYouText=[],e.resultOtherText=[],e.AiRandom=0,e.rippleArray=[],e.dispose=function(){e.backGroundLeft=void 0,e.backGroundRight=void 0,e.backGroundLeft_=void 0,e.backGroundRight_=void 0,e.otherBtn=void 0,e.multiple=void 0,e.backGroundMusicPlayer=void 0,e.runningSec=-300,e.speedSupplement=300,e.settingsIndex=0,e.usingSetting=[],e.rkLine=void 0,e.rkLineMask=void 0,e.blockBack=void 0,e.blockFront=void 0,e.you=void 0,e.pointBoardYou=void 0,e.pointBoardOther=void 0,e.pointYou=new egret.TextField,e.pointOther=new egret.TextField,e.roadBatholith=void 0,e.pointYouNumber=0,e.pointOtherNumber=0,e.comboYou=0,e.comboOther=0,e.roadBeatCenter=void 0,e.comboType=void 0,e.comboOtherType=void 0,e.tapTimeStamp=void 0,e.judgeItem=void 0,e.recycleArray=[],e.blockArray=[],e.blockOtherArray=[],e.blockYouHeight=0,e.blockOtherHeight=0,e.blockItemSettingsArray=[],e.blockItemSettingsOtherArray=[],e.comboYouImage=void 0,e.comboOtherImage=void 0,e.comboYouText=new egret.BitmapText,e.comboOtherText=new egret.BitmapText,e.headIcoYou=void 0,e.headIcoOther=void 0,e.sideFold=void 0,e.sideProgress=void 0,e.rhythmSumPast=1,e.rhythmSumNum=0,e.rhythmYouPast=1,e.rhythmOtherPast=1,e.otherRoleAvatar=void 0,e.myRoleAvatar=void 0,e.keyPressSoundEffect=void 0,e.gameReady=void 0,e.choice=void 0,e.readyState=[0,0],e.jumpRoleYou=void 0,e.jumpRoleOther=void 0,e.sparkLeft=void 0,e.sparkRight=void 0,e.gameOverState=[0,0],e.alaphaMask=void 0,e.bottomSide=void 0,e.waitingSceneMask=void 0,e.waitingText=void 0,e.starBoard=void 0,e.stars=[],e.gameLevel=0,e.whiteFont=void 0,e.highestYouCombo=0,e.highestOtherCombo=0,e.perNumYou=0,e.perNumOther=0,e.goodNumYou=0,e.goodNumOther=0,e.norNumYou=0,e.norNumOther=0,e.musicPlaying=void 0,e.resultYouBoard=void 0,e.resultOtherBoard=void 0,e.resultYouText=[],e.resultOtherText=[],e.sunShineYou=void 0,e.sunShineOther=void 0,e.loseBlockYou=void 0,e.loseBlockOther=void 0,e.AiRandom=0,e.rippleArray=[],e.topSide=void 0},e}();__reflect(GameRhythmKingItemClass.prototype,"GameRhythmKingItemClass");var GameRhythmKingLogic=function(){function e(){}return e.gameOver=function(e){App.MessageCenter.dispatch(EventMessage.SendGameResultC2S,e)},e.isOffline=!1,e.animationItem=[],e.itemCache=[],e.shiftingManager=function(e){var t;switch(e){case"perfect":t=2*Math.random(),t=parseInt(t.toString(),10);break;case"good":t=4*Math.random()+2,t=parseInt(t.toString(),10);break;case"normal":t=6*Math.random()+6,t=parseInt(t.toString(),10)}var a=Math.random();return a>.5&&(t*=-1),t},e.backgroundYManager=function(e){var t,a;switch(e){case!0:t=egret.Tween.get(GameRhythmKingItemClass.backGroundLeft),t.to({y:GameRhythmKingItemClass.backGroundLeft.y+2864/(GameRhythmKingItemClass.usingSetting.length-1)},50),t.call(function(){t=null}),a=egret.Tween.get(GameRhythmKingItemClass.backGroundLeft_),a.to({y:GameRhythmKingItemClass.backGroundLeft_.y+2864/(GameRhythmKingItemClass.usingSetting.length-1)},50),a.call(function(){a=null});break;case!1:t=egret.Tween.get(GameRhythmKingItemClass.backGroundRight),t.to({y:GameRhythmKingItemClass.backGroundRight.y+2864/(GameRhythmKingItemClass.usingSetting.length-1)},50),t.call(function(){t=null}),a=egret.Tween.get(GameRhythmKingItemClass.backGroundRight_),a.to({y:GameRhythmKingItemClass.backGroundRight_.y+2864/(GameRhythmKingItemClass.usingSetting.length-1)},50),a.call(function(){a=null})}},e.displayManager=function(t,a){var m=function(){App.TimerManager.doTimer(200,1,function(){GameRhythmKingItemClass.comboOtherType.alpha=0},e)},s=function(t){e.setTimeOut&&clearTimeout(e.setTimeOut),t||(GameRhythmKingItemClass.roadBeatCenter.anchorOffsetX=50,GameRhythmKingItemClass.roadBeatCenter.anchorOffsetY=50,GameRhythmKingItemClass.roadBeatCenter.texture=AssetManager.getBitmap("RK_road_beatCenterBEAT_png",!0,!0).texture),e.setTimeOut=setTimeout(function(){GameRhythmKingItemClass.roadBeatCenter.texture=AssetManager.getBitmap("RK_road_beatCenter_png",!0,!0).texture,GameRhythmKingItemClass.roadBeatCenter.anchorOffsetX=36,GameRhythmKingItemClass.roadBeatCenter.anchorOffsetY=36,GameRhythmKingItemClass.rkLineMask.texture=AssetManager.getBitmap("RK_road_normal_jpg",!0,!0).texture,GameRhythmKingItemClass.comboType.alpha=0},200)};switch(a){case 0:switch(GameRhythmKingItemClass.comboType.x=147.5,GameRhythmKingItemClass.comboType.y=1136-GameRhythmKingItemClass.blockYouHeight+80,t){case"normal":GameRhythmKingItemClass.rkLineMask.texture=AssetManager.getBitmap("RK_road_white_png",!0,!0).texture,GameRhythmKingItemClass.comboType.texture=AssetManager.getBitmap("RK_normal_png",!0,!0).texture,GameRhythmKingItemClass.comboType.alpha=1,s(),e.backgroundYManager(!0);break;case"perfect":GameRhythmKingItemClass.rkLineMask.texture=AssetManager.getBitmap("RK_road_yellow_png",!0,!0).texture,GameRhythmKingItemClass.comboType.texture=AssetManager.getBitmap("RK_perfect_png",!0,!0).texture,GameRhythmKingItemClass.comboType.alpha=1,s(),e.backgroundYManager(!0);break;case"good":GameRhythmKingItemClass.rkLineMask.texture=AssetManager.getBitmap("RK_road_red_png",!0,!0).texture,GameRhythmKingItemClass.comboType.texture=AssetManager.getBitmap("RK_pointgood_png",!0,!0).texture,GameRhythmKingItemClass.comboType.alpha=1,s(),e.backgroundYManager(!0);break;case"lose":GameRhythmKingItemClass.comboType.texture=AssetManager.getBitmap("RK_miss_png",!0,!0).texture,GameRhythmKingItemClass.comboType.alpha=1,s(1)}break;case 1:switch(GameRhythmKingItemClass.comboOtherType.x=492.5,GameRhythmKingItemClass.comboOtherType.y=1136-GameRhythmKingItemClass.blockOtherHeight+80,t){case"normal":GameRhythmKingItemClass.comboOtherType.texture=AssetManager.getBitmap("RK_normal_png",!0,!0).texture,GameRhythmKingItemClass.comboOtherType.alpha=1,e.backgroundYManager(!1),m();break;case"perfect":GameRhythmKingItemClass.comboOtherType.texture=AssetManager.getBitmap("RK_perfect_png",!0,!0).texture,GameRhythmKingItemClass.comboOtherType.alpha=1,e.backgroundYManager(!1),m();break;case"good":GameRhythmKingItemClass.comboOtherType.texture=AssetManager.getBitmap("RK_pointgood_png",!0,!0).texture,GameRhythmKingItemClass.comboOtherType.alpha=1,e.backgroundYManager(!1),m();break;case"lose":GameRhythmKingItemClass.comboOtherType.texture=AssetManager.getBitmap("RK_miss_png",!0,!0).texture,GameRhythmKingItemClass.comboOtherType.alpha=1,m()}}},e.blockHeightSwitcher=function(e){switch(e){case 132:return 43;case 110:return 21;case 99:return 10}},e.sunShineOtherManager=function(){e.sunShineOtherTO&&clearTimeout(e.sunShineOtherTO),e.sunShineOtherTO=setTimeout(function(){GameRhythmKingItemClass.sunShineOther.alpha=0},200),GameRhythmKingItemClass.sunShineOther.alpha=1},e.tap=function(){e.sunShineYouTO&&clearTimeout(e.sunShineYouTO),e.sunShineYouTO=setTimeout(function(){GameRhythmKingItemClass.sunShineYou.alpha=0},200),GameRhythmKingItemClass.sunShineYou.alpha=1,GameRhythmKingItemClass.tapTimeStamp=GameRhythmKingItemClass.runningSec,GameRhythmKingItemClass.keyPressSoundEffect.play("RK_keyPress_mp3",!0)},e.rhythmSumManager=function(){GameRhythmKingItemClass.sideProgress.scaleY=GameRhythmKingItemClass.rhythmSumPast/GameRhythmKingItemClass.rhythmSumNum,GameRhythmKingItemClass.otherRoleAvatar.armature.y=1100-GameRhythmKingItemClass.rhythmOtherPast/GameRhythmKingItemClass.rhythmSumNum*944,GameRhythmKingItemClass.myRoleAvatar.armature.y=1100-GameRhythmKingItemClass.rhythmYouPast/GameRhythmKingItemClass.rhythmSumNum*944},e.AITick=function(){GameRhythmKingItemClass.AiRandom=Math.random(),GameRhythmKingItemClass.AiRandom>=0&&GameRhythmKingItemClass.AiRandom<=.3?(e.sunShineOtherManager(),GameRhythmKingItemClass.rhythmOtherPast+=1,GameRhythmKingItemClass.comboOther=0,GameRhythmKingItemClass.norNumOther+=1,GameRhythmKingItemClass.pointOtherNumber+=10+GameRhythmKingItemClass.comboOther,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),GameRhythmKingItemClass.blockItemSettingsOtherArray.push([1,"normal"])):GameRhythmKingItemClass.AiRandom>.3&&GameRhythmKingItemClass.AiRandom<=.6?(e.sunShineOtherManager(),GameRhythmKingItemClass.comboOther=0,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),e.displayManager("lose",1),GameRhythmKingMainScene.loseBlockManager(1)):GameRhythmKingItemClass.AiRandom>.6&&GameRhythmKingItemClass.AiRandom<=.9?(e.sunShineOtherManager(),GameRhythmKingItemClass.rhythmOtherPast+=1,GameRhythmKingItemClass.comboOther+=1,GameRhythmKingItemClass.comboOther>GameRhythmKingItemClass.highestOtherCombo&&(GameRhythmKingItemClass.highestOtherCombo=GameRhythmKingItemClass.comboOther),GameRhythmKingItemClass.goodNumOther+=1,GameRhythmKingItemClass.pointOtherNumber+=20+GameRhythmKingItemClass.comboOther,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),GameRhythmKingItemClass.blockItemSettingsOtherArray.push([1,"good"])):GameRhythmKingItemClass.AiRandom>.9&&GameRhythmKingItemClass.AiRandom<=1&&(e.sunShineOtherManager(),GameRhythmKingItemClass.rhythmOtherPast+=1,GameRhythmKingItemClass.comboOther+=1,GameRhythmKingItemClass.comboOther>GameRhythmKingItemClass.highestOtherCombo&&(GameRhythmKingItemClass.highestOtherCombo=GameRhythmKingItemClass.comboOther),GameRhythmKingItemClass.perNumOther+=1,GameRhythmKingItemClass.pointOtherNumber+=30+GameRhythmKingItemClass.comboOther,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),GameRhythmKingItemClass.blockItemSettingsOtherArray.push([1,"perfect"]))},e.compareTick=function(){if(void 0!=GameRhythmKingItemClass.tapTimeStamp&&void 0!=GameRhythmKingItemClass.judgeItem){var t=GameRhythmKingItemClass.judgeItem-GameRhythmKingItemClass.tapTimeStamp;t>=0&&5>=t?(GameRhythmKingItemClass.tapTimeStamp=void 0,GameRhythmKingItemClass.judgeItem=void 0,GameRhythmKingItemClass.rhythmYouPast+=1,GameRhythmKingItemClass.comboYou+=1,GameRhythmKingItemClass.comboYou>GameRhythmKingItemClass.highestYouCombo&&(GameRhythmKingItemClass.highestYouCombo=GameRhythmKingItemClass.comboYou),GameRhythmKingItemClass.perNumYou+=1,GameRhythmKingItemClass.pointYouNumber+=30+GameRhythmKingItemClass.comboYou,GameRhythmKingItemClass.pointYou.text=GameRhythmKingItemClass.pointYouNumber.toString(),GameRhythmKingItemClass.blockItemSettingsArray.push([0,"perfect"]),GameRhythmKingEventClass.rkMessagerCenter(GameRhythmKingEventClass.EVENT_PER),GameRhythmKingItemClass.rippleArray.push("per")):t>0&&10>=t?(GameRhythmKingItemClass.tapTimeStamp=void 0,GameRhythmKingItemClass.judgeItem=void 0,GameRhythmKingItemClass.rhythmYouPast+=1,GameRhythmKingItemClass.comboYou+=1,GameRhythmKingItemClass.comboYou>GameRhythmKingItemClass.highestYouCombo&&(GameRhythmKingItemClass.highestYouCombo=GameRhythmKingItemClass.comboYou),GameRhythmKingItemClass.goodNumYou+=1,GameRhythmKingItemClass.pointYouNumber+=20+GameRhythmKingItemClass.comboYou,GameRhythmKingItemClass.pointYou.text=GameRhythmKingItemClass.pointYouNumber.toString(),GameRhythmKingItemClass.blockItemSettingsArray.push([0,"good"]),GameRhythmKingEventClass.rkMessagerCenter(GameRhythmKingEventClass.EVENT_GOOD),GameRhythmKingItemClass.rippleArray.push("good")):t>0&&14>=t?(GameRhythmKingItemClass.tapTimeStamp=void 0,GameRhythmKingItemClass.judgeItem=void 0,GameRhythmKingItemClass.rhythmYouPast+=1,GameRhythmKingItemClass.comboYou=0,GameRhythmKingItemClass.norNumYou+=1,GameRhythmKingItemClass.pointYouNumber+=10+GameRhythmKingItemClass.comboYou,GameRhythmKingItemClass.pointYou.text=GameRhythmKingItemClass.pointYouNumber.toString(),GameRhythmKingItemClass.blockItemSettingsArray.push([0,"normal"]),GameRhythmKingEventClass.rkMessagerCenter(GameRhythmKingEventClass.EVENT_NOR),GameRhythmKingItemClass.rippleArray.push("nor")):(GameRhythmKingItemClass.tapTimeStamp=void 0,GameRhythmKingItemClass.comboYou=0,e.displayManager("lose",0),GameRhythmKingEventClass.rkMessagerCenter(GameRhythmKingEventClass.EVENT_LOSE),GameRhythmKingMainScene.loseBlockManager(0))}return!1},e.randomChoose=function(){var e=Math.random();return e>0&&.333>=e?0:e>.333&&.666>=e?1:e>.666&&1>e?2:void 0},e.settingSwitcher=function(e){switch(e){case 0:GameRhythmKingItemClass.usingSetting=GameRhythmKingSettingsClass.settings1[1],GameRhythmKingItemClass.gameLevel=GameRhythmKingSettingsClass.settings1[0],GameRhythmKingItemClass.rhythmSumNum=GameRhythmKingItemClass.usingSetting.length,GameRhythmKingItemClass.musicPlaying="RK_music_1_mp3";break;case 1:GameRhythmKingItemClass.usingSetting=GameRhythmKingSettingsClass.settings2[1],GameRhythmKingItemClass.gameLevel=GameRhythmKingSettingsClass.settings2[0],GameRhythmKingItemClass.rhythmSumNum=GameRhythmKingItemClass.usingSetting.length,GameRhythmKingItemClass.musicPlaying="RK_music_2_mp3";break;case 2:GameRhythmKingItemClass.usingSetting=GameRhythmKingSettingsClass.settings3[1],GameRhythmKingItemClass.gameLevel=GameRhythmKingSettingsClass.settings3[0],GameRhythmKingItemClass.rhythmSumNum=GameRhythmKingItemClass.usingSetting.length,GameRhythmKingItemClass.musicPlaying="RK_music_3_mp3"}},e.animationManager=function(t,a,m,s,h){var n=s/60*1e3,i=e.nowTime+n,g=(m[0]-a[0])/n,o=(m[1]-a[1])/n;e.animationItem.push([t,n,e.nowTime,i,g,o,a,h])},e.animationTick=function(t){return e.nowTime=t,e.animationItem.length>0&&e.animationItem.forEach(function(a){var m=a[0],s=(a[1],a[2]),h=a[3],n=a[4],i=a[5],g=a[6],o=a[7];t>=h?(o&&o(),e.itemCache.push(m),m.alpha=0,e.animationItem.shift()):(m.x=g[0]+n*(t-s),m.y=g[1]+i*(t-s))}),!0},e.dispose=function(){e.isOffline=!1,e.setTimeOut=void 0,e.animationItem=[],e.itemCache=[],e.nowTime=void 0},e}();__reflect(GameRhythmKingLogic.prototype,"GameRhythmKingLogic");var GameRhythmKingMainScene=function(e){function t(){var a=e.call(this)||this;return a.youRoleRotation=0,a.otherRoleRotation=0,a.pointRecycleManager=function(){GameRhythmKingItemClass.recycleArray.length>30&&GameRhythmKingItemClass.recycleArray.forEach(function(e){a.removeChild(e)}),GameRhythmKingItemClass.recycleArray=[]},a.blockTickManager=function(){GameRhythmKingItemClass.blockItemSettingsArray.length>0&&a.blockManager(GameRhythmKingItemClass.blockItemSettingsArray[GameRhythmKingItemClass.blockItemSettingsArray.length-1][0],GameRhythmKingItemClass.blockItemSettingsArray[GameRhythmKingItemClass.blockItemSettingsArray.length-1][1]),GameRhythmKingItemClass.blockItemSettingsOtherArray.length>0&&a.blockManager(GameRhythmKingItemClass.blockItemSettingsOtherArray[GameRhythmKingItemClass.blockItemSettingsOtherArray.length-1][0],GameRhythmKingItemClass.blockItemSettingsOtherArray[GameRhythmKingItemClass.blockItemSettingsOtherArray.length-1][1])},a.addBlock=function(e,m,s,h){var n=0;switch(m){case 0:e.x=147.5+GameRhythmKingLogic.shiftingManager(h),GameRhythmKingItemClass.blockYouHeight+=s,n=1136-GameRhythmKingItemClass.blockYouHeight,e.y=300,GameRhythmKingItemClass.blockArray.push(e);break;case 1:e.x=492.5+GameRhythmKingLogic.shiftingManager(h),GameRhythmKingItemClass.blockOtherHeight+=s,n=1136-GameRhythmKingItemClass.blockOtherHeight,e.y=300,GameRhythmKingItemClass.blockOtherArray.push(e)}switch(a.addChild(e),GameRhythmKingItemClass.blockItemSettingsArray.length>0&&(GameRhythmKingLogic.displayManager(GameRhythmKingItemClass.blockItemSettingsArray[0][1],0),a.setChildIndex(GameRhythmKingItemClass.comboType,a.numChildren+1),a.scoreEffectManager(GameRhythmKingItemClass.blockItemSettingsArray[0][1],0)),GameRhythmKingItemClass.blockItemSettingsOtherArray.length>0&&(GameRhythmKingLogic.displayManager(GameRhythmKingItemClass.blockItemSettingsOtherArray[0][1],1),a.setChildIndex(GameRhythmKingItemClass.comboOtherType,a.numChildren+1),a.scoreEffectManager(GameRhythmKingItemClass.blockItemSettingsOtherArray[0][1],1)),m){case 0:a.youRoleRotation>=3&&(a.youRoleRotation=0);var i=void 0;i=a.rotationManager(a.youRoleRotation),a.youRoleRotation+=1,a.setChildIndex(GameRhythmKingItemClass.jumpRoleYou.armature,a.numChildren+4),egret.Tween.removeTweens(GameRhythmKingItemClass.jumpRoleYou.armature);var g=egret.Tween.get(GameRhythmKingItemClass.jumpRoleYou.armature);g.to({y:GameRhythmKingItemClass.jumpRoleYou.armature.y-40},20),g.to({y:1136-GameRhythmKingItemClass.blockYouHeight+40+2*t.effectiveHeight(GameRhythmKingItemClass.blockArray[1]),rotation:i},30);break;case 1:a.otherRoleRotation>=3&&(a.otherRoleRotation=0);var o=void 0;o=a.rotationManager(a.otherRoleRotation),a.otherRoleRotation+=1,a.setChildIndex(GameRhythmKingItemClass.jumpRoleOther.armature,a.numChildren+4),egret.Tween.removeTweens(GameRhythmKingItemClass.jumpRoleOther.armature);var r=egret.Tween.get(GameRhythmKingItemClass.jumpRoleOther.armature);r.to({y:GameRhythmKingItemClass.jumpRoleOther.armature.y-40},20),r.to({y:1136-GameRhythmKingItemClass.blockOtherHeight+40+2*t.effectiveHeight(GameRhythmKingItemClass.blockOtherArray[1]),rotation:o},30)}var l=egret.Tween.get(e);switch(l.to({y:n},100),m){case 0:App.TimerManager.doTimer(30,1,function(){GameRhythmKingItemClass.sparkLeft.x=147.5,GameRhythmKingItemClass.sparkLeft.y=n+t.effectiveHeight(GameRhythmKingItemClass.blockArray[1]),GameRhythmKingItemClass.sparkLeft.alpha=1,App.TimerManager.doTimer(65,1,function(){GameRhythmKingItemClass.sparkLeft.alpha=0},a)},a);break;case 1:App.TimerManager.doTimer(30,1,function(){GameRhythmKingItemClass.sparkRight.x=492.5,GameRhythmKingItemClass.sparkRight.y=n+t.effectiveHeight(GameRhythmKingItemClass.blockOtherArray[1]),GameRhythmKingItemClass.sparkRight.alpha=1,App.TimerManager.doTimer(65,1,function(){GameRhythmKingItemClass.sparkRight.alpha=0},a)},a)}l.call(function(){switch(m){case 0:if(GameRhythmKingItemClass.blockYouHeight>400){switch(GameRhythmKingItemClass.blockArray.forEach(function(e){var t=egret.Tween.get(e);t.to({y:e.y+GameRhythmKingLogic.blockHeightSwitcher(GameRhythmKingItemClass.blockArray[0].height)},50)}),GameRhythmKingItemClass.blockArray[0].height){case 132:GameRhythmKingItemClass.blockYouHeight-=43;break;case 110:GameRhythmKingItemClass.blockYouHeight-=21;break;case 99:GameRhythmKingItemClass.blockYouHeight-=10}GameRhythmKingItemClass.jumpRoleYou.armature.y+=GameRhythmKingLogic.blockHeightSwitcher(GameRhythmKingItemClass.blockArray[0].height),a.removeChild(GameRhythmKingItemClass.blockArray[0]),GameRhythmKingItemClass.blockArray.shift()}break;case 1:if(GameRhythmKingItemClass.blockOtherHeight>400){switch(GameRhythmKingItemClass.blockOtherArray.forEach(function(e){var t=egret.Tween.get(e);t.to({y:e.y+GameRhythmKingLogic.blockHeightSwitcher(GameRhythmKingItemClass.blockOtherArray[0].height)},50)}),GameRhythmKingItemClass.blockOtherArray[0].height){case 132:GameRhythmKingItemClass.blockOtherHeight-=43;break;case 110:GameRhythmKingItemClass.blockOtherHeight-=21;break;case 99:GameRhythmKingItemClass.blockOtherHeight-=10}GameRhythmKingItemClass.jumpRoleOther.armature.y+=GameRhythmKingLogic.blockHeightSwitcher(GameRhythmKingItemClass.blockOtherArray[0].height),a.removeChild(GameRhythmKingItemClass.blockOtherArray[0]),GameRhythmKingItemClass.blockOtherArray.shift()}}})},a.rotationManager=function(e){var t=0;switch(e){case 0:t=15;break;case 1:t=0;break;case 2:t=345}return t},a.blockManager=function(e,t){var m=new egret.Bitmap,s=0;switch(t){case"perfect":m=AssetManager.getBitmap("RK_block_perfect_png",!0,!1),s=43;break;case"good":m=AssetManager.getBitmap("RK_block_sliver_png",!0,!1),s=21;break;case"normal":m=AssetManager.getBitmap("RK_block_normal_png",!0,!1),s=10}switch(e){case 0:a.addBlock(m,0,s,t),GameRhythmKingItemClass.blockItemSettingsArray.shift();break;case 1:a.addBlock(m,1,s,t),GameRhythmKingItemClass.blockItemSettingsOtherArray.shift()}},a.gameProgressManager=function(){GameRhythmKingItemClass.usingSetting.length<=GameRhythmKingItemClass.rhythmSumPast&&(egret.startTick(a.endTick,a),App.TimerManager.doTimer(1e3,1,function(){GameRhythmKingItemClass.gameOverState[0]=1,egret.stopTick(a.tickLogic,a)},a),0==GameRhythmKingLogic.isOffline?GameRhythmKingEventClass.rkMessagerCenter(GameRhythmKingEventClass.EVENT_MUSIC_END):GameRhythmKingItemClass.gameOverState[1]=1)},a.rippleEffectManager=function(){if(GameRhythmKingItemClass.rippleArray.length>0){var e,t;switch(GameRhythmKingItemClass.rippleArray[0]){default:GameRhythmKingItemClass.rippleArray.shift(),e=AssetManager.getBitmap("RK_road_beatCenterRipple_png",!0,!0),e.x=320,e.y=865,e.alpha=1,a.addChild(e),t=egret.Tween.get(e),t.to({scaleX:3,scaleY:3,alpha:0},1e3),t.call(function(){a.removeChild(e),e=null,t=null})}}},a.tickLogic=function(e){return 0==GameRhythmKingItemClass.runningSec&&GameRhythmKingItemClass.backGroundMusicPlayer.play(GameRhythmKingItemClass.musicPlaying),a.judgePool(),a.itemMaker(),a.pointRecycleManager(),GameRhythmKingLogic.compareTick(),a.blockTickManager(),a.comboTextManager(),GameRhythmKingLogic.rhythmSumManager(),a.rippleEffectManager(),a.setChildIndex(GameRhythmKingItemClass.bottomSide,a.numChildren),a.setChildIndex(GameRhythmKingItemClass.alaphaMask,a.numChildren+2),a.getChildByName("backBtn")&&a.setChildIndex(a.getChildByName("backBtn"),a.numChildren+3),GameRhythmKingItemClass.runningSec+=1,a.gameProgressManager(),!0},a.judgePool=function(){GameRhythmKingItemClass.usingSetting.forEach(function(e){GameRhythmKingItemClass.runningSec==e-15&&(GameRhythmKingItemClass.judgeItem=e)})},a.pointRecycle=function(){GameRhythmKingLogic.itemCache.length>30&&(GameRhythmKingLogic.itemCache.forEach(function(e){a.removeChild(e)}),GameRhythmKingLogic.itemCache=[])},a.itemMaker=function(){GameRhythmKingItemClass.usingSetting.forEach(function(e){if(e==GameRhythmKingItemClass.runningSec+GameRhythmKingItemClass.speedSupplement){var t=AssetManager.getBitmap("RK_beat_png",!0,!0);t.x=320,t.y=0,a.addChildAt(t,9),GameRhythmKingLogic.animationManager(t,[t.x,t.y],[t.x,875],GameRhythmKingItemClass.speedSupplement,function(){1==GameRhythmKingLogic.isOffline&&GameRhythmKingLogic.AITick(),a.pointRecycle(),GameRhythmKingItemClass.rhythmSumPast+=1})}})},a.scoreEffectManager=function(e,t){var m;switch(t){case 0:switch(e){case"normal":m=AssetManager.getBitmap("RK_point10_png",!0,!1);break;case"perfect":m=AssetManager.getBitmap("RK_point30_png",!0,!1);break;case"good":m=AssetManager.getBitmap("RK_point20_png",!0,!1);break;case"lose":}m.x=138.5,m.y=230;break;case 1:switch(e){case"normal":m=AssetManager.getBitmap("RK_point10_png",!0,!1);break;case"perfect":m=AssetManager.getBitmap("RK_point30_png",!0,!1);break;case"good":m=AssetManager.getBitmap("RK_point20_png",!0,!1);break;case"lose":}m.x=500,m.y=230}a.addChild(m);var s=egret.Tween.get(m);s.to({scaleX:1.3,scaleY:1.3},200),s.to({scaleX:1,scaleY:1},300),s.to({y:150,alpha:.1,scaleX:.8,scaleY:.8},1e3),s.call(function(){a.removeChild(m)})},a.comboTextManager=function(){GameRhythmKingItemClass.comboYou>=2?(GameRhythmKingItemClass.comboYouText.alpha=1,GameRhythmKingItemClass.comboYouImage.alpha=1,GameRhythmKingItemClass.comboYouText.text=GameRhythmKingItemClass.comboYou.toString()):GameRhythmKingItemClass.comboYou<2&&(GameRhythmKingItemClass.comboYouText.alpha=0,GameRhythmKingItemClass.comboYouImage.alpha=0),GameRhythmKingItemClass.comboOther>=2?(GameRhythmKingItemClass.comboOtherText.alpha=1,GameRhythmKingItemClass.comboOtherImage.alpha=1,GameRhythmKingItemClass.comboOtherText.text=GameRhythmKingItemClass.comboOther.toString()):GameRhythmKingItemClass.comboOther<2&&(GameRhythmKingItemClass.comboOtherText.alpha=0,GameRhythmKingItemClass.comboOtherImage.alpha=0)},a.bitmapText=function(e){GameRhythmKingItemClass.comboYouText.font=e,GameRhythmKingItemClass.comboYouText.text="0",GameRhythmKingItemClass.comboYouText.textAlign=egret.HorizontalAlign.CENTER,GameRhythmKingItemClass.comboYouText.x=135,GameRhythmKingItemClass.comboYouText.y=112,GameRhythmKingItemClass.comboYouText.letterSpacing=-30,GameRhythmKingItemClass.comboYouText.alpha=0,a.addChild(GameRhythmKingItemClass.comboYouText),GameRhythmKingItemClass.comboOtherText.font=e,GameRhythmKingItemClass.comboOtherText.text="0",GameRhythmKingItemClass.comboOtherText.textAlign=egret.HorizontalAlign.CENTER,GameRhythmKingItemClass.comboOtherText.x=509,GameRhythmKingItemClass.comboOtherText.y=112,GameRhythmKingItemClass.comboOtherText.letterSpacing=-30,GameRhythmKingItemClass.comboOtherText.alpha=0,a.addChild(GameRhythmKingItemClass.comboOtherText)},a.whitebitmapText=function(e){GameRhythmKingItemClass.whiteFont=e},a.messageDeal=function(e){var a;if(a=e.event.split("|"),a[0]==GameRhythmKingEventClass.EVENT_CHOOSE_SETTINGS)App.CurrChatId.split("_")[0]==e.userId&&(GameRhythmKingItemClass.choice=parseInt(a[1]));else{if(e.userId==DataCenter.instance.user.id)return;switch(a[0]){case GameRhythmKingEventClass.EVEVT_READY:GameRhythmKingItemClass.readyState[1]=1;break;case GameRhythmKingEventClass.EVENT_PER:GameRhythmKingLogic.sunShineOtherManager(),GameRhythmKingItemClass.rhythmOtherPast+=1,GameRhythmKingItemClass.comboOther+=1,GameRhythmKingItemClass.comboOther>GameRhythmKingItemClass.highestOtherCombo&&(GameRhythmKingItemClass.highestOtherCombo=GameRhythmKingItemClass.comboOther),GameRhythmKingItemClass.perNumOther+=1,GameRhythmKingItemClass.pointOtherNumber+=30+GameRhythmKingItemClass.comboOther,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),GameRhythmKingItemClass.blockItemSettingsOtherArray.push([1,"perfect"]);break;case GameRhythmKingEventClass.EVENT_GOOD:GameRhythmKingLogic.sunShineOtherManager(),GameRhythmKingItemClass.rhythmOtherPast+=1,GameRhythmKingItemClass.comboOther+=1,GameRhythmKingItemClass.comboOther>GameRhythmKingItemClass.highestOtherCombo&&(GameRhythmKingItemClass.highestOtherCombo=GameRhythmKingItemClass.comboOther),GameRhythmKingItemClass.goodNumOther+=1,GameRhythmKingItemClass.pointOtherNumber+=20+GameRhythmKingItemClass.comboOther,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),GameRhythmKingItemClass.blockItemSettingsOtherArray.push([1,"good"]);break;case GameRhythmKingEventClass.EVENT_NOR:GameRhythmKingLogic.sunShineOtherManager(),GameRhythmKingItemClass.rhythmOtherPast+=1,GameRhythmKingItemClass.comboOther=0,GameRhythmKingItemClass.norNumOther+=1,GameRhythmKingItemClass.pointOtherNumber+=10+GameRhythmKingItemClass.comboOther,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),GameRhythmKingItemClass.blockItemSettingsOtherArray.push([1,"normal"]);break;case GameRhythmKingEventClass.EVENT_LOSE:GameRhythmKingLogic.sunShineOtherManager(),GameRhythmKingItemClass.comboOther=0,GameRhythmKingItemClass.pointOther.text=GameRhythmKingItemClass.pointOtherNumber.toString(),GameRhythmKingLogic.displayManager("lose",1),t.loseBlockManager(1);break;case GameRhythmKingEventClass.EVENT_MUSIC_END:GameRhythmKingItemClass.gameOverState[1]=1}}},a.readyTick=function(){if(0==GameRhythmKingLogic.isOffline){if(GameRhythmKingItemClass.usingSetting.length>0&&0!=GameRhythmKingItemClass.gameLevel&&0!=GameRhythmKingItemClass.rhythmSumNum)return App.TimerManager.doTimer(1e3,1,function(){a.waitingSceneManager("remove")},a),egret.stopTick(a.readyTick,a),!1;1==GameRhythmKingItemClass.readyState[0]&&1==GameRhythmKingItemClass.readyState[1]&&GameRhythmKingLogic.settingSwitcher(GameRhythmKingItemClass.choice)}else 1==GameRhythmKingLogic.isOffline&&(egret.stopTick(a.readyTick,a),GameRhythmKingLogic.settingSwitcher(GameRhythmKingLogic.randomChoose()),App.TimerManager.doTimer(2500,1,function(){a.waitingSceneManager("remove")},a));return!1},a.endTick=function(){return 1==GameRhythmKingLogic.isOffline&&(GameRhythmKingItemClass.gameOverState[1]=1),1==GameRhythmKingItemClass.gameOverState[0]&&1==GameRhythmKingItemClass.gameOverState[1]&&(egret.stopTick(a.endTick,a),App.TimerManager.doTimer(500,1,function(){a.showResult()},a)),!1},a.showResult=function(){a.addChild(GameRhythmKingItemClass.waitingSceneMask),a.setChildIndex(GameRhythmKingItemClass.waitingSceneMask,a.numChildren),GameRhythmKingItemClass.waitingSceneMask.alpha=.9,a.removeChild(GameRhythmKingItemClass.alaphaMask),GameRhythmKingItemClass.resultYouBoard=AssetManager.getBitmap("RK_resultBlock_png",!0,!0),GameRhythmKingItemClass.resultYouBoard.x=135,GameRhythmKingItemClass.resultYouBoard.y=665,a.addChild(GameRhythmKingItemClass.resultYouBoard),GameRhythmKingItemClass.resultOtherBoard=AssetManager.getBitmap("RK_resultBlock_png",!0,!0),GameRhythmKingItemClass.resultOtherBoard.x=505,GameRhythmKingItemClass.resultOtherBoard.y=665,a.addChild(GameRhythmKingItemClass.resultOtherBoard);var e=new egret.BitmapText;e.font=GameRhythmKingItemClass.whiteFont,e.text=GameRhythmKingItemClass.pointYouNumber.toString(),e.textAlign=egret.HorizontalAlign.RIGHT,e.letterSpacing=-10,e.x=135,e.y=495,a.addChild(e),GameRhythmKingItemClass.resultYouText.push(e);var t=new egret.BitmapText;t.font=GameRhythmKingItemClass.whiteFont,t.text=GameRhythmKingItemClass.highestYouCombo.toString(),t.textAlign=egret.HorizontalAlign.RIGHT,t.letterSpacing=-10,t.x=135,t.y=571,a.addChild(t),GameRhythmKingItemClass.resultYouText.push(t);var m=new egret.BitmapText;m.font=GameRhythmKingItemClass.whiteFont,m.text=GameRhythmKingItemClass.perNumYou.toString(),m.textAlign=egret.HorizontalAlign.RIGHT,m.letterSpacing=-10,m.x=135,m.y=643,a.addChild(m),GameRhythmKingItemClass.resultYouText.push(m);var s=new egret.BitmapText;s.font=GameRhythmKingItemClass.whiteFont,s.text=GameRhythmKingItemClass.goodNumYou.toString(),s.textAlign=egret.HorizontalAlign.RIGHT,s.letterSpacing=-10,s.x=135,s.y=721,a.addChild(s),GameRhythmKingItemClass.resultYouText.push(s);var h=new egret.BitmapText;h.font=GameRhythmKingItemClass.whiteFont,h.text=GameRhythmKingItemClass.norNumYou.toString(),h.textAlign=egret.HorizontalAlign.RIGHT,h.letterSpacing=-10,h.x=135,h.y=794,a.addChild(h),GameRhythmKingItemClass.resultYouText.push(h);var n=new egret.BitmapText;n.font=GameRhythmKingItemClass.whiteFont,n.text=GameRhythmKingItemClass.pointOtherNumber.toString(),n.textAlign=egret.HorizontalAlign.RIGHT,n.letterSpacing=-10,n.x=505,n.y=495,a.addChild(n),GameRhythmKingItemClass.resultYouText.push(n);var i=new egret.BitmapText;i.font=GameRhythmKingItemClass.whiteFont,i.text=GameRhythmKingItemClass.highestOtherCombo.toString(),i.textAlign=egret.HorizontalAlign.RIGHT,i.letterSpacing=-10,i.x=505,i.y=571,a.addChild(i),GameRhythmKingItemClass.resultYouText.push(i);
var g=new egret.BitmapText;g.font=GameRhythmKingItemClass.whiteFont,g.text=GameRhythmKingItemClass.perNumOther.toString(),g.textAlign=egret.HorizontalAlign.RIGHT,g.letterSpacing=-10,g.x=505,g.y=643,a.addChild(g),GameRhythmKingItemClass.resultYouText.push(g);var o=new egret.BitmapText;o.font=GameRhythmKingItemClass.whiteFont,o.text=GameRhythmKingItemClass.goodNumOther.toString(),o.textAlign=egret.HorizontalAlign.RIGHT,o.letterSpacing=-10,o.x=505,o.y=721,a.addChild(o),GameRhythmKingItemClass.resultYouText.push(o);var r=new egret.BitmapText;r.font=GameRhythmKingItemClass.whiteFont,r.text=GameRhythmKingItemClass.norNumOther.toString(),r.textAlign=egret.HorizontalAlign.RIGHT,r.letterSpacing=-10,r.x=505,r.y=794,a.addChild(r),GameRhythmKingItemClass.resultYouText.push(r);var l=a.rankCalculator(),y=new egret.Bitmap,R=new egret.Bitmap;switch(l[0]){case 1:y=AssetManager.getBitmap("RK_rankA_png",!0,!0);break;case 2:y=AssetManager.getBitmap("RK_rankS_png",!0,!0);break;case 3:y=AssetManager.getBitmap("RK_rankSS_png",!0,!0);break;case 4:y=AssetManager.getBitmap("RK_rankSSS_png",!0,!0)}switch(l[1]){case 1:R=AssetManager.getBitmap("RK_rankA_png",!0,!0);break;case 2:R=AssetManager.getBitmap("RK_rankS_png",!0,!0);break;case 3:R=AssetManager.getBitmap("RK_rankSS_png",!0,!0);break;case 4:R=AssetManager.getBitmap("RK_rankSSS_png",!0,!0)}y.x=135,y.y=215,y.alpha=0,a.addChild(y),R.x=505,R.y=215,R.alpha=0,a.addChild(R);var c=egret.Tween.get(y);c.to({alpha:1,scaleX:2,scaleY:2},50),c.to({scaleX:1,scaleY:1},1e3,egret.Ease.elasticInOut);var C=egret.Tween.get(R);C.to({alpha:1,scaleX:2,scaleY:2},50),C.to({scaleX:1,scaleY:1},1e3,egret.Ease.elasticInOut),C.call(function(){App.TimerManager.doTimer(2e3,1,function(){GameRhythmKingItemClass.pointYouNumber>GameRhythmKingItemClass.pointOtherNumber?GameRhythmKingLogic.gameOver(3):GameRhythmKingItemClass.pointYouNumber<GameRhythmKingItemClass.pointOtherNumber?GameRhythmKingLogic.gameOver(1):GameRhythmKingLogic.gameOver(1)},a)})},a.rankCalculator=function(){var e=[0,0],t=(GameRhythmKingItemClass.goodNumYou+GameRhythmKingItemClass.perNumYou)/(GameRhythmKingItemClass.rhythmSumNum-1);.5>=t?e[0]=1:t>.5&&.7>=t?e[0]=2:t>.7&&.9>=t?e[0]=3:t>.9&&(e[0]=4);var a=(GameRhythmKingItemClass.goodNumOther+GameRhythmKingItemClass.perNumOther)/(GameRhythmKingItemClass.rhythmSumNum-1);return.5>=a?e[1]=1:a>.5&&.7>=a?e[1]=2:a>.7&&.9>=a?e[1]=3:a>.9&&(e[1]=4),e},a.resultDeal=function(e){egret.stopTick(a.endTick,a),egret.stopTick(a.readyTick,a),egret.stopTick(a.tickLogic,a),egret.stopTick(GameRhythmKingLogic.animationTick,a),egret.stopTick(GameRhythmKingLogic.compareTick,a),DataCenter.instance.room.gameResult=e,a.popup("GameResult",null)},a.waitingSceneManager=function(e){switch(e){case"add":GameRhythmKingItemClass.waitingSceneMask=new egret.Shape,GameRhythmKingItemClass.waitingSceneMask.graphics.beginFill(0,.9),GameRhythmKingItemClass.waitingSceneMask.graphics.drawRect(0,0,640,1136),GameRhythmKingItemClass.waitingSceneMask.graphics.endFill(),a.addChild(GameRhythmKingItemClass.waitingSceneMask),GameRhythmKingItemClass.waitingText=AssetManager.getBitmap("RK_waiting_png",!0,!0),GameRhythmKingItemClass.waitingText.x=320,GameRhythmKingItemClass.waitingText.y=800,a.addChild(GameRhythmKingItemClass.waitingText);var t=AssetManager.getBitmap("RK_soundTips_png",!0,!1);t.x=320,t.y=280,t.name="soundTips",a.addChild(t);break;case"remove":if(GameRhythmKingItemClass.waitingSceneMask){switch(GameRhythmKingItemClass.gameLevel){case 1:var m=AssetManager.getBitmap("RK_stars_png",!0,!0);m.x=320,m.y=490,GameRhythmKingItemClass.stars[0]=m,a.addChild(m);break;case 2:var s=AssetManager.getBitmap("RK_stars_png",!0,!0);s.x=260,s.y=490,GameRhythmKingItemClass.stars[0]=s,a.addChild(s);var h=AssetManager.getBitmap("RK_stars_png",!0,!0);h.x=380,h.y=490,GameRhythmKingItemClass.stars[1]=h,a.addChild(h);break;case 3:var n=AssetManager.getBitmap("RK_stars_png",!0,!0);n.x=213,n.y=490,GameRhythmKingItemClass.stars[0]=n,a.addChild(n);var i=AssetManager.getBitmap("RK_stars_png",!0,!0);i.x=320,i.y=490,GameRhythmKingItemClass.stars[1]=i,a.addChild(i);var g=AssetManager.getBitmap("RK_stars_png",!0,!0);g.x=426,g.y=490,GameRhythmKingItemClass.stars[2]=g,a.addChild(g)}var o=egret.Tween.get(GameRhythmKingItemClass.waitingText);o.to({alpha:0},500);var r=egret.Tween.get(a.getChildByName("soundTips"));r.to({alpha:0},500),GameRhythmKingItemClass.starBoard=AssetManager.getBitmap("RK_startBoard_png",!0,!0),GameRhythmKingItemClass.starBoard.x=320,GameRhythmKingItemClass.starBoard.y=490,GameRhythmKingItemClass.starBoard.alpha=0,a.addChild(GameRhythmKingItemClass.starBoard);var l=egret.Tween.get(GameRhythmKingItemClass.starBoard);l.to({alpha:1},300),l.call(function(){GameRhythmKingItemClass.stars.forEach(function(e){a.addChild(e)})});var y=egret.Tween.get(GameRhythmKingItemClass.waitingSceneMask);y.to({alpha:0},3e3),y.call(function(){GameRhythmKingItemClass.stars.forEach(function(e){a.removeChild(e)}),a.removeChild(GameRhythmKingItemClass.starBoard),a.removeChild(GameRhythmKingItemClass.waitingSceneMask),GameRhythmKingItemClass.gameReady.play(),a.addChild(GameRhythmKingItemClass.gameReady)})}}},a.gameStart=function(){App.MessageCenter.addListener(EventMessage.ReceiveGameEventS2C,a.messageDeal,a),App.MessageCenter.addListener(EventMessage.ReceiveGameResultS2C,a.resultDeal,a),egret.startTick(a.readyTick,a),GameRhythmKingItemClass.backGroundLeft=AssetManager.getBitmap("RK_dynamicBackGround_jpg",!1,!1),GameRhythmKingItemClass.backGroundLeft.x=0,GameRhythmKingItemClass.backGroundLeft.y=-863,GameRhythmKingItemClass.backGroundLeft.anchorOffsetX=0,GameRhythmKingItemClass.backGroundLeft.anchorOffsetY=0,a.addChildAt(GameRhythmKingItemClass.backGroundLeft,0),GameRhythmKingItemClass.backGroundRight=AssetManager.getBitmap("RK_dynamicBackGround_jpg",!1,!1),GameRhythmKingItemClass.backGroundRight.x=320,GameRhythmKingItemClass.backGroundRight.y=-863,GameRhythmKingItemClass.backGroundRight.anchorOffsetX=0,GameRhythmKingItemClass.backGroundRight.anchorOffsetY=0,a.addChildAt(GameRhythmKingItemClass.backGroundRight,1),GameRhythmKingItemClass.backGroundLeft_=AssetManager.getBitmap("RK_dynamicBackGround__jpg",!1,!1),GameRhythmKingItemClass.backGroundLeft_.x=0,GameRhythmKingItemClass.backGroundLeft_.y=-2863,GameRhythmKingItemClass.backGroundLeft_.anchorOffsetX=0,GameRhythmKingItemClass.backGroundLeft_.anchorOffsetY=0,a.addChildAt(GameRhythmKingItemClass.backGroundLeft_,2),GameRhythmKingItemClass.backGroundRight_=AssetManager.getBitmap("RK_dynamicBackGround__jpg",!1,!1),GameRhythmKingItemClass.backGroundRight_.x=320,GameRhythmKingItemClass.backGroundRight_.y=-2863,GameRhythmKingItemClass.backGroundRight_.anchorOffsetX=0,GameRhythmKingItemClass.backGroundRight_.anchorOffsetY=0,a.addChildAt(GameRhythmKingItemClass.backGroundRight_,3),GameRhythmKingItemClass.sunShineYou=AssetManager.getBitmap("RK_sunShine_png",!0,!1),GameRhythmKingItemClass.sunShineYou.x=135,GameRhythmKingItemClass.sunShineYou.y=547,GameRhythmKingItemClass.sunShineYou.alpha=0,a.addChildAt(GameRhythmKingItemClass.sunShineYou,4),GameRhythmKingItemClass.sunShineOther=AssetManager.getBitmap("RK_sunShine_png",!0,!1),GameRhythmKingItemClass.sunShineOther.x=505,GameRhythmKingItemClass.sunShineOther.y=547,GameRhythmKingItemClass.sunShineOther.alpha=0,a.addChildAt(GameRhythmKingItemClass.sunShineOther,5),GameRhythmKingItemClass.rkLine=AssetManager.getBitmap("RK_road_normal_jpg",!0,!1),GameRhythmKingItemClass.rkLine.x=320,GameRhythmKingItemClass.rkLine.y=0,a.addChildAt(GameRhythmKingItemClass.rkLine,6),GameRhythmKingItemClass.rkLineMask=AssetManager.getBitmap("RK_road_normal_jpg",!0,!1),GameRhythmKingItemClass.rkLineMask.x=320,GameRhythmKingItemClass.rkLineMask.y=0,a.addChildAt(GameRhythmKingItemClass.rkLineMask,7),GameRhythmKingItemClass.pointBoardYou=AssetManager.getBitmap("RK_pointBoard_blue_png",!1,!1),GameRhythmKingItemClass.pointBoardYou.x=36,GameRhythmKingItemClass.pointBoardYou.y=23,a.addChild(GameRhythmKingItemClass.pointBoardYou),GameRhythmKingItemClass.pointBoardOther=AssetManager.getBitmap("RK_pointBoard_red_png",!1,!1),GameRhythmKingItemClass.pointBoardOther.x=398,GameRhythmKingItemClass.pointBoardOther.y=23,a.addChild(GameRhythmKingItemClass.pointBoardOther),GameRhythmKingItemClass.you=AssetManager.getBitmap("RK_you_png",!1,!1),GameRhythmKingItemClass.you.x=22,GameRhythmKingItemClass.you.y=16,a.addChild(GameRhythmKingItemClass.you),GameRhythmKingItemClass.roadBatholith=AssetManager.getBitmap("RK_road_batholith_jpg",!0,!0),GameRhythmKingItemClass.roadBatholith.x=320,GameRhythmKingItemClass.roadBatholith.y=1027,a.addChild(GameRhythmKingItemClass.roadBatholith),GameRhythmKingItemClass.roadBatholith.touchEnabled=!0,GameRhythmKingItemClass.roadBeatCenter=AssetManager.getBitmap("RK_road_beatCenter_png",!0,!0),GameRhythmKingItemClass.roadBeatCenter.x=320,GameRhythmKingItemClass.roadBeatCenter.y=865,a.addChildAt(GameRhythmKingItemClass.roadBeatCenter,8),GameRhythmKingItemClass.pointYou.text="0",GameRhythmKingItemClass.pointYou.type=egret.TextFieldType.DYNAMIC,GameRhythmKingItemClass.pointYou.textAlign=egret.HorizontalAlign.CENTER,GameRhythmKingItemClass.pointYou.x=138.5,GameRhythmKingItemClass.pointYou.y=52.5,GameRhythmKingItemClass.pointYou.anchorOffsetX=67.5,GameRhythmKingItemClass.pointYou.anchorOffsetY=17.5,GameRhythmKingItemClass.pointYou.width=135,GameRhythmKingItemClass.pointYou.height=48,GameRhythmKingItemClass.pointYou.size=48,a.addChild(GameRhythmKingItemClass.pointYou),GameRhythmKingItemClass.pointOther.text="0",GameRhythmKingItemClass.pointOther.type=egret.TextFieldType.DYNAMIC,GameRhythmKingItemClass.pointOther.textAlign=egret.HorizontalAlign.CENTER,GameRhythmKingItemClass.pointOther.x=500,GameRhythmKingItemClass.pointOther.y=52.5,GameRhythmKingItemClass.pointOther.anchorOffsetX=67.5,GameRhythmKingItemClass.pointOther.anchorOffsetY=17.5,GameRhythmKingItemClass.pointOther.width=135,GameRhythmKingItemClass.pointOther.height=48,GameRhythmKingItemClass.pointOther.size=48,a.addChild(GameRhythmKingItemClass.pointOther),GameRhythmKingItemClass.comboType=AssetManager.getBitmap("RK_perfect_png",!0,!0),GameRhythmKingItemClass.comboType.x=320,GameRhythmKingItemClass.comboType.y=990,GameRhythmKingItemClass.comboType.alpha=0,a.addChild(GameRhythmKingItemClass.comboType),GameRhythmKingItemClass.comboOtherType=AssetManager.getBitmap("RK_perfect_png",!0,!0),GameRhythmKingItemClass.comboOtherType.x=320,GameRhythmKingItemClass.comboOtherType.y=990,GameRhythmKingItemClass.comboOtherType.alpha=0,a.addChild(GameRhythmKingItemClass.comboOtherType),GameRhythmKingItemClass.comboYouImage=AssetManager.getBitmap("RK_combo_png",!0,!0),GameRhythmKingItemClass.comboYouImage.x=80,GameRhythmKingItemClass.comboYouImage.y=170,GameRhythmKingItemClass.comboYouImage.alpha=0,a.addChild(GameRhythmKingItemClass.comboYouImage),GameRhythmKingItemClass.comboOtherImage=AssetManager.getBitmap("RK_combo_png",!0,!0),GameRhythmKingItemClass.comboOtherImage.x=450,GameRhythmKingItemClass.comboOtherImage.y=170,GameRhythmKingItemClass.comboOtherImage.alpha=0,a.addChild(GameRhythmKingItemClass.comboOtherImage),GameRhythmKingItemClass.sideFold=AssetManager.getBitmap("RK_progress_gray_png",!1,!1),GameRhythmKingItemClass.sideFold.anchorOffsetY=944,GameRhythmKingItemClass.sideFold.x=621,GameRhythmKingItemClass.sideFold.y=1100,a.addChild(GameRhythmKingItemClass.sideFold),GameRhythmKingItemClass.sideProgress=AssetManager.getBitmap("RK_progress_yellow_png",!1,!1),GameRhythmKingItemClass.sideProgress.anchorOffsetY=944,GameRhythmKingItemClass.sideProgress.x=621,GameRhythmKingItemClass.sideProgress.y=1100,GameRhythmKingItemClass.sideProgress.scaleY=.001,a.addChild(GameRhythmKingItemClass.sideProgress);var e=DataCenter.instance.room.player;GameRhythmKingItemClass.otherRoleAvatar=new RoleAvatar(e.curAvatarType,e.imgUrl,"toukuang"),GameRhythmKingItemClass.otherRoleAvatar.armature.scaleX=.4,GameRhythmKingItemClass.otherRoleAvatar.armature.scaleY=.4,GameRhythmKingItemClass.otherRoleAvatar.armature.x=610,GameRhythmKingItemClass.otherRoleAvatar.armature.y=1100,a.addChild(GameRhythmKingItemClass.otherRoleAvatar.armature);var t=DataCenter.instance.user;if(GameRhythmKingItemClass.myRoleAvatar=new RoleAvatar(t.curAvatarType,t.imgUrl,"toukuang"),GameRhythmKingItemClass.myRoleAvatar.armature.scaleX=.4,GameRhythmKingItemClass.myRoleAvatar.armature.scaleY=.4,GameRhythmKingItemClass.myRoleAvatar.armature.x=610,GameRhythmKingItemClass.myRoleAvatar.armature.y=1100,a.addChild(GameRhythmKingItemClass.myRoleAvatar.armature),GameRhythmKingItemClass.jumpRoleYou=new RoleAvatar(t.curAvatarType,t.imgUrl,"dbxiaoren00_game7"),GameRhythmKingItemClass.jumpRoleYou.armature.x=147.5,GameRhythmKingItemClass.jumpRoleYou.armature.y=1120,a.addChild(GameRhythmKingItemClass.jumpRoleYou.armature),GameRhythmKingItemClass.jumpRoleOther=new RoleAvatar(e.curAvatarType,e.imgUrl,"dbxiaoren00_game7"),GameRhythmKingItemClass.jumpRoleOther.armature.x=492.5,GameRhythmKingItemClass.jumpRoleOther.armature.y=1120,a.addChild(GameRhythmKingItemClass.jumpRoleOther.armature),GameRhythmKingItemClass.sparkLeft=AssetManager.getBitmap("RK_pat_1_png",!0,!1),GameRhythmKingItemClass.sparkLeft.alpha=0,GameRhythmKingItemClass.sparkLeft.anchorOffsetY=100,a.addChild(GameRhythmKingItemClass.sparkLeft),GameRhythmKingItemClass.sparkRight=AssetManager.getBitmap("RK_pat_2_png",!0,!1),GameRhythmKingItemClass.sparkRight.alpha=0,GameRhythmKingItemClass.sparkRight.anchorOffsetY=100,a.addChild(GameRhythmKingItemClass.sparkRight),GameRhythmKingItemClass.alaphaMask=AssetManager.getBitmap("RK_alphaMask_png",!1,!1),GameRhythmKingItemClass.alaphaMask.x=0,GameRhythmKingItemClass.alaphaMask.y=0,GameRhythmKingItemClass.alaphaMask.alpha=.1,a.addChild(GameRhythmKingItemClass.alaphaMask),GameRhythmKingItemClass.alaphaMask.touchEnabled=!0,GameRhythmKingItemClass.alaphaMask.addEventListener("touchTap",GameRhythmKingLogic.tap,a),GameRhythmKingItemClass.bottomSide=AssetManager.getBitmap("RK_bottomSide_png",!1,!1),GameRhythmKingItemClass.bottomSide.x=0,GameRhythmKingItemClass.bottomSide.y=1136,GameRhythmKingItemClass.bottomSide.alpha=1,a.addChild(GameRhythmKingItemClass.bottomSide),GameRhythmKingItemClass.topSide=AssetManager.getBitmap("RK_bottomSide_png",!1,!1),GameRhythmKingItemClass.topSide.anchorOffsetY=300,GameRhythmKingItemClass.topSide.x=0,GameRhythmKingItemClass.topSide.y=0,GameRhythmKingItemClass.topSide.alpha=1,a.addChild(GameRhythmKingItemClass.topSide),GameRhythmKingItemClass.loseBlockYou=AssetManager.getBitmap("RK_block_miss_png",!0,!0),GameRhythmKingItemClass.loseBlockYou.x=147.5,GameRhythmKingItemClass.loseBlockYou.y=300,GameRhythmKingItemClass.loseBlockYou.alpha=0,a.addChild(GameRhythmKingItemClass.loseBlockYou),GameRhythmKingItemClass.loseBlockOther=AssetManager.getBitmap("RK_block_miss_png",!0,!0),GameRhythmKingItemClass.loseBlockOther.x=492.5,GameRhythmKingItemClass.loseBlockOther.y=300,GameRhythmKingItemClass.loseBlockOther.alpha=0,a.addChild(GameRhythmKingItemClass.loseBlockOther),a.waitingSceneManager("add"),RES.getResByUrl("resource/assets/games/game_RhythmKing/RK_comboFont.fnt",a.bitmapText,a,RES.ResourceItem.TYPE_FONT),RES.getResByUrl("resource/assets/games/game_RhythmKing/RK_whiteFont.fnt",a.whitebitmapText,a,RES.ResourceItem.TYPE_FONT),GameRhythmKingItemClass.keyPressSoundEffect=new SoundEffects,GameRhythmKingItemClass.keyPressSoundEffect.setVolume(.3),a.stage.stageHeight<1136){GameRhythmKingItemClass.multiple=a.stage.stageHeight/1136,a.scaleX=GameRhythmKingItemClass.multiple,a.scaleY=GameRhythmKingItemClass.multiple;var m=640*GameRhythmKingItemClass.multiple;a.x=(640-m)/2}else a.stage.stageHeight>1136&&(a.y=(a.stage.stageHeight-1136)/2);GameRhythmKingItemClass.gameReady=new GameReady(function(){GameRhythmKingItemClass.backGroundMusicPlayer=new SoundEffects,GameRhythmKingItemClass.backGroundMusicPlayer.setVolume(1),egret.startTick(a.tickLogic,a),egret.startTick(GameRhythmKingLogic.compareTick,a),egret.startTick(GameRhythmKingLogic.animationTick,a);var e=AssetManager.getBitmap("RK_block_normal_png",!0,!1),t=AssetManager.getBitmap("RK_block_normal_png",!0,!1);if(a.addBlock(e,0,43,"perfect"),a.addBlock(t,1,43,"perfect"),!App.IsXiaoMi&&!App.IsWanba){var m=AssetManager.getBitmap("goBack_png",!1,!1);m.y=19,m.name="backBtn",a.addChild(m),m.touchEnabled=!0,m.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){a.popup("GameSureLeave")},a)}}),GameRhythmKingItemClass.gameReady.x=300,GameRhythmKingItemClass.gameReady.y=App.GameHeight/2,GameRhythmKingEventClass.rkMessagerCenter(GameRhythmKingEventClass.EVENT_CHOOSE_SETTINGS),GameRhythmKingEventClass.rkMessagerCenter(GameRhythmKingEventClass.EVEVT_READY),GameRhythmKingItemClass.readyState[0]=1},a}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),GameRhythmKingEventClass.dispose(),GameRhythmKingItemClass.dispose(),GameRhythmKingLogic.dispose(),GameRhythmKingSettingsClass.dispose(),DataCenter.instance.room.IsAI&&(GameRhythmKingLogic.isOffline=!0),this.gameStart(),App.SoundManager.stopBg()},t.prototype.dispose=function(){e.prototype.dispose.call(this),App.TimerManager.removeAll(this),egret.stopTick(this.endTick,this),egret.stopTick(this.readyTick,this),egret.stopTick(this.tickLogic,this),egret.stopTick(GameRhythmKingLogic.animationTick,this),egret.stopTick(GameRhythmKingLogic.compareTick,this),GameRhythmKingItemClass.backGroundMusicPlayer&&GameRhythmKingItemClass.backGroundMusicPlayer.stopSound(GameRhythmKingItemClass.musicPlaying),GameRhythmKingItemClass.alaphaMask&&GameRhythmKingItemClass.alaphaMask.removeEventListener("touchTap",GameRhythmKingLogic.tap,this),GameRhythmKingEventClass.dispose(),GameRhythmKingItemClass.dispose(),GameRhythmKingLogic.dispose(),GameRhythmKingSettingsClass.dispose()},t.effectiveHeight=function(e){var t=0;switch(e){case"perfect":t=43;break;case"good":t=21;break;case"normal":t=10}return t},t.loseBlockManager=function(e){var a;switch(e){case 0:egret.Tween.removeTweens(GameRhythmKingItemClass.loseBlockYou),GameRhythmKingItemClass.loseBlockYou.y=300,a=egret.Tween.get(GameRhythmKingItemClass.loseBlockYou),GameRhythmKingItemClass.loseBlockYou.alpha=1;break;case 1:egret.Tween.removeTweens(GameRhythmKingItemClass.loseBlockOther),GameRhythmKingItemClass.loseBlockOther.y=300,a=egret.Tween.get(GameRhythmKingItemClass.loseBlockOther),GameRhythmKingItemClass.loseBlockOther.alpha=1}a.to({y:1136-GameRhythmKingItemClass.blockYouHeight+40+2*t.effectiveHeight(GameRhythmKingItemClass.blockArray[1])-118},100),a.call(function(){switch(e){case 0:GameRhythmKingItemClass.loseBlockYou.alpha=0,GameRhythmKingItemClass.loseBlockYou.y=300;break;case 1:GameRhythmKingItemClass.loseBlockOther.alpha=0,GameRhythmKingItemClass.loseBlockOther.y=300}})},t}(State);__reflect(GameRhythmKingMainScene.prototype,"GameRhythmKingMainScene");var GameRhythmKingSettingsClass=function(){function e(){}return e.settings1=[2,[32,57,86,152,181,216,286,316,350,383,419,453,475,519,549,621,652,688,721,751,783,809,887,920,953,988,1020,1088,1121,1154,1178,1221,1253,1276,1287,1316,1352,1383,1418,1451,1478,1518,1549,1567,1616,1653,1679,1703,1749,1785,1809,1850,1877,1919,1951,1988,2019,2052,2084,2117,2152,2185,2218,2253,2287,2321,2351,2384]],e.settings2=[2,[47,79,96,121,136,149,165,177,194,248,299,315,359,373,386,402,414,429,489,520,565,579,603,638,690,704,718,733,762,794,820,831,852,863,889,922,943,954,971,983,1013,1042,1059,1071,1086,1097,1128,1145,1176,1189,1205,1218,1246,1265,1297,1308,1329,1364,1399]],e.settings3=[3,[78,108,134,158,199,212,225,252,276,302,324,347,394,406,418,443,470,494,517,541,564,589,601,613,636,661,685,708,731,755,781,795,806,828,855,879,900,924,947,973,984,997,1022,1045,1069,1092,1116,1139,1165,1178,1189,1212,1239,1263,1286,1309,1333,1357,1368,1382,1405,1431,1455,1477,1501,1524,1547,1560,1571,1595,1621,1644,1669,1692,1703,1715,1725,1738,1763,1791,1812,1835,1861,1887,1908,1931,1955,1981,2005,2027,2050,2074,2085,2096,2107,2120,2131,2169,2197,2223,2245,2268,2291,2313,2339,2365,2390,2412,2436,2461,2480,2499,2518,2530,2559,2581,2606,2628,2653,2671,2702,2727,2749,2773,2796,2821,2844,2869,2893,2916,2941,2965,2987,3012,3038,3062,3086,3110,3132,3156,3182,3207,3228,3252,3277,3303,3327,3351,3375,3397,3421,3433,3444,3456,3468,3492,3517,3541,3563,3586,3612,3637,3657,3684,3708,3732,3756,3780,3802,3814,3826,3837,3850,3875,3901,3925,3949,3973,3997,4021,4044,4068,4092,4117,4138,4164,4190,4212,4236,4261,4285,4308,4320,4355,4382,4405,4424,4455,4479,4502,4515,4533,4552,4575,4596]],e.dispose=function(){},e}();__reflect(GameRhythmKingSettingsClass.prototype,"GameRhythmKingSettingsClass");